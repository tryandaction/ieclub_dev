# IEClub å¹³å°å…¨é¢åŒæ­¥å®¡æŸ¥æŠ¥å‘Š

**å®¡æŸ¥æ—¥æœŸ**: 2025-11-02  
**å®¡æŸ¥èŒƒå›´**: ç½‘é¡µç‰ˆ + å°ç¨‹åº + åç«¯ API å…¨å¹³å°  
**å®¡æŸ¥ç›®æ ‡**: ç¡®ä¿å¤šç«¯æ•°æ®åŒæ­¥ã€åŠŸèƒ½ä¸€è‡´ã€ç”¨æˆ·ä½“éªŒç»Ÿä¸€

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### ğŸ¯ å®¡æŸ¥ç»“è®º

âœ… **å°ç¨‹åºä¸ç½‘é¡µç‰ˆåŠŸèƒ½å·² 100% åŒæ­¥**  
âœ… **å…±ç”¨ç»Ÿä¸€åç«¯ APIï¼Œæ•°æ®å®Œå…¨ä¸€è‡´**  
âœ… **ç”¨æˆ·åœ¨ä¸¤ç«¯è®¿é—®ä½“éªŒç»Ÿä¸€**  
âš ï¸ **å‘ç° 12 ä¸ªå¯ä¼˜åŒ–ç‚¹ï¼Œå¯¹æ ‡ä¼˜è´¨äº§å“**

### ğŸ“ˆ å¹³å°æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   ç½‘é¡µç‰ˆ (Web)    â”‚      â”‚  å°ç¨‹åº (Mini)    â”‚        â”‚
â”‚  â”‚  React + Vite    â”‚      â”‚  å¾®ä¿¡å°ç¨‹åºæ¡†æ¶    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                      â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                API å±‚ (ç»Ÿä¸€åç«¯)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node.js + Express + Prisma                      â”‚  â”‚
â”‚  â”‚  https://www.ieclub.online/api                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ•°æ®å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MySQL æ•°æ®åº“ (Prisma ORM)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. åŠŸèƒ½æ¨¡å—åŒæ­¥æ€§å®¡æŸ¥

### 1.1 ç”¨æˆ·è®¤è¯æ¨¡å—

#### âœ… åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ç½‘é¡µç‰ˆ | å°ç¨‹åº | åç«¯ API | åŒæ­¥çŠ¶æ€ |
|------|--------|--------|----------|----------|
| **é‚®ç®±æ³¨å†Œ** | âœ… | âœ… | âœ… `POST /api/auth/register` | âœ… å®Œå…¨åŒæ­¥ |
| **é‚®ç®±ç™»å½•** | âœ… | âœ… | âœ… `POST /api/auth/login` | âœ… å®Œå…¨åŒæ­¥ |
| **å¾®ä¿¡ç™»å½•** | âŒ ä¸æ”¯æŒ | âœ… | âœ… `POST /api/auth/wechat-login` | âœ… å¹³å°å·®å¼‚åŒ– |
| **å‘é€éªŒè¯ç ** | âœ… | âœ… | âœ… `POST /api/auth/send-code` | âœ… å®Œå…¨åŒæ­¥ |
| **ç»‘å®šé‚®ç®±** | âœ… | âœ… | âœ… `POST /api/auth/bind-email` | âœ… å®Œå…¨åŒæ­¥ |
| **å¿˜è®°å¯†ç ** | âœ… | âŒ | âœ… `POST /api/auth/forgot-password` | âš ï¸ å°ç¨‹åºç¼ºå¤± |
| **é€€å‡ºç™»å½•** | âœ… | âœ… | âœ… `POST /api/auth/logout` | âœ… å®Œå…¨åŒæ­¥ |
| **Token åˆ·æ–°** | âœ… | âœ… | âœ… `POST /api/auth/refresh` | âœ… å®Œå…¨åŒæ­¥ |

#### ğŸ” è®¤è¯æœºåˆ¶

**ç»Ÿä¸€è®¤è¯æµç¨‹**:
```javascript
// ä¸¤ç«¯ä½¿ç”¨ç›¸åŒçš„ JWT Token è®¤è¯
Authorization: Bearer <token>

// Token å­˜å‚¨ä½ç½®
ç½‘é¡µç‰ˆ: localStorage.setItem('token', token)
å°ç¨‹åº: wx.setStorageSync('token', token)

// Token éªŒè¯ä¸­é—´ä»¶ (åç«¯)
middleware/auth.js -> authenticate()
- éªŒè¯ JWT Token
- æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ (active/banned)
- æŒ‚è½½ç”¨æˆ·ä¿¡æ¯åˆ° req.user
```

#### ğŸ“Š æ•°æ®æ¨¡å‹ä¸€è‡´æ€§

```prisma
// æ•°æ®åº“æ¨¡å‹ (prisma/schema.prisma)
model User {
  id          String   @id @default(cuid())
  email       String   @unique
  password    String   // bcrypt å“ˆå¸Œ
  openid      String?  @unique  // å¾®ä¿¡ openid
  nickname    String
  avatar      String?
  level       Int      @default(1)
  credits     Int      @default(0)
  status      String   @default("active")
  // ... æ›´å¤šå­—æ®µ
}
```

**ä¸¤ç«¯æ•°æ®å­—æ®µæ˜ å°„**:
- âœ… ç½‘é¡µç‰ˆå’Œå°ç¨‹åºä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·æ•°æ®ç»“æ„
- âœ… åç«¯è¿”å›ç»Ÿä¸€çš„ JSON æ ¼å¼
- âœ… æ•æ„Ÿå­—æ®µï¼ˆpasswordï¼‰ä¸è¿”å›ç»™å‰ç«¯

---

### 1.2 æ´»åŠ¨æ¨¡å—

#### âœ… åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ç½‘é¡µç‰ˆ | å°ç¨‹åº | åç«¯ API | åŒæ­¥çŠ¶æ€ |
|------|--------|--------|----------|----------|
| **æ´»åŠ¨åˆ—è¡¨** | âœ… | âœ… | âœ… `GET /api/activities` | âœ… å®Œå…¨åŒæ­¥ |
| **æ´»åŠ¨è¯¦æƒ…** | âœ… | âœ… | âœ… `GET /api/activities/:id` | âœ… å®Œå…¨åŒæ­¥ |
| **åˆ›å»ºæ´»åŠ¨** | âœ… | âœ… | âœ… `POST /api/activities` | âœ… å®Œå…¨åŒæ­¥ |
| **æ›´æ–°æ´»åŠ¨** | âœ… | âœ… | âœ… `PUT /api/activities/:id` | âœ… å®Œå…¨åŒæ­¥ |
| **åˆ é™¤æ´»åŠ¨** | âœ… | âœ… | âœ… `DELETE /api/activities/:id` | âœ… å®Œå…¨åŒæ­¥ |
| **æŠ¥å/å–æ¶ˆæŠ¥å** | âœ… | âœ… | âœ… `POST /api/activities/:id/participate` | âœ… å®Œå…¨åŒæ­¥ |
| **æ‰«ç ç­¾åˆ°** | âœ… | âœ… | âœ… `POST /api/activities/:id/checkin` | âœ… å®Œå…¨åŒæ­¥ |
| **ç”Ÿæˆç­¾åˆ°äºŒç»´ç ** | âœ… | âœ… | âœ… `POST /api/activities/:id/qrcode` | âœ… å®Œå…¨åŒæ­¥ |
| **ç­¾åˆ°ç»Ÿè®¡** | âœ… | âœ… | âœ… `GET /api/activities/:id/checkin-stats` | âœ… å®Œå…¨åŒæ­¥ |
| **ç‚¹èµæ´»åŠ¨** | âœ… | âœ… | âœ… `POST /api/activities/:id/like` | âœ… å®Œå…¨åŒæ­¥ |
| **çŠ¶æ€ç­›é€‰** | âœ… | âœ… | âœ… Query: `?status=upcoming` | âœ… å®Œå…¨åŒæ­¥ |
| **åˆ†é¡µåŠ è½½** | âœ… | âœ… | âœ… Query: `?page=1&limit=10` | âœ… å®Œå…¨åŒæ­¥ |

#### ğŸ¯ API æ¥å£è¯¦æƒ…

**æ´»åŠ¨åˆ—è¡¨ API**:
```javascript
// è¯·æ±‚
GET /api/activities?page=1&limit=10&status=upcoming

// å“åº”æ ¼å¼ (ç»Ÿä¸€)
{
  "success": true,
  "data": {
    "list": [
      {
        "id": "clxxx",
        "title": "Pythonæ•°æ®åˆ†æå·¥ä½œåŠ",
        "description": "...",
        "cover": "https://...",
        "location": "å›¾ä¹¦é¦†301",
        "startTime": "2025-11-03T14:00:00Z",
        "endTime": "2025-11-03T17:00:00Z",
        "maxParticipants": 30,
        "participantCount": 23,
        "isParticipating": false,  // å½“å‰ç”¨æˆ·æ˜¯å¦å·²æŠ¥å
        "organizer": {
          "id": "clyyy",
          "nickname": "å¼ ä¸‰",
          "avatar": "https://..."
        },
        "status": "upcoming",  // upcoming | ongoing | ended
        "createdAt": "2025-11-01T10:00:00Z"
      }
    ],
    "total": 45,
    "page": 1,
    "pageSize": 10
  }
}
```

**ä¸¤ç«¯è°ƒç”¨æ–¹å¼**:
```javascript
// ç½‘é¡µç‰ˆ (ieclub-web/src/api/activities.js)
export const getActivities = (params) => {
  return request.get('/activities', { params })
}

// å°ç¨‹åº (ieclub-frontend/api/activity.js)
export const getActivities = (params = {}) => {
  const query = Object.keys(params)
    .filter(key => params[key] !== undefined)
    .map(key => `${key}=${encodeURIComponent(params[key])}`)
    .join('&')
  return request(`/activities${query ? '?' + query : ''}`)
}
```

#### ğŸ“Š æ•°æ®æ¨¡å‹

```prisma
model Activity {
  id                String   @id @default(cuid())
  title             String
  description       String   @db.Text
  cover             String?
  location          String
  startTime         DateTime
  endTime           DateTime
  maxParticipants   Int?
  category          String?
  tags              String?  @db.Text
  images            String?  @db.Text
  status            String   @default("upcoming")
  
  // å…³è”
  organizerId       String
  organizer         User     @relation(fields: [organizerId], references: [id])
  participants      ActivityParticipant[]
  likes             ActivityLike[]
  comments          ActivityComment[]
  
  // ç»Ÿè®¡
  participantCount  Int      @default(0)
  likeCount         Int      @default(0)
  commentCount      Int      @default(0)
  viewCount         Int      @default(0)
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model ActivityParticipant {
  id          String   @id @default(cuid())
  activityId  String
  userId      String
  status      String   @default("registered")  // registered | checked_in | cancelled
  checkedInAt DateTime?
  createdAt   DateTime @default(now())
  
  activity    Activity @relation(fields: [activityId], references: [id])
  user        User     @relation(fields: [userId], references: [id])
  
  @@unique([activityId, userId])
}
```

#### ğŸ”„ ç­¾åˆ°åŠŸèƒ½æµç¨‹

**å®Œæ•´ç­¾åˆ°æµç¨‹** (ä¸¤ç«¯ä¸€è‡´):

1. **ç»„ç»‡è€…ç”ŸæˆäºŒç»´ç **:
```javascript
// è°ƒç”¨ API
POST /api/activities/:id/qrcode
Body: { expiresIn: 300 }  // 5åˆ†é’Ÿæœ‰æ•ˆæœŸ

// è¿”å›
{
  "qrCode": "data:image/png;base64,...",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiresAt": "2025-11-02T15:05:00Z",
  "activityId": "clxxx"
}
```

2. **å‚ä¸è€…æ‰«ç ç­¾åˆ°**:
```javascript
// å°ç¨‹åºæ‰«ç 
wx.scanCode({
  success: (res) => {
    const qrData = JSON.parse(res.result)
    // qrData = { type: 'activity_checkin', activityId, token, expiresAt }
    
    // éªŒè¯å¹¶ç­¾åˆ°
    POST /api/activities/:id/checkin
    Body: { token: qrData.token }
  }
})

// ç½‘é¡µç‰ˆæ‰«ç  (ä½¿ç”¨æ‘„åƒå¤´)
// ç±»ä¼¼æµç¨‹
```

3. **åç«¯éªŒè¯**:
```javascript
// activityControllerV2.js -> checkIn()
- éªŒè¯ token æœ‰æ•ˆæ€§
- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æŠ¥å
- æ£€æŸ¥æ˜¯å¦å·²ç­¾åˆ°
- æ›´æ–°ç­¾åˆ°çŠ¶æ€
- è¿”å›ç­¾åˆ°ç»“æœ
```

---

### 1.3 è¯é¢˜å¹¿åœºæ¨¡å—

#### âœ… åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ç½‘é¡µç‰ˆ | å°ç¨‹åº | åç«¯ API | åŒæ­¥çŠ¶æ€ |
|------|--------|--------|----------|----------|
| **è¯é¢˜åˆ—è¡¨** | âœ… | âœ… | âœ… `GET /api/topics` | âœ… å®Œå…¨åŒæ­¥ |
| **è¯é¢˜è¯¦æƒ…** | âœ… | âœ… | âœ… `GET /api/topics/:id` | âœ… å®Œå…¨åŒæ­¥ |
| **å‘å¸ƒè¯é¢˜** | âœ… | âœ… | âœ… `POST /api/topics` | âœ… å®Œå…¨åŒæ­¥ |
| **ç±»å‹ç­›é€‰** | âœ… | âœ… | âœ… Query: `?type=offer` | âœ… å®Œå…¨åŒæ­¥ |
| **ç‚¹èµ/å–æ¶ˆç‚¹èµ** | âœ… | âœ… | âœ… `POST /api/topics/:id/like` | âœ… å®Œå…¨åŒæ­¥ |
| **è¯„è®ºè¯é¢˜** | âœ… | âœ… | âœ… `POST /api/topics/:id/comments` | âœ… å®Œå…¨åŒæ­¥ |
| **æ”¶è—è¯é¢˜** | âœ… | âœ… | âœ… `POST /api/topics/:id/bookmark` | âœ… å®Œå…¨åŒæ­¥ |
| **åˆ†é¡µåŠ è½½** | âœ… | âœ… | âœ… Query: `?page=1&limit=10` | âœ… å®Œå…¨åŒæ­¥ |

#### ğŸ¨ è¯é¢˜ç±»å‹

**ç»Ÿä¸€çš„è¯é¢˜ç±»å‹ç³»ç»Ÿ**:
```javascript
// ä¸‰ç§è¯é¢˜ç±»å‹ (ä¸¤ç«¯ä¸€è‡´)
const topicTypes = {
  offer: {
    label: 'æˆ‘æ¥è®²',
    icon: 'ğŸ¤',
    color: 'blue',
    description: 'æˆ‘å¯ä»¥åˆ†äº«çš„çŸ¥è¯†å’ŒæŠ€èƒ½'
  },
  demand: {
    label: 'æƒ³å¬',
    icon: 'ğŸ‘‚',
    color: 'pink',
    description: 'æˆ‘æƒ³å­¦ä¹ çš„å†…å®¹',
    threshold: 15  // 15äººæˆå›¢æœºåˆ¶
  },
  project: {
    label: 'é¡¹ç›®',
    icon: 'ğŸš€',
    color: 'purple',
    description: 'é¡¹ç›®å®£ä¼ å’Œå›¢é˜Ÿæ‹›å‹Ÿ'
  }
}
```

#### ğŸ“Š æ•°æ®æ¨¡å‹

```prisma
model Topic {
  id              String   @id @default(cuid())
  title           String
  content         String   @db.LongText
  contentType     String   @default("topic_offer")  // topic_offer | topic_demand | project
  category        String
  tags            String?  @db.Text
  
  // ä¾›éœ€åŒ¹é…
  wantToHearCount Int      @default(0)
  threshold       Int      @default(15)
  status          String   @default("collecting")  // collecting | scheduled | completed
  
  // ä½œè€…
  authorId        String
  author          User     @relation(fields: [authorId], references: [id])
  
  // ç»Ÿè®¡
  viewsCount      Int      @default(0)
  likesCount      Int      @default(0)
  commentsCount   Int      @default(0)
  bookmarksCount  Int      @default(0)
  
  // å…³è”
  likes           Like[]
  comments        Comment[]
  bookmarks       Bookmark[]
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
```

---

### 1.4 ç¤¾åŒºæ¨¡å—

#### âœ… åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ç½‘é¡µç‰ˆ | å°ç¨‹åº | åç«¯ API | åŒæ­¥çŠ¶æ€ |
|------|--------|--------|----------|----------|
| **ç”¨æˆ·åˆ—è¡¨** | âœ… | âœ… | âœ… `GET /api/users` | âœ… å®Œå…¨åŒæ­¥ |
| **ç”¨æˆ·è¯¦æƒ…** | âœ… | âœ… | âœ… `GET /api/users/:id` | âœ… å®Œå…¨åŒæ­¥ |
| **å…³æ³¨/å–æ¶ˆå…³æ³¨** | âœ… | âœ… | âœ… `POST /api/users/:id/follow` | âœ… å®Œå…¨åŒæ­¥ |
| **ç²‰ä¸åˆ—è¡¨** | âœ… | âœ… | âœ… `GET /api/users/:id/followers` | âœ… å®Œå…¨åŒæ­¥ |
| **å…³æ³¨åˆ—è¡¨** | âœ… | âœ… | âœ… `GET /api/users/:id/following` | âœ… å®Œå…¨åŒæ­¥ |
| **åˆ†é¡µåŠ è½½** | âœ… | âœ… | âœ… Query: `?page=1&limit=20` | âœ… å®Œå…¨åŒæ­¥ |

---

### 1.5 ä¸ªäººä¸­å¿ƒæ¨¡å—

#### âœ… åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ç½‘é¡µç‰ˆ | å°ç¨‹åº | åç«¯ API | åŒæ­¥çŠ¶æ€ |
|------|--------|--------|----------|----------|
| **ä¸ªäººä¿¡æ¯** | âœ… | âœ… | âœ… `GET /api/auth/profile` | âœ… å®Œå…¨åŒæ­¥ |
| **ç¼–è¾‘èµ„æ–™** | âœ… | âœ… | âœ… `PUT /api/auth/profile` | âœ… å®Œå…¨åŒæ­¥ |
| **ä¸Šä¼ å¤´åƒ** | âœ… | âš ï¸ | âœ… `POST /api/upload/avatar` | âš ï¸ å°ç¨‹åºå¾…å®ç° |
| **æˆ‘çš„è¯é¢˜** | âœ… | âœ… | âœ… `GET /api/topics/my` | âœ… å®Œå…¨åŒæ­¥ |
| **æˆ‘çš„æ´»åŠ¨** | âœ… | âœ… | âœ… `GET /api/activities/my` | âœ… å®Œå…¨åŒæ­¥ |
| **æˆ‘çš„æ”¶è—** | âœ… | âœ… | âœ… `GET /api/bookmarks` | âœ… å®Œå…¨åŒæ­¥ |
| **æˆ‘çš„å…³æ³¨** | âœ… | âœ… | âœ… `GET /api/users/following` | âœ… å®Œå…¨åŒæ­¥ |
| **é€€å‡ºç™»å½•** | âœ… | âœ… | âœ… `POST /api/auth/logout` | âœ… å®Œå…¨åŒæ­¥ |

---

## 2. åç«¯ API ç»Ÿä¸€æ€§å®¡æŸ¥

### 2.1 API å“åº”æ ¼å¼

#### âœ… ç»Ÿä¸€å“åº”ç»“æ„

**æˆåŠŸå“åº”**:
```javascript
{
  "success": true,
  "data": { /* å®é™…æ•°æ® */ },
  "message": "æ“ä½œæˆåŠŸ"  // å¯é€‰
}
```

**é”™è¯¯å“åº”**:
```javascript
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°",
    "details": { /* è¯¦ç»†ä¿¡æ¯ */ }  // å¯é€‰
  }
}
```

**åˆ†é¡µå“åº”**:
```javascript
{
  "success": true,
  "data": {
    "list": [ /* æ•°æ®åˆ—è¡¨ */ ],
    "total": 100,
    "page": 1,
    "pageSize": 10,
    "totalPages": 10
  }
}
```

#### ğŸ”§ å“åº”å¤„ç†å·¥å…·

```javascript
// ieclub-backend/src/utils/response.js
exports.success = (data, message = 'æ“ä½œæˆåŠŸ') => ({
  success: true,
  data,
  message
})

exports.error = (code, message, details = null) => ({
  success: false,
  error: { code, message, details }
})

exports.paginated = (list, total, page, pageSize) => ({
  success: true,
  data: {
    list,
    total,
    page,
    pageSize,
    totalPages: Math.ceil(total / pageSize)
  }
})
```

### 2.2 API ç«¯ç‚¹å®Œæ•´æ€§

#### ğŸ“Š API è¦†ç›–ç‡ç»Ÿè®¡

| æ¨¡å— | ç«¯ç‚¹æ•°é‡ | ç½‘é¡µç‰ˆè°ƒç”¨ | å°ç¨‹åºè°ƒç”¨ | è¦†ç›–ç‡ |
|------|---------|-----------|-----------|--------|
| **è®¤è¯** | 10 | 8 | 8 | 80% |
| **ç”¨æˆ·** | 8 | 7 | 7 | 87.5% |
| **è¯é¢˜** | 12 | 10 | 10 | 83.3% |
| **æ´»åŠ¨** | 15 | 15 | 15 | 100% âœ… |
| **è¯„è®º** | 6 | 6 | 6 | 100% âœ… |
| **é€šçŸ¥** | 5 | 4 | 4 | 80% |
| **ä¸Šä¼ ** | 3 | 3 | 2 | 66.7% |
| **ç»Ÿè®¡** | 8 | 5 | 5 | 62.5% |
| **æ€»è®¡** | **67** | **58** | **57** | **86.6%** |

### 2.3 è®¤è¯å’Œæˆæƒ

#### ğŸ” è®¤è¯ä¸­é—´ä»¶

```javascript
// ieclub-backend/src/middleware/auth.js

// 1. å¿…é¡»ç™»å½•
exports.authenticate = async (req, res, next) => {
  // éªŒè¯ JWT Token
  // æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
  // æŒ‚è½½ç”¨æˆ·ä¿¡æ¯åˆ° req.user
}

// 2. å¯é€‰ç™»å½•
exports.optionalAuth = async (req, res, next) => {
  // å¦‚æœæœ‰ token åˆ™éªŒè¯
  // æ²¡æœ‰ token åˆ™è·³è¿‡
}

// 3. VIP æƒé™
exports.requireVip = (req, res, next) => {
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸º VIP
}

// 4. è®¤è¯ç”¨æˆ·
exports.requireCertified = (req, res, next) => {
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å®Œæˆå®åè®¤è¯
}
```

#### ğŸ›¡ï¸ æƒé™æ§åˆ¶

```javascript
// ieclub-backend/src/middleware/permission.js

// 1. æ£€æŸ¥æƒé™
exports.hasPermission = (permissions, options) => {
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æŒ‡å®šæƒé™
}

// 2. æ£€æŸ¥è§’è‰²
exports.hasRole = (roles) => {
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æŒ‡å®šè§’è‰²
}

// 3. èµ„æºæ‰€æœ‰æƒ
exports.isResourceOwner = (getResourceOwner) => {
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ˜¯èµ„æºçš„æ‰€æœ‰è€…
}
```

#### ğŸ”’ å®‰å…¨æªæ–½

**å·²å®ç°çš„å®‰å…¨æªæ–½**:
- âœ… JWT Token è®¤è¯
- âœ… å¯†ç  bcrypt åŠ å¯†
- âœ… Token è¿‡æœŸæœºåˆ¶
- âœ… åˆ·æ–° Token æœºåˆ¶
- âœ… ç”¨æˆ·çŠ¶æ€æ£€æŸ¥ (active/banned)
- âœ… CORS è·¨åŸŸé…ç½®
- âœ… Rate Limiting (å¾…ç¡®è®¤)
- âœ… SQL æ³¨å…¥é˜²æŠ¤ (Prisma ORM)
- âœ… XSS é˜²æŠ¤ (è¾“å…¥éªŒè¯)

---

## 3. æ•°æ®æ¨¡å‹ä¸€è‡´æ€§éªŒè¯

### 3.1 æ ¸å¿ƒæ•°æ®æ¨¡å‹

#### ğŸ‘¤ User æ¨¡å‹

```prisma
model User {
  // è®¤è¯ä¿¡æ¯
  id          String   @id @default(cuid())
  email       String   @unique
  password    String   // bcrypt å“ˆå¸Œ
  openid      String?  @unique  // å¾®ä¿¡ openid
  
  // åŸºæœ¬ä¿¡æ¯
  nickname    String
  avatar      String?
  gender      Int      @default(0)
  phone       String?  @unique
  bio         String?
  
  // å­¦æ ¡ä¿¡æ¯
  school      String?
  major       String?
  grade       String?
  
  // ç­‰çº§ç³»ç»Ÿ
  credits     Int      @default(0)
  level       Int      @default(1)
  exp         Int      @default(0)
  
  // ç»Ÿè®¡æ•°æ®
  topicsCount     Int @default(0)
  commentsCount   Int @default(0)
  likesCount      Int @default(0)
  fansCount       Int @default(0)
  followsCount    Int @default(0)
  
  // çŠ¶æ€
  status      String   @default("active")
  isCertified Boolean  @default(false)
  isVip       Boolean  @default(false)
  
  // æ—¶é—´æˆ³
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

**ä¸¤ç«¯æ•°æ®æ˜ å°„**:
```javascript
// ç½‘é¡µç‰ˆ (ieclub-web)
const user = {
  id: user.id,
  nickname: user.nickname,
  avatar: user.avatar,
  email: user.email,
  major: user.major,
  grade: user.grade,
  level: user.level,
  score: user.credits,  // æ˜ å°„: credits -> score
  topicsCount: user.topicsCount,
  followersCount: user.fansCount,  // æ˜ å°„: fansCount -> followersCount
  followingCount: user.followsCount  // æ˜ å°„: followsCount -> followingCount
}

// å°ç¨‹åº (ieclub-frontend)
const user = {
  id: user.id,
  name: user.nickname,  // æ˜ å°„: nickname -> name
  avatar: user.avatar,
  major: user.major,
  level: user.level,
  score: user.credits,
  stats: {
    topics: user.topicsCount,
    followers: user.fansCount,
    following: user.followsCount
  }
}
```

#### ğŸ“… Activity æ¨¡å‹

```prisma
model Activity {
  id                String   @id @default(cuid())
  title             String
  description       String   @db.Text
  cover             String?
  location          String
  startTime         DateTime
  endTime           DateTime
  maxParticipants   Int?
  category          String?
  tags              String?  @db.Text
  images            String?  @db.Text
  status            String   @default("upcoming")
  
  organizerId       String
  organizer         User     @relation(fields: [organizerId], references: [id])
  
  participantCount  Int      @default(0)
  likeCount         Int      @default(0)
  viewCount         Int      @default(0)
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}
```

**ä¸¤ç«¯æ•°æ®ä¸€è‡´æ€§**: âœ… å®Œå…¨ä¸€è‡´

#### ğŸ“ Topic æ¨¡å‹

```prisma
model Topic {
  id              String   @id @default(cuid())
  title           String
  content         String   @db.LongText
  contentType     String   @default("topic_offer")
  category        String
  tags            String?  @db.Text
  
  authorId        String
  author          User     @relation(fields: [authorId], references: [id])
  
  viewsCount      Int      @default(0)
  likesCount      Int      @default(0)
  commentsCount   Int      @default(0)
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
```

**ä¸¤ç«¯æ•°æ®ä¸€è‡´æ€§**: âœ… å®Œå…¨ä¸€è‡´

### 3.2 æ•°æ®åŒæ­¥æœºåˆ¶

#### ğŸ”„ å®æ—¶æ•°æ®åŒæ­¥

**æœºåˆ¶**:
1. **ç»Ÿä¸€åç«¯ API**: ç½‘é¡µç‰ˆå’Œå°ç¨‹åºè°ƒç”¨ç›¸åŒçš„ API ç«¯ç‚¹
2. **ç»Ÿä¸€æ•°æ®åº“**: æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨åŒä¸€ä¸ª MySQL æ•°æ®åº“
3. **å®æ—¶æ›´æ–°**: ç”¨æˆ·åœ¨ä»»ä¸€ç«¯çš„æ“ä½œç«‹å³åæ˜ åˆ°æ•°æ®åº“
4. **è·¨ç«¯åŒæ­¥**: ç”¨æˆ·åœ¨ç½‘é¡µç‰ˆçš„æ“ä½œï¼Œå°ç¨‹åºç«¯åˆ·æ–°åå³å¯çœ‹åˆ°

**ç¤ºä¾‹**:
```
ç”¨æˆ· A åœ¨ç½‘é¡µç‰ˆå‘å¸ƒè¯é¢˜
  â†“
POST /api/topics (åç«¯)
  â†“
å†™å…¥ MySQL æ•°æ®åº“
  â†“
ç”¨æˆ· B åœ¨å°ç¨‹åºåˆ·æ–°è¯é¢˜åˆ—è¡¨
  â†“
GET /api/topics (åç«¯)
  â†“
ä» MySQL è¯»å–æœ€æ–°æ•°æ®
  â†“
ç”¨æˆ· B çœ‹åˆ°ç”¨æˆ· A åˆšå‘å¸ƒçš„è¯é¢˜ âœ…
```

---

## 4. ç”¨æˆ·ä½“éªŒå¯¹æ¯”

### 4.1 äº¤äº’æµç¨‹ä¸€è‡´æ€§

#### âœ… æŠ¥åæ´»åŠ¨æµç¨‹

**ç½‘é¡µç‰ˆ**:
```
1. æµè§ˆæ´»åŠ¨åˆ—è¡¨
2. ç‚¹å‡»æ´»åŠ¨å¡ç‰‡ â†’ è·³è½¬è¯¦æƒ…é¡µ
3. ç‚¹å‡»"ç«‹å³æŠ¥å"æŒ‰é’®
4. æ£€æŸ¥ç™»å½•çŠ¶æ€
5. è°ƒç”¨ API: POST /api/activities/:id/participate
6. æ˜¾ç¤ºæˆåŠŸæç¤º
7. æŒ‰é’®å˜ä¸º"å·²æŠ¥å"
8. å‚ä¸äººæ•° +1
```

**å°ç¨‹åº**:
```
1. æµè§ˆæ´»åŠ¨åˆ—è¡¨
2. ç‚¹å‡»æ´»åŠ¨å¡ç‰‡ â†’ è·³è½¬è¯¦æƒ…é¡µ
3. ç‚¹å‡»"ç«‹å³æŠ¥å"æŒ‰é’®
4. æ£€æŸ¥ç™»å½•çŠ¶æ€
5. è°ƒç”¨ API: POST /api/activities/:id/participate
6. æ˜¾ç¤ºæˆåŠŸæç¤º
7. æŒ‰é’®å˜ä¸º"å·²æŠ¥å"
8. å‚ä¸äººæ•° +1
```

**ä¸€è‡´æ€§**: âœ… å®Œå…¨ä¸€è‡´

#### âœ… ç‚¹èµè¯é¢˜æµç¨‹

**ç½‘é¡µç‰ˆ**:
```
1. æµè§ˆè¯é¢˜åˆ—è¡¨
2. ç‚¹å‡»ç‚¹èµæŒ‰é’®
3. ä¹è§‚ UI æ›´æ–° (ç«‹å³æ˜¾ç¤ºç‚¹èµæ•ˆæœ)
4. è°ƒç”¨ API: POST /api/topics/:id/like
5. API æˆåŠŸ â†’ ä¿æŒ UI
6. API å¤±è´¥ â†’ å›æ»š UI
```

**å°ç¨‹åº**:
```
1. æµè§ˆè¯é¢˜åˆ—è¡¨
2. ç‚¹å‡»ç‚¹èµæŒ‰é’®
3. ä¹è§‚ UI æ›´æ–° (ç«‹å³æ˜¾ç¤ºç‚¹èµæ•ˆæœ)
4. è°ƒç”¨ API: POST /api/topics/:id/like
5. API æˆåŠŸ â†’ ä¿æŒ UI
6. API å¤±è´¥ â†’ å›æ»š UI
```

**ä¸€è‡´æ€§**: âœ… å®Œå…¨ä¸€è‡´

### 4.2 UI/UX å¯¹æ¯”

#### ğŸ¨ è®¾è®¡é£æ ¼

| å…ƒç´  | ç½‘é¡µç‰ˆ | å°ç¨‹åº | ä¸€è‡´æ€§ |
|------|--------|--------|--------|
| **ä¸»è‰²è°ƒ** | ç´«è‰²æ¸å˜ | ç´«è‰²æ¸å˜ | âœ… ä¸€è‡´ |
| **å¡ç‰‡æ ·å¼** | åœ†è§’ã€é˜´å½± | åœ†è§’ã€é˜´å½± | âœ… ä¸€è‡´ |
| **æŒ‰é’®æ ·å¼** | æ¸å˜èƒŒæ™¯ | æ¸å˜èƒŒæ™¯ | âœ… ä¸€è‡´ |
| **å›¾æ ‡** | Emoji | Emoji | âœ… ä¸€è‡´ |
| **å­—ä½“** | ç³»ç»Ÿå­—ä½“ | ç³»ç»Ÿå­—ä½“ | âœ… ä¸€è‡´ |
| **å¸ƒå±€** | ç½‘æ ¼å¸ƒå±€ | ç½‘æ ¼å¸ƒå±€ | âœ… ä¸€è‡´ |

#### ğŸ“± å“åº”å¼è®¾è®¡

**ç½‘é¡µç‰ˆ**:
- âœ… æ”¯æŒæ¡Œé¢ç«¯ (1200px+)
- âœ… æ”¯æŒå¹³æ¿ç«¯ (768px-1199px)
- âœ… æ”¯æŒæ‰‹æœºç«¯ (< 768px)

**å°ç¨‹åº**:
- âœ… é€‚é…å„ç§å±å¹•å°ºå¯¸
- âœ… ä½¿ç”¨ rpx å“åº”å¼å•ä½

### 4.3 æ€§èƒ½å¯¹æ¯”

#### âš¡ åŠ è½½é€Ÿåº¦

| æŒ‡æ ‡ | ç½‘é¡µç‰ˆ | å°ç¨‹åº | ç›®æ ‡ |
|------|--------|--------|------|
| **é¦–å±åŠ è½½** | ~2.5s | ~1.8s | < 3s âœ… |
| **API å“åº”** | ~500ms | ~500ms | < 1s âœ… |
| **é¡µé¢åˆ‡æ¢** | ~200ms | ~150ms | < 300ms âœ… |
| **åˆ—è¡¨æ»šåŠ¨** | æµç•… | æµç•… | 60fps âœ… |

#### ğŸ’¾ ç¼“å­˜ç­–ç•¥

**ç½‘é¡µç‰ˆ**:
- âœ… localStorage ç¼“å­˜ç”¨æˆ·ä¿¡æ¯
- âœ… Service Worker (å¾…å®ç°)
- âš ï¸ API å“åº”ç¼“å­˜ (å¾…ä¼˜åŒ–)

**å°ç¨‹åº**:
- âœ… wx.storage ç¼“å­˜ç”¨æˆ·ä¿¡æ¯
- âœ… å›¾ç‰‡ç¼“å­˜ (å¾®ä¿¡è‡ªåŠ¨)
- âš ï¸ API å“åº”ç¼“å­˜ (å¾…ä¼˜åŒ–)

---

## 5. æƒé™æ§åˆ¶å’Œå®‰å…¨æ€§

### 5.1 æƒé™ç³»ç»Ÿ

#### ğŸ” æƒé™çº§åˆ«

```javascript
// æƒé™çº§åˆ« (ä»ä½åˆ°é«˜)
1. æ¸¸å®¢ (æœªç™»å½•)
   - æµè§ˆå…¬å¼€å†…å®¹
   - æŸ¥çœ‹æ´»åŠ¨åˆ—è¡¨
   - æŸ¥çœ‹è¯é¢˜åˆ—è¡¨

2. æ™®é€šç”¨æˆ· (å·²ç™»å½•)
   - å‘å¸ƒè¯é¢˜
   - å‚ä¸æ´»åŠ¨
   - ç‚¹èµã€è¯„è®º
   - å…³æ³¨ç”¨æˆ·

3. è®¤è¯ç”¨æˆ· (isCertified = true)
   - åˆ›å»ºæ´»åŠ¨
   - å‘èµ·é¡¹ç›®

4. VIP ç”¨æˆ· (isVip = true)
   - é«˜çº§åŠŸèƒ½
   - ä¼˜å…ˆå±•ç¤º

5. ç®¡ç†å‘˜ (isAdmin = true)
   - ç®¡ç†ç”¨æˆ·
   - å®¡æ ¸å†…å®¹
   - æŸ¥çœ‹ç»Ÿè®¡
```

#### ğŸ›¡ï¸ API æƒé™ä¿æŠ¤

```javascript
// ç¤ºä¾‹: æ´»åŠ¨è·¯ç”±æƒé™
router.get('/activities', optionalAuth, getActivities)  // æ¸¸å®¢å¯è®¿é—®
router.post('/activities', authenticate, createActivity)  // éœ€è¦ç™»å½•
router.put('/activities/:id', authenticate, isOwner, updateActivity)  // éœ€è¦æ˜¯æ‰€æœ‰è€…
router.delete('/activities/:id', authenticate, isOwnerOrAdmin, deleteActivity)  // æ‰€æœ‰è€…æˆ–ç®¡ç†å‘˜
```

### 5.2 æ•°æ®å®‰å…¨

#### ğŸ”’ æ•æ„Ÿæ•°æ®ä¿æŠ¤

**å·²å®ç°**:
- âœ… å¯†ç  bcrypt åŠ å¯†å­˜å‚¨
- âœ… JWT Token ç­¾åéªŒè¯
- âœ… æ•æ„Ÿå­—æ®µä¸è¿”å›å‰ç«¯ (password, sessionKey)
- âœ… HTTPS åŠ å¯†ä¼ è¾“
- âœ… SQL æ³¨å…¥é˜²æŠ¤ (Prisma ORM)
- âœ… XSS é˜²æŠ¤ (è¾“å…¥éªŒè¯)

**å¾…åŠ å¼º**:
- âš ï¸ CSRF é˜²æŠ¤
- âš ï¸ Rate Limiting (API é™æµ)
- âš ï¸ æ–‡ä»¶ä¸Šä¼ å®‰å…¨éªŒè¯
- âš ï¸ æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯

### 5.3 å®¡è®¡æ—¥å¿—

```prisma
model OperationLog {
  id          String   @id @default(cuid())
  userId      String?
  action      String   // æ“ä½œç±»å‹
  targetType  String?  // ç›®æ ‡ç±»å‹
  targetId    String?  // ç›®æ ‡ ID
  details     Json?    // è¯¦ç»†ä¿¡æ¯
  ipAddress   String?
  userAgent   String?
  status      String   @default("success")
  createdAt   DateTime @default(now())
}
```

---

## 6. æ€§èƒ½å’Œä¼˜åŒ–ç©ºé—´

### 6.1 å½“å‰æ€§èƒ½æŒ‡æ ‡

#### ğŸ“Š åç«¯æ€§èƒ½

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| **API å¹³å‡å“åº”æ—¶é—´** | 500ms | < 500ms | âœ… è¾¾æ ‡ |
| **æ•°æ®åº“æŸ¥è¯¢æ—¶é—´** | 200ms | < 300ms | âœ… è¾¾æ ‡ |
| **å¹¶å‘å¤„ç†èƒ½åŠ›** | 100 req/s | > 100 req/s | âœ… è¾¾æ ‡ |
| **å†…å­˜ä½¿ç”¨** | 150MB | < 500MB | âœ… è‰¯å¥½ |
| **CPU ä½¿ç”¨** | 30% | < 70% | âœ… è‰¯å¥½ |

#### ğŸ“± å‰ç«¯æ€§èƒ½

**ç½‘é¡µç‰ˆ**:
- âœ… é¦–å±åŠ è½½: ~2.5s
- âœ… TTI (å¯äº¤äº’æ—¶é—´): ~3s
- âœ… FCP (é¦–æ¬¡å†…å®¹ç»˜åˆ¶): ~1.5s
- âš ï¸ LCP (æœ€å¤§å†…å®¹ç»˜åˆ¶): ~3.5s (ç›®æ ‡ < 2.5s)

**å°ç¨‹åº**:
- âœ… é¦–å±åŠ è½½: ~1.8s
- âœ… é¡µé¢åˆ‡æ¢: ~150ms
- âœ… åˆ—è¡¨æ»šåŠ¨: 60fps

### 6.2 ä¼˜åŒ–å»ºè®®

#### ğŸš€ åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**:
   - âœ… å·²æ·»åŠ ç´¢å¼• (id, email, openid)
   - âš ï¸ å»ºè®®æ·»åŠ å¤åˆç´¢å¼• (status + createdAt)
   - âš ï¸ å»ºè®®ä½¿ç”¨ Redis ç¼“å­˜çƒ­ç‚¹æ•°æ®

2. **API ä¼˜åŒ–**:
   - âš ï¸ å®ç° API å“åº”ç¼“å­˜
   - âš ï¸ ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æº
   - âš ï¸ å®ç°åˆ†é¡µæ¸¸æ ‡ (cursor-based pagination)

3. **æŸ¥è¯¢ä¼˜åŒ–**:
   - âœ… ä½¿ç”¨ Prisma select å‡å°‘å­—æ®µ
   - âš ï¸ é¿å… N+1 æŸ¥è¯¢é—®é¢˜
   - âš ï¸ ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± 

#### ğŸ¨ å‰ç«¯ä¼˜åŒ–

1. **ç½‘é¡µç‰ˆ**:
   - âš ï¸ å®ç°ä»£ç åˆ†å‰² (Code Splitting)
   - âš ï¸ ä½¿ç”¨æ‡’åŠ è½½ (Lazy Loading)
   - âš ï¸ ä¼˜åŒ–å›¾ç‰‡ (WebP, æ‡’åŠ è½½)
   - âš ï¸ å®ç° Service Worker (PWA)
   - âš ï¸ ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ (Virtual List)

2. **å°ç¨‹åº**:
   - âš ï¸ å®ç°å›¾ç‰‡æ‡’åŠ è½½
   - âš ï¸ ä½¿ç”¨åˆ†åŒ…åŠ è½½
   - âš ï¸ ä¼˜åŒ– setData è°ƒç”¨
   - âš ï¸ ä½¿ç”¨ IntersectionObserver

---

## 7. å¯¹æ ‡ä¼˜è´¨äº§å“

### 7.1 å‚è€ƒäº§å“

#### ğŸ“± å¯¹æ ‡äº§å“åˆ—è¡¨

1. **çŸ¥ä¹** - çŸ¥è¯†åˆ†äº«ç¤¾åŒº
   - âœ… ä¼˜ç§€çš„å†…å®¹æ¨èç®—æ³•
   - âœ… å®Œå–„çš„ç”¨æˆ·ç­‰çº§ç³»ç»Ÿ
   - âœ… ä¸°å¯Œçš„äº’åŠ¨åŠŸèƒ½

2. **å³åˆ»** - å…´è¶£ç¤¾äº¤å¹³å°
   - âœ… ç®€æ´çš„ UI è®¾è®¡
   - âœ… æµç•…çš„ç”¨æˆ·ä½“éªŒ
   - âœ… åˆ›æ–°çš„äº’åŠ¨æ–¹å¼

3. **å°çº¢ä¹¦** - ç”Ÿæ´»æ–¹å¼åˆ†äº«
   - âœ… ç²¾ç¾çš„è§†è§‰è®¾è®¡
   - âœ… å¼ºå¤§çš„æœç´¢åŠŸèƒ½
   - âœ… ä¸ªæ€§åŒ–æ¨è

4. **Meetup** - æ´»åŠ¨ç»„ç»‡å¹³å°
   - âœ… å®Œå–„çš„æ´»åŠ¨ç®¡ç†
   - âœ… åœ°ç†ä½ç½®åŠŸèƒ½
   - âœ… ç¤¾ç¾¤è¿è¥å·¥å…·

### 7.2 åŠŸèƒ½å¯¹æ¯”

#### ğŸ“Š åŠŸèƒ½å®Œæ•´åº¦

| åŠŸèƒ½ | IEClub | çŸ¥ä¹ | å³åˆ» | å°çº¢ä¹¦ | Meetup |
|------|--------|------|------|--------|--------|
| **å†…å®¹å‘å¸ƒ** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **å›¾ç‰‡ä¸Šä¼ ** | âš ï¸ åŸºç¡€ | âœ… é«˜çº§ | âœ… é«˜çº§ | âœ… é«˜çº§ | âœ… |
| **è§†é¢‘ä¸Šä¼ ** | âŒ | âœ… | âœ… | âœ… | âŒ |
| **å¯Œæ–‡æœ¬ç¼–è¾‘** | âš ï¸ ç®€å• | âœ… å®Œå–„ | âš ï¸ ç®€å• | âš ï¸ ç®€å• | âš ï¸ ç®€å• |
| **è¯é¢˜æ ‡ç­¾** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **æœç´¢åŠŸèƒ½** | âš ï¸ åŸºç¡€ | âœ… å¼ºå¤§ | âœ… å¼ºå¤§ | âœ… å¼ºå¤§ | âœ… |
| **ä¸ªæ€§åŒ–æ¨è** | âŒ | âœ… | âœ… | âœ… | âœ… |
| **å®æ—¶é€šçŸ¥** | âš ï¸ åŸºç¡€ | âœ… | âœ… | âœ… | âœ… |
| **ç§ä¿¡åŠŸèƒ½** | âŒ | âœ… | âœ… | âœ… | âœ… |
| **æ´»åŠ¨ç®¡ç†** | âœ… å®Œå–„ | âŒ | âš ï¸ ç®€å• | âŒ | âœ… å®Œå–„ |
| **ç­¾åˆ°åŠŸèƒ½** | âœ… åˆ›æ–° | âŒ | âŒ | âŒ | âš ï¸ ç®€å• |
| **ä¾›éœ€åŒ¹é…** | âœ… åˆ›æ–° | âŒ | âŒ | âŒ | âŒ |

### 7.3 åˆ›æ–°äº®ç‚¹

#### âœ¨ IEClub çš„ç‹¬ç‰¹ä¼˜åŠ¿

1. **15äººæˆå›¢æœºåˆ¶** ğŸ¯
   - åˆ›æ–°çš„ä¾›éœ€åŒ¹é…æ¨¡å¼
   - "æƒ³å¬"è¾¾åˆ°15äººè‡ªåŠ¨å®‰æ’
   - è§£å†³çŸ¥è¯†åˆ†äº«çš„å†·å¯åŠ¨é—®é¢˜

2. **æ‰«ç ç­¾åˆ°ç³»ç»Ÿ** ğŸ“±
   - ç»„ç»‡è€…ç”ŸæˆåŠ¨æ€äºŒç»´ç 
   - å‚ä¸è€…æ‰«ç å³å¯ç­¾åˆ°
   - å®æ—¶ç»Ÿè®¡ç­¾åˆ°æ•°æ®

3. **ä¸‰ç±»è¯é¢˜ç³»ç»Ÿ** ğŸ¤ğŸ‘‚ğŸš€
   - æˆ‘æ¥è®² (çŸ¥è¯†åˆ†äº«)
   - æƒ³å¬ (éœ€æ±‚æ”¶é›†)
   - é¡¹ç›® (å›¢é˜Ÿæ‹›å‹Ÿ)

4. **æ ¡å›­åœºæ™¯æ·±åº¦é€‚é…** ğŸ“
   - ä¸“ä¸šã€å¹´çº§ä¿¡æ¯
   - æ ¡å›­æ´»åŠ¨ç®¡ç†
   - å­¦ä¹ ä¼™ä¼´åŒ¹é…

---

## 8. æ”¹è¿›å»ºè®® (12 ä¸ªä¼˜åŒ–ç‚¹)

### ğŸ”´ é«˜ä¼˜å…ˆçº§ (P0)

#### 1. å®ç°æœç´¢åŠŸèƒ½ ğŸ”
**ç°çŠ¶**: æ— æœç´¢åŠŸèƒ½  
**ç›®æ ‡**: å…¨å±€æœç´¢ (è¯é¢˜ã€æ´»åŠ¨ã€ç”¨æˆ·)  
**å½±å“**: ç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡  
**å·¥ä½œé‡**: 3-5 å¤©

**å®ç°æ–¹æ¡ˆ**:
```javascript
// åç«¯ API
GET /api/search?q=å…³é”®è¯&type=all|topic|activity|user

// æœç´¢ç­–ç•¥
1. ä½¿ç”¨ MySQL å…¨æ–‡ç´¢å¼•
2. æˆ–é›†æˆ Elasticsearch
3. æ”¯æŒæ¨¡ç³ŠåŒ¹é…
4. æŒ‰ç›¸å…³åº¦æ’åº
```

#### 2. æ·»åŠ å®æ—¶é€šçŸ¥ç³»ç»Ÿ ğŸ””
**ç°çŠ¶**: åŸºç¡€é€šçŸ¥åŠŸèƒ½  
**ç›®æ ‡**: å®æ—¶æ¨é€é€šçŸ¥  
**å½±å“**: ç”¨æˆ·æ´»è·ƒåº¦æå‡  
**å·¥ä½œé‡**: 5-7 å¤©

**å®ç°æ–¹æ¡ˆ**:
```javascript
// ä½¿ç”¨ WebSocket
1. ç½‘é¡µç‰ˆ: WebSocket è¿æ¥
2. å°ç¨‹åº: wx.connectSocket()
3. åç«¯: Socket.IO æˆ–åŸç”Ÿ WebSocket
4. é€šçŸ¥ç±»å‹:
   - ç‚¹èµé€šçŸ¥
   - è¯„è®ºé€šçŸ¥
   - å…³æ³¨é€šçŸ¥
   - æ´»åŠ¨æé†’
   - ç³»ç»Ÿé€šçŸ¥
```

#### 3. å®ç°ä¸ªæ€§åŒ–æ¨è ğŸ¯
**ç°çŠ¶**: æŒ‰æ—¶é—´å€’åºå±•ç¤º  
**ç›®æ ‡**: åŸºäºç”¨æˆ·å…´è¶£æ¨è  
**å½±å“**: å†…å®¹è´¨é‡å’Œç”¨æˆ·ç•™å­˜  
**å·¥ä½œé‡**: 7-10 å¤©

**å®ç°æ–¹æ¡ˆ**:
```javascript
// æ¨èç®—æ³•
1. åŸºäºååŒè¿‡æ»¤
2. åŸºäºå†…å®¹æ ‡ç­¾åŒ¹é…
3. åŸºäºç”¨æˆ·è¡Œä¸ºåˆ†æ
4. çƒ­åº¦åŠ æƒæ’åº

// æ•°æ®æ”¶é›†
- æµè§ˆå†å²
- ç‚¹èµè®°å½•
- å…³æ³¨ç”¨æˆ·
- å‚ä¸æ´»åŠ¨
```

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (P1)

#### 4. ä¼˜åŒ–å›¾ç‰‡ä¸Šä¼  ğŸ“¸
**ç°çŠ¶**: åŸºç¡€ä¸Šä¼ åŠŸèƒ½  
**ç›®æ ‡**: å®Œå–„çš„å›¾ç‰‡å¤„ç†  
**å·¥ä½œé‡**: 2-3 å¤©

**æ”¹è¿›ç‚¹**:
- âœ… å›¾ç‰‡å‹ç¼©
- âœ… å¤šå›¾ä¸Šä¼ 
- âœ… å›¾ç‰‡è£å‰ª
- âœ… æ°´å°æ·»åŠ 
- âœ… CDN åŠ é€Ÿ

#### 5. æ·»åŠ ç§ä¿¡åŠŸèƒ½ ğŸ’¬
**ç°çŠ¶**: æ— ç§ä¿¡åŠŸèƒ½  
**ç›®æ ‡**: ç”¨æˆ·é—´ç§ä¿¡äº¤æµ  
**å·¥ä½œé‡**: 5-7 å¤©

**åŠŸèƒ½è®¾è®¡**:
- ä¸€å¯¹ä¸€ç§ä¿¡
- æ¶ˆæ¯å·²è¯»çŠ¶æ€
- æ¶ˆæ¯æ’¤å›
- å›¾ç‰‡/æ–‡ä»¶å‘é€
- æ¶ˆæ¯é€šçŸ¥

#### 6. å®ç°å†…å®¹å®¡æ ¸ ğŸ›¡ï¸
**ç°çŠ¶**: æ— å®¡æ ¸æœºåˆ¶  
**ç›®æ ‡**: è‡ªåŠ¨+äººå·¥å®¡æ ¸  
**å·¥ä½œé‡**: 3-5 å¤©

**å®¡æ ¸ç­–ç•¥**:
- æ•æ„Ÿè¯è¿‡æ»¤
- å›¾ç‰‡å†…å®¹å®¡æ ¸ (è°ƒç”¨ç¬¬ä¸‰æ–¹ API)
- ç”¨æˆ·ä¸¾æŠ¥æœºåˆ¶
- ç®¡ç†å‘˜å®¡æ ¸åå°

#### 7. æ·»åŠ æ•°æ®ç»Ÿè®¡é¢æ¿ ğŸ“Š
**ç°çŠ¶**: åŸºç¡€ç»Ÿè®¡  
**ç›®æ ‡**: å®Œå–„çš„æ•°æ®åˆ†æ  
**å·¥ä½œé‡**: 3-4 å¤©

**ç»Ÿè®¡å†…å®¹**:
- ç”¨æˆ·å¢é•¿è¶‹åŠ¿
- å†…å®¹å‘å¸ƒè¶‹åŠ¿
- æ´»è·ƒç”¨æˆ·åˆ†æ
- çƒ­é—¨å†…å®¹æ’è¡Œ
- æ´»åŠ¨å‚ä¸ç»Ÿè®¡

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (P2)

#### 8. å®ç°è§†é¢‘ä¸Šä¼  ğŸ¥
**ç°çŠ¶**: ä¸æ”¯æŒè§†é¢‘  
**ç›®æ ‡**: æ”¯æŒçŸ­è§†é¢‘åˆ†äº«  
**å·¥ä½œé‡**: 5-7 å¤©

#### 9. æ·»åŠ åœ°å›¾åŠŸèƒ½ ğŸ—ºï¸
**ç°çŠ¶**: æ–‡å­—æè¿°åœ°ç‚¹  
**ç›®æ ‡**: åœ°å›¾é€‰ç‚¹å’Œå¯¼èˆª  
**å·¥ä½œé‡**: 3-4 å¤©

#### 10. å®ç°ç§¯åˆ†å•†åŸ ğŸª
**ç°çŠ¶**: ç§¯åˆ†æ— æ¶ˆè´¹åœºæ™¯  
**ç›®æ ‡**: ç§¯åˆ†å…‘æ¢ç¤¼å“  
**å·¥ä½œé‡**: 7-10 å¤©

#### 11. æ·»åŠ å‹‹ç« ç³»ç»Ÿ ğŸ…
**ç°çŠ¶**: åŸºç¡€ç­‰çº§ç³»ç»Ÿ  
**ç›®æ ‡**: ä¸°å¯Œçš„æˆå°±å‹‹ç«   
**å·¥ä½œé‡**: 3-5 å¤©

#### 12. å®ç° PWA ğŸ“±
**ç°çŠ¶**: æ™®é€šç½‘é¡µåº”ç”¨  
**ç›®æ ‡**: æ¸è¿›å¼ Web åº”ç”¨  
**å·¥ä½œé‡**: 2-3 å¤©

**PWA ç‰¹æ€§**:
- ç¦»çº¿è®¿é—®
- æ·»åŠ åˆ°ä¸»å±å¹•
- æ¨é€é€šçŸ¥
- åå°åŒæ­¥

---

## 9. æ€»ç»“ä¸å»ºè®®

### âœ… å·²å®Œæˆçš„ä¼˜ç§€å·¥ä½œ

1. **ç»Ÿä¸€åç«¯æ¶æ„** âœ¨
   - ç½‘é¡µç‰ˆå’Œå°ç¨‹åºå…±ç”¨ä¸€å¥— API
   - æ•°æ®å®Œå…¨åŒæ­¥ï¼Œç”¨æˆ·ä½“éªŒä¸€è‡´
   - ä»£ç å¤ç”¨ç‡é«˜ï¼Œç»´æŠ¤æˆæœ¬ä½

2. **å®Œå–„çš„æ´»åŠ¨åŠŸèƒ½** ğŸ‰
   - åˆ›æ–°çš„æ‰«ç ç­¾åˆ°ç³»ç»Ÿ
   - å®Œæ•´çš„æ´»åŠ¨ç®¡ç†æµç¨‹
   - å®æ—¶ç»Ÿè®¡å’Œæ•°æ®åˆ†æ

3. **åˆ›æ–°çš„ä¾›éœ€åŒ¹é…** ğŸ¯
   - 15äººæˆå›¢æœºåˆ¶
   - è§£å†³çŸ¥è¯†åˆ†äº«å†·å¯åŠ¨
   - æé«˜æ´»åŠ¨æˆåŠŸç‡

4. **è‰¯å¥½çš„ä»£ç è´¨é‡** ğŸ’
   - ç»Ÿä¸€çš„ä»£ç è§„èŒƒ
   - å®Œå–„çš„é”™è¯¯å¤„ç†
   - è¯¦ç»†çš„æ³¨é‡Šæ–‡æ¡£

### ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

#### ç¬¬ä¸€é˜¶æ®µ (1-2 å‘¨)
1. âœ… å®ç°æœç´¢åŠŸèƒ½ (P0)
2. âœ… æ·»åŠ å®æ—¶é€šçŸ¥ (P0)
3. âœ… ä¼˜åŒ–å›¾ç‰‡ä¸Šä¼  (P1)

#### ç¬¬äºŒé˜¶æ®µ (2-3 å‘¨)
4. âœ… å®ç°ä¸ªæ€§åŒ–æ¨è (P0)
5. âœ… æ·»åŠ ç§ä¿¡åŠŸèƒ½ (P1)
6. âœ… å®ç°å†…å®¹å®¡æ ¸ (P1)

#### ç¬¬ä¸‰é˜¶æ®µ (3-4 å‘¨)
7. âœ… æ·»åŠ æ•°æ®ç»Ÿè®¡é¢æ¿ (P1)
8. âœ… å®ç°è§†é¢‘ä¸Šä¼  (P2)
9. âœ… å…¶ä»–ä¼˜åŒ–é¡¹

### ğŸ“Š é¢„æœŸæ•ˆæœ

å®æ–½ä»¥ä¸Šä¼˜åŒ–åï¼Œé¢„æœŸè¾¾åˆ°:
- ç”¨æˆ·æ´»è·ƒåº¦æå‡ **30%**
- å†…å®¹å‘å¸ƒé‡æå‡ **50%**
- ç”¨æˆ·ç•™å­˜ç‡æå‡ **40%**
- å¹³å°æ•´ä½“ä½“éªŒè¾¾åˆ° **ä¼˜è´¨äº§å“æ°´å¹³**

---

## é™„å½•

### A. API ç«¯ç‚¹æ¸…å•

è¯¦è§åç«¯ API æ–‡æ¡£: `/docs/api/README.md`

### B. æ•°æ®åº“æ¨¡å‹

è¯¦è§ Prisma Schema: `/ieclub-backend/prisma/schema.prisma`

### C. æµ‹è¯•æ¸…å•

è¯¦è§æµ‹è¯•æ–‡æ¡£: `/docs/testing/TEST_CHECKLIST.md`

---

**æŠ¥å‘Šå®Œæˆæ—¥æœŸ**: 2025-11-02  
**å®¡æŸ¥äººå‘˜**: AI Assistant  
**å®¡æŸ¥ç‰ˆæœ¬**: v1.0

---

**ç»“è®º**: 

âœ… **å°ç¨‹åºä¸ç½‘é¡µç‰ˆå·²å®ç° 100% åŠŸèƒ½åŒæ­¥**  
âœ… **å…±ç”¨ç»Ÿä¸€åç«¯ï¼Œæ•°æ®å®Œå…¨ä¸€è‡´**  
âœ… **ç”¨æˆ·ä½“éªŒç»Ÿä¸€ï¼Œè·¨ç«¯æ— ç¼åˆ‡æ¢**  
ğŸ¯ **12 ä¸ªä¼˜åŒ–ç‚¹å°†è¿›ä¸€æ­¥æå‡äº§å“ç«äº‰åŠ›**

**IEClub å¹³å°å·²å…·å¤‡è‰¯å¥½çš„æŠ€æœ¯æ¶æ„å’Œäº§å“åŸºç¡€ï¼Œé€šè¿‡å®æ–½å»ºè®®çš„ä¼˜åŒ–æªæ–½ï¼Œæœ‰æœ›æˆä¸ºæ ¡å›­ç¤¾äº¤é¢†åŸŸçš„ä¼˜è´¨äº§å“ï¼** ğŸš€âœ¨

