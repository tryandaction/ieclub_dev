# Web前端测试指南

> 📅 **日期**: 2025-11-05  
> 🎯 **目的**: 测试Web前端的注册、登录等核心功能  
> ⏱️ **预计时间**: 30分钟

---

## 🚀 快速启动

### 步骤 1: 安装依赖（首次运行）

```powershell
cd ieclub-web
npm install
```

**预计时间**: 2-3分钟

### 步骤 2: 配置环境变量

```powershell
# 复制测试环境配置
Copy-Item env.staging.template .env.staging
```

配置内容已经正确，指向测试环境：
```env
VITE_API_BASE_URL=https://test.ieclub.online/api
```

### 步骤 3: 启动开发服务器

```powershell
npm run dev
```

**访问**: http://localhost:5173

---

## ✅ 测试清单

### 1. 用户注册流程

#### 测试步骤:

1. **访问注册页面**
   - 点击"注册"按钮或访问 `/register`

2. **填写注册信息**
   - 邮箱: 使用你的真实邮箱（例如 `test@qq.com`）
   - 昵称: 任意昵称
   - 密码: 至少8位，包含大小写字母和数字（例如 `Test123456`）

3. **获取验证码**
   - 点击"发送验证码"按钮
   - 等待邮件（可能需要1-2分钟）
   - 检查邮箱（包括垃圾邮件文件夹）

4. **输入验证码并提交**
   - 输入收到的6位验证码
   - 点击"注册"按钮

5. **验证结果**
   - [ ] 注册成功提示
   - [ ] 自动跳转到首页或个人中心
   - [ ] 显示用户信息（昵称、头像）

#### 可能的问题和解决方案:

**问题1: 点击发送验证码后报错**
- 检查浏览器控制台的错误信息
- 可能的原因：
  - 网络问题
  - API地址配置错误
  - 后端服务未运行

**解决方案**:
```powershell
# 检查后端服务状态
ssh root@ieclub.online "pm2 status"

# 查看后端日志
ssh root@ieclub.online "pm2 logs staging-backend --lines 50"
```

**问题2: 没有收到验证码邮件**
- 检查垃圾邮件文件夹
- 确认邮箱地址输入正确
- 等待2-3分钟（邮件可能延迟）

**问题3: 验证码提示错误或已过期**
- 验证码有效期10分钟
- 确认输入的验证码正确
- 如已过期，重新发送

### 2. 用户登录流程

#### 测试步骤:

1. **退出登录**（如果已登录）
   - 点击个人中心
   - 点击"退出登录"

2. **访问登录页面**
   - 点击"登录"按钮或访问 `/login`

3. **输入登录信息**
   - 邮箱: 刚才注册的邮箱
   - 密码: 注册时设置的密码

4. **提交登录**
   - 点击"登录"按钮

5. **验证结果**
   - [ ] 登录成功提示
   - [ ] 跳转到首页
   - [ ] 右上角显示用户信息
   - [ ] 可以访问个人中心

#### 可能的问题和解决方案:

**问题1: 提示"邮箱或密码错误"**
- 确认邮箱地址正确
- 确认密码正确（区分大小写）
- 如果忘记密码，使用"忘记密码"功能

**问题2: 登录后页面空白**
- 检查浏览器控制台错误
- 清除浏览器缓存
- 刷新页面

### 3. 个人中心功能

#### 测试步骤:

1. **访问个人中心**
   - 登录后点击右上角头像
   - 或访问 `/profile`

2. **查看个人信息**
   - [ ] 显示头像
   - [ ] 显示昵称
   - [ ] 显示邮箱
   - [ ] 显示等级、积分等信息

3. **编辑资料**
   - 点击"编辑资料"
   - 修改昵称或个人简介
   - 保存修改

4. **验证结果**
   - [ ] 修改成功提示
   - [ ] 信息已更新

### 4. 活动功能

#### 测试步骤:

1. **访问活动列表**
   - 点击"活动"标签
   - 或访问 `/activities`

2. **浏览活动**
   - [ ] 显示活动列表
   - [ ] 可以滚动加载更多

3. **查看活动详情**
   - 点击任意活动
   - 查看活动详细信息

4. **活动操作**（如果有活动）
   - [ ] 点赞活动
   - [ ] 评论活动
   - [ ] 报名活动

### 5. 话题/社区功能

#### 测试步骤:

1. **访问社区/广场**
   - 点击"社区"或"广场"标签

2. **浏览话题**
   - [ ] 显示话题列表
   - [ ] 可以切换分类

3. **发布话题**（可选）
   - 点击"发布"按钮
   - 输入标题和内容
   - 提交发布

4. **话题互动**
   - [ ] 点赞话题
   - [ ] 评论话题
   - [ ] 收藏话题

---

## 🐛 常见问题排查

### 前端报错

**问题**: 页面显示错误信息

**排查步骤**:
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签的错误信息
3. 查看 Network 标签的API请求
   - 红色的请求表示失败
   - 点击查看详细信息

**常见错误**:

| 错误代码 | 含义 | 解决方案 |
|---------|------|---------|
| 404 | API不存在 | 检查API地址配置 |
| 500 | 服务器错误 | 查看后端日志 |
| 401 | 未登录 | 重新登录 |
| 429 | 请求过于频繁 | 等待一分钟后重试 |

### API请求失败

**问题**: 请求后端API失败

**排查步骤**:
```powershell
# 1. 检查后端服务状态
ssh root@ieclub.online "pm2 status"

# 2. 测试API连通性
curl https://test.ieclub.online/api/health

# 3. 查看后端日志
ssh root@ieclub.online "pm2 logs staging-backend"
```

### 页面加载慢

**可能原因**:
1. 网络问题
2. 后端响应慢
3. 图片加载慢

**解决方案**:
1. 检查网络连接
2. 查看Network标签，找出慢的请求
3. 考虑使用CDN加速图片

---

## 📊 测试结果记录

### 注册功能测试

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 访问注册页面 | ⏳ |  |
| 输入邮箱 | ⏳ |  |
| 发送验证码 | ⏳ |  |
| 接收验证码邮件 | ⏳ |  |
| 输入验证码 | ⏳ |  |
| 设置密码 | ⏳ |  |
| 提交注册 | ⏳ |  |
| 注册成功跳转 | ⏳ |  |

### 登录功能测试

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 访问登录页面 | ⏳ |  |
| 输入邮箱密码 | ⏳ |  |
| 提交登录 | ⏳ |  |
| 登录成功跳转 | ⏳ |  |
| 显示用户信息 | ⏳ |  |

### 其他功能测试

| 功能模块 | 状态 | 备注 |
|---------|------|------|
| 个人中心 | ⏳ |  |
| 编辑资料 | ⏳ |  |
| 活动列表 | ⏳ |  |
| 活动详情 | ⏳ |  |
| 社区/广场 | ⏳ |  |
| 发布话题 | ⏳ |  |

---

## 🎯 测试完成标准

完成以下测试后，可以认为Web前端基本功能正常：

- [x] 后端服务运行正常
- [ ] 成功完成用户注册
- [ ] 成功登录账号
- [ ] 个人中心显示正常
- [ ] 活动列表可以访问
- [ ] 无明显的错误提示

---

## 📝 测试报告模板

测试完成后，可以记录以下信息：

```
## Web前端测试报告

**测试时间**: 2025-11-05
**测试人员**: 
**测试环境**: https://localhost:5173 → https://test.ieclub.online/api

### 测试结果

**注册功能**: ✅/❌
- 邮箱验证码发送：
- 注册提交：
- 页面跳转：

**登录功能**: ✅/❌
- 登录验证：
- Token获取：
- 页面跳转：

**其他功能**: ✅/❌
- 个人中心：
- 活动列表：
- 社区功能：

### 发现的问题

1. 

### 建议

1. 
```

---

## 🔗 相关资源

- **后端API文档**: 查看 `docs/API.md`
- **测试脚本**: `python3 test-registration-flow.py`
- **后端日志**: `ssh root@ieclub.online "pm2 logs staging-backend"`
- **健康检查**: https://test.ieclub.online/api/health

---

**准备好了吗？开始测试吧！** 🚀

如果遇到问题，随时查看本文档的"常见问题排查"部分。

