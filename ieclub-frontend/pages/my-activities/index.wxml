<!--pages/my-activities/index.wxml-->
<view class="my-activities-page">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-content">
      <view class="header-title">
        <text class="title-icon">ğŸ‰</text>
        <text class="title-text">æˆ‘çš„æ´»åŠ¨</text>
      </view>
      
      <!-- Tabåˆ‡æ¢ -->
      <view class="tabs">
        <view 
          wx:for="{{tabs}}"
          wx:key="*this"
          class="tab-item {{currentTab === index ? 'active' : ''}}"
          bindtap="switchTab"
          data-index="{{index}}"
        >
          <text class="tab-text">{{item}}</text>
          <view wx:if="{{currentTab === index}}" class="tab-indicator"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view class="activities-container">
    <!-- åŠ è½½ä¸­éª¨æ¶å± -->
    <view wx:if="{{loading && activities.length === 0}}" class="skeleton-list">
      <view class="skeleton-item" wx:for="{{[1,2,3]}}" wx:key="*this">
        <view class="skeleton-cover"></view>
        <view class="skeleton-content">
          <view class="skeleton-title"></view>
          <view class="skeleton-text"></view>
          <view class="skeleton-text"></view>
        </view>
      </view>
    </view>

    <!-- æ´»åŠ¨åˆ—è¡¨ -->
    <view wx:if="{{!isEmpty && activities.length > 0}}" class="activity-list">
      <view 
        class="activity-card"
        wx:for="{{activities}}"
        wx:key="id"
        bindtap="goToActivityDetail"
        data-id="{{item.id}}"
        hover-class="activity-card-hover"
      >
        <!-- æ´»åŠ¨å°é¢ -->
        <view class="activity-cover">
          <image 
            wx:if="{{item.cover}}"
            class="cover-image" 
            src="{{item.cover}}"
            mode="aspectFill"
          />
          <view wx:else class="cover-placeholder">
            <text class="placeholder-icon">ğŸŠ</text>
          </view>
          
          <!-- çŠ¶æ€æ ‡ç­¾ -->
          <view class="status-badge status-{{item.status}}">
            <text>{{item.statusText}}</text>
          </view>
        </view>
        
        <!-- æ´»åŠ¨ä¿¡æ¯ -->
        <view class="activity-info">
          <!-- æ ‡é¢˜ -->
          <view class="activity-title">{{item.title}}</view>
          
          <!-- æ—¶é—´åœ°ç‚¹ -->
          <view class="activity-meta">
            <view class="meta-item">
              <text class="meta-icon">â°</text>
              <text class="meta-text">{{item.timeText}}</text>
            </view>
            <view class="meta-item" wx:if="{{item.location}}">
              <text class="meta-icon">ğŸ“</text>
              <text class="meta-text">{{item.location}}</text>
            </view>
          </view>
          
          <!-- åº•éƒ¨ä¿¡æ¯ -->
          <view class="activity-footer">
            <view class="category-badge">
              <text>{{item.categoryName}}</text>
            </view>
            <view class="participant-count">
              <text class="count-icon">ğŸ‘¥</text>
              <text class="count-text">{{item.participantText}}</text>
            </view>
          </view>
          
          <!-- å‚ä¸çŠ¶æ€ï¼ˆä»…"æˆ‘å‚åŠ çš„"æ˜¾ç¤ºï¼‰ -->
          <view wx:if="{{currentTab === 0 && item.participationStatus}}" class="participation-status">
            <view wx:if="{{item.checkedIn}}" class="status-tag checked-in">
              <text class="tag-icon">âœ“</text>
              <text class="tag-text">å·²ç­¾åˆ°</text>
            </view>
            <view wx:else class="status-tag pending">
              <text class="tag-icon">â³</text>
              <text class="tag-text">{{item.participationStatus === 'confirmed' ? 'å·²æŠ¥å' : 'å¾…ç¡®è®¤'}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{isEmpty && !loading}}" class="empty-state">
      <text class="empty-icon">{{currentTab === 0 ? 'ğŸª' : 'ğŸ­'}}</text>
      <text class="empty-title">
        {{currentTab === 0 ? 'è¿˜æ²¡æœ‰å‚åŠ ä»»ä½•æ´»åŠ¨' : 'è¿˜æ²¡æœ‰ç»„ç»‡æ´»åŠ¨'}}
      </text>
      <text class="empty-desc">
        {{currentTab === 0 ? 'å¿«å»å‘ç°æ„Ÿå…´è¶£çš„æ´»åŠ¨å§' : 'åˆ›å»ºæ´»åŠ¨ï¼Œå¬é›†å¿—åŒé“åˆçš„ä¼™ä¼´'}}
      </text>
      <button class="empty-btn" bindtap="goToActivities">
        <text class="btn-icon">ğŸ”</text>
        <text>å‘ç°æ´»åŠ¨</text>
      </button>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{activities.length > 0}}" class="load-more">
      <view wx:if="{{loading}}" class="loading-text">
        <text class="loading-icon">â³</text>
        <text>åŠ è½½ä¸­...</text>
      </view>
      <view wx:elif="{{!hasMore}}" class="no-more-text">
        <text class="divider-line"></text>
        <text class="no-more-label">æ²¡æœ‰æ›´å¤šäº†</text>
        <text class="divider-line"></text>
      </view>
    </view>
  </view>
</view>
