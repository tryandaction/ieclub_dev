<!--pages/plaza/index.wxml-->
<view class="plaza-page">
  <!-- Tab åˆ‡æ¢æ  -->
  <view class="tab-bar">
    <view 
      wx:for="{{tabs}}" 
      wx:key="id"
      class="tab-item {{activeTab === item.id ? 'active' : ''}}"
      data-tab="{{item.id}}"
      bindtap="switchTab"
    >
      <text class="tab-icon">{{item.icon}}</text>
      <text class="tab-label">{{item.label}}</text>
    </view>
  </view>

  <!-- è¯é¢˜åˆ—è¡¨ -->
  <scroll-view scroll-y class="topic-list" enable-back-to-top>
    <view class="topic-grid">
      <view 
        wx:for="{{topics}}" 
        wx:key="id"
        class="topic-card"
        data-topic="{{item}}"
        bindtap="onTopicTap"
      >
        <!-- å°é¢ -->
        <view class="topic-cover topic-{{item.type}}">
          <text class="topic-emoji">{{item.cover}}</text>
          <view class="topic-type-badge">
            <text class="badge-icon">{{item.type === 'offer' ? 'ğŸ¤' : item.type === 'demand' ? 'ğŸ‘‚' : 'ğŸš€'}}</text>
            <text class="badge-label">{{item.type === 'offer' ? 'æˆ‘æ¥è®²' : item.type === 'demand' ? 'æƒ³å¬' : 'é¡¹ç›®'}}</text>
          </view>
        </view>

        <!-- å†…å®¹ -->
        <view class="topic-content">
          <text class="topic-title">{{item.title}}</text>
          
          <view class="topic-author">
            <text class="author-emoji">{{item.author.avatar}}</text>
            <text class="author-name">{{item.author.name}}</text>
            <view class="author-level">
              <text class="level-text">LV{{item.author.level}}</text>
            </view>
          </view>

          <view class="topic-stats">
            <view class="stat-item">
              <text class="stat-icon">â¤ï¸</text>
              <text class="stat-text">{{item.stats.likes}}</text>
            </view>
            <view class="stat-item">
              <text class="stat-icon">ğŸ’¬</text>
              <text class="stat-text">{{item.stats.comments}}</text>
            </view>
            <view class="stat-item">
              <text class="stat-icon">ğŸ‘€</text>
              <text class="stat-text">{{item.stats.views}}</text>
            </view>
          </view>

          <!-- æƒ³å¬è¿›åº¦ -->
          <view wx:if="{{item.type === 'demand' && item.stats.wantCount}}" class="want-count">
            <text class="want-text">{{item.stats.wantCount}}/15äººæƒ³å¬</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
</view>

