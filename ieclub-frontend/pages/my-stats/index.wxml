<!--pages/my-stats/index.wxml-->
<view class="my-stats-page">
  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading-state">
    <text class="loading-icon">â³</text>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <scroll-view wx:else scroll-y class="content-scroll" enable-back-to-top>
    <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
    <view class="header-section">
      <view class="user-avatar">
        <image wx:if="{{userInfo.avatar}}" class="avatar-img" src="{{userInfo.avatar}}" mode="aspectFill" />
        <text wx:else class="avatar-placeholder">ğŸ‘¤</text>
      </view>
      <view class="user-info">
        <text class="user-name">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
        <view class="level-badge">
          <text class="level-text">LV{{growthData.level}}</text>
        </view>
      </view>
    </view>

    <!-- æˆé•¿æ•°æ®å¡ç‰‡ -->
    <view class="section growth-section">
      <view class="section-header">
        <text class="section-icon">ğŸ“ˆ</text>
        <text class="section-title">æˆé•¿æ•°æ®</text>
      </view>
      
      <view class="growth-card">
        <!-- ç­‰çº§è¿›åº¦ -->
        <view class="growth-item">
          <view class="growth-label">
            <text class="label-icon">â­</text>
            <text class="label-text">å½“å‰ç­‰çº§</text>
          </view>
          <text class="growth-value">LV{{growthData.level}}</text>
        </view>

        <view class="progress-container">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{growthData.progress}}%"></view>
          </view>
          <text class="progress-text">{{growthData.exp}} / {{growthData.expToNext}} EXP</text>
        </view>

        <!-- ç§¯åˆ† -->
        <view class="growth-item">
          <view class="growth-label">
            <text class="label-icon">ğŸ’</text>
            <text class="label-text">ç§¯åˆ†ä½™é¢</text>
          </view>
          <text class="growth-value credits">{{growthData.credits}}</text>
        </view>
      </view>
    </view>

    <!-- æ•°æ®æ¦‚è§ˆ -->
    <view class="section overview-section">
      <view class="section-header">
        <text class="section-icon">ğŸ“Š</text>
        <text class="section-title">æ•°æ®æ¦‚è§ˆ</text>
      </view>

      <view class="overview-grid">
        <view 
          wx:for="{{overviewCards}}" 
          wx:key="label"
          class="overview-card"
          style="border-left-color: {{item.color}}"
        >
          <text class="card-icon">{{item.icon}}</text>
          <view class="card-content">
            <text class="card-value" style="color: {{item.color}}">{{item.value}}</text>
            <text class="card-label">{{item.label}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- å‘å¸ƒç±»å‹åˆ†å¸ƒ -->
    <view wx:if="{{postTypes.length > 0}}" class="section types-section">
      <view class="section-header">
        <text class="section-icon">ğŸ“</text>
        <text class="section-title">å‘å¸ƒç±»å‹åˆ†å¸ƒ</text>
      </view>

      <view class="types-list">
        <view 
          wx:for="{{postTypes}}" 
          wx:key="name"
          class="type-item"
        >
          <view class="type-info">
            <text class="type-icon">{{item.icon}}</text>
            <text class="type-name">{{item.name}}</text>
          </view>
          <view class="type-stats">
            <text class="type-count">{{item.count}}ç¯‡</text>
            <text class="type-percentage">{{item.percentage}}%</text>
          </view>
          <view class="type-bar">
            <view 
              class="type-bar-fill" 
              style="width: {{item.percentage}}%; background: {{item.color}}"
            ></view>
          </view>
        </view>
      </view>
    </view>

    <!-- æ´»è·ƒåº¦æ•°æ® -->
    <view class="section activity-section">
      <view class="section-header">
        <text class="section-icon">ğŸ”¥</text>
        <text class="section-title">æ´»è·ƒåº¦</text>
      </view>

      <view class="activity-card">
        <view class="activity-item">
          <text class="activity-label">æœ€è¿‘æ´»è·ƒ</text>
          <text class="activity-value">{{activityData.lastActiveAt}}</text>
        </view>
        <view class="activity-divider"></view>
        <view class="activity-item">
          <text class="activity-label">æ´»è·ƒå¤©æ•°</text>
          <text class="activity-value highlight">{{activityData.activeDays}}å¤©</text>
        </view>
      </view>
    </view>

    <!-- æˆå°±å±•ç¤º -->
    <view class="section achievements-section">
      <view class="section-header">
        <text class="section-icon">ğŸ†</text>
        <text class="section-title">æˆ‘çš„æˆå°±</text>
      </view>

      <view class="achievements-grid">
        <view class="achievement-card">
          <text class="achievement-icon">ğŸ¯</text>
          <text class="achievement-name">æ´»è·ƒç”¨æˆ·</text>
          <text class="achievement-desc">è¿ç»­æ´»è·ƒ7å¤©</text>
        </view>
        <view class="achievement-card locked">
          <text class="achievement-icon">ğŸŒŸ</text>
          <text class="achievement-name">å†…å®¹è¾¾äºº</text>
          <text class="achievement-desc">å‘å¸ƒ10ç¯‡å†…å®¹</text>
        </view>
        <view class="achievement-card locked">
          <text class="achievement-icon">ğŸ’ª</text>
          <text class="achievement-name">äººæ°”ä½œè€…</text>
          <text class="achievement-desc">è·å¾—100ä¸ªç‚¹èµ</text>
        </view>
      </view>
    </view>

    <!-- æç¤ºä¿¡æ¯ -->
    <view class="tips-section">
      <text class="tips-icon">ğŸ’¡</text>
      <text class="tips-text">æŒç»­å‘å¸ƒä¼˜è´¨å†…å®¹ï¼Œå¯ä»¥è·å¾—æ›´å¤šç»éªŒå’Œç§¯åˆ†å“¦ï¼</text>
    </view>
  </scroll-view>
</view>
