<!--pages/auth/index.wxml-->
<!--ä¸“ä¸šé«˜ç«¯ç™»å½•æ³¨å†Œé¡µé¢ - 2025å¹´11æœˆ3æ—¥é‡åˆ¶-->
<view class="auth-page" style="padding-top: {{navBarHeight + 20}}px;">
  
  <!-- é¡¶éƒ¨LogoåŒºåŸŸ -->
  <view class="logo-section">
    <view class="logo-container">
      <view class="logo">IE</view>
      <view class="logo-shine"></view>
    </view>
    <view class="app-name">IEClub</view>
    <view class="app-slogan">å­¦ä¹  Â· ç§‘ç ” Â· é¡¹ç›® Â· åˆ›ä¸š</view>
  </view>

  <!-- Tab åˆ‡æ¢åŒºåŸŸ -->
  <view class="tab-section">
    <view 
      class="tab-item {{tabIndex === 0 ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-index="{{0}}"
    >
      <text class="tab-text">ç™»å½•</text>
      <view class="tab-badge" wx:if="{{tabIndex === 0}}"></view>
    </view>
    <view 
      class="tab-item {{tabIndex === 1 ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-index="{{1}}"
    >
      <text class="tab-text">æ³¨å†Œ</text>
      <view class="tab-badge" wx:if="{{tabIndex === 1}}"></view>
    </view>
    <view class="tab-indicator" style="transform: translateX({{tabIndex * 100}}%)"></view>
  </view>

  <!-- ç™»å½•è¡¨å• -->
  <view class="form-container" wx:if="{{tabIndex === 0}}">
    <view class="form-section animated-fade-in">
      
      <!-- é‚®ç®±è¾“å…¥ -->
      <view class="form-item {{loginErrors.email ? 'error' : ''}}">
        <view class="form-label">
          <text class="label-icon">ğŸ“§</text>
          <text class="label-text">å­¦æ ¡é‚®ç®±</text>
        </view>
        <view class="input-wrapper">
          <input 
            class="form-input" 
            type="text"
            placeholder="è¯·è¾“å…¥å—ç§‘å¤§é‚®ç®±"
            placeholder-class="input-placeholder"
            value="{{loginForm.email}}"
            bindinput="onLoginEmailInput"
            maxlength="50"
          />
        </view>
        <view class="error-message" wx:if="{{loginErrors.email}}">
          <text class="error-icon">âš ï¸</text>
          <text class="error-text">{{loginErrors.email}}</text>
        </view>
      </view>

      <!-- å¯†ç è¾“å…¥ -->
      <view class="form-item {{loginErrors.password ? 'error' : ''}}">
        <view class="form-label">
          <text class="label-icon">ğŸ”’</text>
          <text class="label-text">å¯†ç </text>
        </view>
        <view class="input-wrapper">
          <input 
            class="form-input password-input" 
            type="{{showPassword ? 'text' : 'password'}}"
            placeholder="è¯·è¾“å…¥å¯†ç "
            placeholder-class="input-placeholder"
            value="{{loginForm.password}}"
            bindinput="onLoginPasswordInput"
            maxlength="20"
          />
          <view class="eye-icon" bindtap="togglePassword">
            <text>{{showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸'}}</text>
          </view>
        </view>
        <view class="error-message" wx:if="{{loginErrors.password}}">
          <text class="error-icon">âš ï¸</text>
          <text class="error-text">{{loginErrors.password}}</text>
        </view>
      </view>

      <!-- å¿˜è®°å¯†ç  -->
      <view class="forgot-password">
        <text class="forgot-link" bindtap="goToForgotPassword">å¿˜è®°å¯†ç ï¼Ÿ</text>
      </view>

      <!-- ç™»å½•æŒ‰é’® -->
      <button 
        class="submit-btn primary-btn {{loginLoading ? 'loading' : ''}}"
        bindtap="handleLogin"
        disabled="{{loginLoading}}"
        hover-class="btn-hover"
      >
        <text class="btn-text">{{loginLoading ? 'ç™»å½•ä¸­...' : 'ç«‹å³ç™»å½•'}}</text>
        <view class="btn-loading" wx:if="{{loginLoading}}">
          <view class="loading-spinner"></view>
        </view>
      </button>

      <!-- åˆ†å‰²çº¿ -->
      <view class="divider">
        <view class="divider-line"></view>
        <text class="divider-text">æˆ–</text>
        <view class="divider-line"></view>
      </view>

      <!-- å¾®ä¿¡ç™»å½•æŒ‰é’® -->
      <button 
        class="submit-btn secondary-btn"
        bindtap="goToWechatLogin"
        hover-class="btn-hover"
      >
        <text class="btn-icon">ğŸ’¬</text>
        <text class="btn-text">å¾®ä¿¡å¿«é€Ÿç™»å½•</text>
      </button>
    </view>
  </view>

  <!-- æ³¨å†Œè¡¨å• -->
  <view class="form-container" wx:if="{{tabIndex === 1}}">
    <view class="form-section animated-fade-in">
      
      <!-- é‚®ç®±è¾“å…¥ -->
      <view class="form-item {{registerErrors.email ? 'error' : ''}}">
        <view class="form-label">
          <text class="label-icon">ğŸ“§</text>
          <text class="label-text">å­¦æ ¡é‚®ç®±</text>
        </view>
        <view class="input-wrapper">
          <input 
            class="form-input" 
            type="text"
            placeholder="è¯·è¾“å…¥å—ç§‘å¤§é‚®ç®±"
            placeholder-class="input-placeholder"
            value="{{registerForm.email}}"
            bindinput="onRegisterEmailInput"
            maxlength="50"
          />
        </view>
        <view class="error-message" wx:if="{{registerErrors.email}}">
          <text class="error-icon">âš ï¸</text>
          <text class="error-text">{{registerErrors.email}}</text>
        </view>
      </view>

      <!-- éªŒè¯ç è¾“å…¥ -->
      <view class="form-item {{registerErrors.code ? 'error' : ''}}">
        <view class="form-label">
          <text class="label-icon">ğŸ”¢</text>
          <text class="label-text">éªŒè¯ç </text>
        </view>
        <view class="input-wrapper code-wrapper">
          <input 
            class="form-input code-input" 
            type="number"
            placeholder="è¯·è¾“å…¥6ä½éªŒè¯ç "
            placeholder-class="input-placeholder"
            value="{{registerForm.code}}"
            bindinput="onRegisterCodeInput"
            maxlength="6"
          />
          <button 
            class="code-btn {{codeSending || countdown > 0 ? 'disabled' : ''}}"
            bindtap="sendCode"
            disabled="{{codeSending || countdown > 0}}"
            hover-class="code-btn-hover"
          >
            <text wx:if="{{countdown > 0}}">{{countdown}}s</text>
            <text wx:elif="{{codeSending}}">å‘é€ä¸­...</text>
            <text wx:else>è·å–éªŒè¯ç </text>
          </button>
        </view>
        <view class="error-message" wx:if="{{registerErrors.code}}">
          <text class="error-icon">âš ï¸</text>
          <text class="error-text">{{registerErrors.code}}</text>
        </view>
      </view>

      <!-- å¯†ç è¾“å…¥ -->
      <view class="form-item {{registerErrors.password ? 'error' : ''}}">
        <view class="form-label">
          <text class="label-icon">ğŸ”’</text>
          <text class="label-text">å¯†ç </text>
        </view>
        <view class="input-wrapper">
          <input 
            class="form-input password-input" 
            type="{{showPassword ? 'text' : 'password'}}"
            placeholder="è¯·è¾“å…¥å¯†ç ï¼ˆ6-20ä½ï¼‰"
            placeholder-class="input-placeholder"
            value="{{registerForm.password}}"
            bindinput="onRegisterPasswordInput"
            maxlength="20"
          />
          <view class="eye-icon" bindtap="togglePassword">
            <text>{{showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸'}}</text>
          </view>
        </view>
        <view class="error-message" wx:if="{{registerErrors.password}}">
          <text class="error-icon">âš ï¸</text>
          <text class="error-text">{{registerErrors.password}}</text>
        </view>
      </view>

      <!-- ç¡®è®¤å¯†ç è¾“å…¥ -->
      <view class="form-item {{registerErrors.confirmPassword ? 'error' : ''}}">
        <view class="form-label">
          <text class="label-icon">ğŸ”</text>
          <text class="label-text">ç¡®è®¤å¯†ç </text>
        </view>
        <view class="input-wrapper">
          <input 
            class="form-input password-input" 
            type="{{showConfirmPassword ? 'text' : 'password'}}"
            placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
            placeholder-class="input-placeholder"
            value="{{registerForm.confirmPassword}}"
            bindinput="onRegisterConfirmPasswordInput"
            maxlength="20"
          />
          <view class="eye-icon" bindtap="toggleConfirmPassword">
            <text>{{showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸'}}</text>
          </view>
        </view>
        <view class="error-message" wx:if="{{registerErrors.confirmPassword}}">
          <text class="error-icon">âš ï¸</text>
          <text class="error-text">{{registerErrors.confirmPassword}}</text>
        </view>
      </view>

      <!-- æ³¨å†ŒæŒ‰é’® -->
      <button 
        class="submit-btn primary-btn {{registerLoading ? 'loading' : ''}}"
        bindtap="handleRegister"
        disabled="{{registerLoading}}"
        hover-class="btn-hover"
      >
        <text class="btn-text">{{registerLoading ? 'æ³¨å†Œä¸­...' : 'ç«‹å³æ³¨å†Œ'}}</text>
        <view class="btn-loading" wx:if="{{registerLoading}}">
          <view class="loading-spinner"></view>
        </view>
      </button>

      <!-- ç”¨æˆ·åè®® -->
      <view class="agreement">
        <text class="agreement-text">æ³¨å†Œå³ä»£è¡¨åŒæ„</text>
        <text class="agreement-link" bindtap="viewUserAgreement">ã€Šç”¨æˆ·åè®®ã€‹</text>
        <text class="agreement-text">å’Œ</text>
        <text class="agreement-link" bindtap="viewPrivacyPolicy">ã€Šéšç§æ”¿ç­–ã€‹</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨è£…é¥° -->
  <view class="decoration-container">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
    <view class="decoration-circle circle-3"></view>
  </view>
</view>
