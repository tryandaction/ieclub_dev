<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <view class="header-icon">🔗</view>
    <view class="header-title">账号绑定</view>
    <view class="header-desc">绑定手机号，提升账号安全性</view>
  </view>

  <!-- 当前绑定状态 -->
  <view class="status-card">
    <view class="status-title">当前绑定状态</view>
    
    <!-- 邮箱状态 -->
    <view class="status-item">
      <view class="status-left">
        <view class="status-icon email">📧</view>
        <view class="status-info">
          <view class="status-label">邮箱</view>
          <view class="status-value">{{userInfo.email || '未绑定'}}</view>
        </view>
      </view>
      <view class="status-badge success" wx:if="{{userInfo.email}}">✓</view>
    </view>

    <!-- 手机号状态 -->
    <view class="status-item">
      <view class="status-left">
        <view class="status-icon phone">📱</view>
        <view class="status-info">
          <view class="status-label">手机号</view>
          <view class="status-value" wx:if="{{userInfo.phone}}">
            {{userInfo.phone.slice(0, 3)}}****{{userInfo.phone.slice(-4)}}
          </view>
          <view class="status-value" wx:else>未绑定</view>
        </view>
      </view>
      <view class="status-badge success" wx:if="{{userInfo.phone}}">✓</view>
      <view class="status-badge" wx:else>未绑定</view>
    </view>
  </view>

  <!-- 绑定手机号表单 -->
  <view class="bind-card" wx:if="{{!userInfo.phone}}">
    <view class="bind-title">绑定手机号</view>
    
    <view class="form-group">
      <view class="form-label">手机号</view>
      <input 
        class="form-input"
        type="number"
        placeholder="请输入手机号"
        value="{{phone}}"
        bindinput="onPhoneInput"
        maxlength="11"
      />
    </view>

    <view class="form-group">
      <view class="form-label">验证码</view>
      <view class="code-wrapper">
        <input 
          class="form-input code-input"
          type="number"
          placeholder="请输入6位验证码"
          value="{{code}}"
          bindinput="onCodeInput"
          maxlength="6"
        />
        <button 
          class="code-btn {{codeSending || countdown > 0 ? 'disabled' : ''}}"
          bindtap="sendCode"
          disabled="{{codeSending || countdown > 0}}"
        >
          <text wx:if="{{countdown > 0}}">{{countdown}}s</text>
          <text wx:elif="{{codeSending}}">发送中</text>
          <text wx:else>获取验证码</text>
        </button>
      </view>
    </view>

    <button 
      class="bind-btn {{loading ? 'loading' : ''}}"
      bindtap="handleBind"
      disabled="{{loading}}"
    >
      {{loading ? '绑定中...' : '确认绑定'}}
    </button>
  </view>

  <!-- 已绑定提示 -->
  <view class="bound-tip" wx:if="{{userInfo.phone}}">
    <view class="tip-icon">✓</view>
    <view class="tip-text">您已成功绑定手机号</view>
  </view>
</view>
