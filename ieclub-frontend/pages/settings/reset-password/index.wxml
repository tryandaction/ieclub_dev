<!--pages/settings/reset-password/index.wxml-->
<view class="container">
  <!-- Header -->
  <view class="header">
    <view class="header-icon">ğŸ”“</view>
    <view class="header-title">æ‰¾å›å¯†ç </view>
    <view class="header-subtitle">é€šè¿‡é‚®ç®±éªŒè¯ç é‡ç½®å¯†ç </view>
  </view>

  <!-- é‡ç½®å¯†ç è¡¨å• -->
  <view class="form-container">
    <!-- é‚®ç®±è¾“å…¥ -->
    <view class="form-item {{errors.email ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">ğŸ“§</text>
        <text class="label-text">é‚®ç®±</text>
      </view>
      <input 
        class="form-input" 
        type="text"
        placeholder="è¯·è¾“å…¥å—ç§‘å¤§é‚®ç®±"
        value="{{form.email}}"
        bindinput="onEmailInput"
      />
      <view class="error-message" wx:if="{{errors.email}}">
        <text class="error-icon">âš ï¸</text>
        <text class="error-text">{{errors.email}}</text>
      </view>
    </view>

    <!-- éªŒè¯ç è¾“å…¥ -->
    <view class="form-item {{errors.code ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">ğŸ”¢</text>
        <text class="label-text">éªŒè¯ç </text>
      </view>
      <view class="code-input-wrapper">
        <input 
          class="form-input code-input" 
          type="number"
          placeholder="è¯·è¾“å…¥6ä½éªŒè¯ç "
          value="{{form.code}}"
          bindinput="onCodeInput"
          maxlength="6"
        />
        <button 
          class="send-code-btn {{codeSending || countdown > 0 ? 'disabled' : ''}}"
          bindtap="sendCode"
          disabled="{{codeSending || countdown > 0}}"
        >
          <text wx:if="{{countdown > 0}}">{{countdown}}s</text>
          <text wx:elif="{{codeSending}}">å‘é€ä¸­...</text>
          <text wx:else>å‘é€éªŒè¯ç </text>
        </button>
      </view>
      <view class="error-message" wx:if="{{errors.code}}">
        <text class="error-icon">âš ï¸</text>
        <text class="error-text">{{errors.code}}</text>
      </view>
    </view>

    <!-- æ–°å¯†ç  -->
    <view class="form-item {{errors.newPassword ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">ğŸ”</text>
        <text class="label-text">æ–°å¯†ç </text>
      </view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          type="{{showNewPassword ? 'text' : 'password'}}"
          placeholder="è¯·è¾“å…¥æ–°å¯†ç ï¼ˆ6-20ä½ï¼‰"
          value="{{form.newPassword}}"
          bindinput="onNewPasswordInput"
          maxlength="20"
        />
        <view class="password-toggle" bindtap="toggleNewPassword">
          <text class="toggle-icon">{{showNewPassword ? 'ğŸ‘' : 'ğŸ™ˆ'}}</text>
        </view>
      </view>
      <view class="error-message" wx:if="{{errors.newPassword}}">
        <text class="error-icon">âš ï¸</text>
        <text class="error-text">{{errors.newPassword}}</text>
      </view>
    </view>

    <!-- ç¡®è®¤å¯†ç  -->
    <view class="form-item {{errors.confirmPassword ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">âœ…</text>
        <text class="label-text">ç¡®è®¤å¯†ç </text>
      </view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          type="{{showConfirmPassword ? 'text' : 'password'}}"
          placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç "
          value="{{form.confirmPassword}}"
          bindinput="onConfirmPasswordInput"
          maxlength="20"
        />
        <view class="password-toggle" bindtap="toggleConfirmPassword">
          <text class="toggle-icon">{{showConfirmPassword ? 'ğŸ‘' : 'ğŸ™ˆ'}}</text>
        </view>
      </view>
      <view class="error-message" wx:if="{{errors.confirmPassword}}">
        <text class="error-icon">âš ï¸</text>
        <text class="error-text">{{errors.confirmPassword}}</text>
      </view>
    </view>

    <!-- æäº¤æŒ‰é’® -->
    <button 
      class="submit-btn {{loading ? 'loading' : ''}}"
      bindtap="handleSubmit"
      disabled="{{loading}}"
      hover-class="btn-hover"
    >
      <text wx:if="{{loading}}" class="loading-icon">â³</text>
      <text>{{loading ? 'é‡ç½®ä¸­...' : 'é‡ç½®å¯†ç '}}</text>
    </button>

    <!-- è¿”å›ç™»å½• -->
    <view class="back-login" bindtap="backToLogin">
      <text>æƒ³èµ·å¯†ç äº†ï¼Ÿ</text>
      <text class="link">è¿”å›ç™»å½•</text>
    </view>
  </view>
</view>

