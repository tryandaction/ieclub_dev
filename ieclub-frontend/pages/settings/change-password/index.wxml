<!--pages/settings/change-password/index.wxml-->
<view class="container">
  <!-- Header -->
  <view class="header">
    <view class="header-icon">🔐</view>
    <view class="header-title">修改密码</view>
    <view class="header-subtitle">为了您的账号安全，请定期修改密码</view>
  </view>

  <!-- 修改密码表单 -->
  <view class="form-container">
    <!-- 旧密码 -->
    <view class="form-item {{errors.oldPassword ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">🔑</text>
        <text class="label-text">原密码</text>
      </view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          type="{{showOldPassword ? 'text' : 'password'}}"
          placeholder="请输入原密码"
          value="{{form.oldPassword}}"
          bindinput="onOldPasswordInput"
          maxlength="20"
        />
        <view class="password-toggle" bindtap="toggleOldPassword">
          <text class="toggle-icon">{{showOldPassword ? '👁' : '🙈'}}</text>
        </view>
      </view>
      <view class="error-message" wx:if="{{errors.oldPassword}}">
        <text class="error-icon">⚠️</text>
        <text class="error-text">{{errors.oldPassword}}</text>
      </view>
    </view>

    <!-- 新密码 -->
    <view class="form-item {{errors.newPassword ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">🆕</text>
        <text class="label-text">新密码</text>
      </view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          type="{{showNewPassword ? 'text' : 'password'}}"
          placeholder="请输入新密码（6-20位）"
          value="{{form.newPassword}}"
          bindinput="onNewPasswordInput"
          maxlength="20"
        />
        <view class="password-toggle" bindtap="toggleNewPassword">
          <text class="toggle-icon">{{showNewPassword ? '👁' : '🙈'}}</text>
        </view>
      </view>
      <view class="error-message" wx:if="{{errors.newPassword}}">
        <text class="error-icon">⚠️</text>
        <text class="error-text">{{errors.newPassword}}</text>
      </view>
    </view>

    <!-- 确认密码 -->
    <view class="form-item {{errors.confirmPassword ? 'error' : ''}}">
      <view class="form-label">
        <text class="label-icon">✅</text>
        <text class="label-text">确认密码</text>
      </view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          type="{{showConfirmPassword ? 'text' : 'password'}}"
          placeholder="请再次输入新密码"
          value="{{form.confirmPassword}}"
          bindinput="onConfirmPasswordInput"
          maxlength="20"
        />
        <view class="password-toggle" bindtap="toggleConfirmPassword">
          <text class="toggle-icon">{{showConfirmPassword ? '👁' : '🙈'}}</text>
        </view>
      </view>
      <view class="error-message" wx:if="{{errors.confirmPassword}}">
        <text class="error-icon">⚠️</text>
        <text class="error-text">{{errors.confirmPassword}}</text>
      </view>
    </view>

    <!-- 密码强度提示 -->
    <view class="password-tips">
      <view class="tips-title">💡 密码安全提示：</view>
      <view class="tips-item">• 密码长度8-20位</view>
      <view class="tips-item">• 必须包含字母和数字</view>
      <view class="tips-item">• 建议使用字母、数字、符号组合</view>
      <view class="tips-item">• 不要使用过于简单的密码</view>
    </view>

    <!-- 提交按钮 -->
    <button 
      class="submit-btn {{loading ? 'loading' : ''}}"
      bindtap="handleSubmit"
      disabled="{{loading}}"
      hover-class="btn-hover"
    >
      <text wx:if="{{loading}}" class="loading-icon">⏳</text>
      <text>{{loading ? '修改中...' : '确认修改'}}</text>
    </button>
  </view>
</view>

