<div align="center">

# ğŸ“ IEclub - è·¨å­¦ç§‘æ™ºèƒ½äº¤æµå¹³å°

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Node Version](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen)](https://nodejs.org/)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/ieclub/ieclub/pulls)
[![CI Status](https://github.com/ieclub/ieclub/workflows/CI/badge.svg)](https://github.com/ieclub/ieclub/actions)

**ä¸€ä¸ªåŸºäº Taro + React + Node.js çš„ä¼ä¸šçº§è·¨å¹³å°æ™ºèƒ½äº¤æµå¹³å°**

[åŠŸèƒ½ç‰¹è‰²](#-æ ¸å¿ƒåŠŸèƒ½) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„) â€¢ [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„) â€¢ [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

IEclub æ˜¯ä¸€ä¸ªä¸“ä¸ºå­¦ç”Ÿæ‰“é€ çš„**è·¨å­¦ç§‘äº¤æµä¸æ™ºèƒ½åŒ¹é…å¹³å°**ï¼Œé€šè¿‡å…ˆè¿›çš„ç®—æ³•å’Œç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œå®ç°äº†ï¼š

- ğŸ¯ **æ™ºèƒ½ä¾›éœ€åŒ¹é…** - åŸºäºæŠ€èƒ½ã€å…´è¶£ã€åœ°ç‚¹çš„å¤šç»´åº¦ç²¾å‡†åŒ¹é…
- ğŸ“ˆ **çƒ­åº¦æ’åºç®—æ³•** - æ—¶é—´è¡°å‡ + å¤šå› ç´ åŠ æƒçš„åŠ¨æ€çƒ­åº¦è®¡ç®—
- ğŸ¤– **ä¸ªæ€§åŒ–æ¨è** - ååŒè¿‡æ»¤ + å†…å®¹æ¨èçš„æ··åˆæ¨èç³»ç»Ÿ
- ğŸ“± **è·¨å¹³å°æ”¯æŒ** - ä¸€å¥—ä»£ç ï¼Œå¤šç«¯è¿è¡Œï¼ˆå°ç¨‹åºã€H5ã€Appï¼‰
- ğŸ›¡ï¸ **å†…å®¹å®‰å…¨** - é›†æˆå¾®ä¿¡å®˜æ–¹API + æ•æ„Ÿè¯è¿‡æ»¤çš„å¤šå±‚é˜²æŠ¤
- âš¡ **é«˜æ€§èƒ½æ¶æ„** - Redisç¼“å­˜ + æ•°æ®åº“ä¼˜åŒ– + CDNåŠ é€Ÿ

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·ç³»ç»Ÿ
- âœ… å¾®ä¿¡å°ç¨‹åºä¸€é”®ç™»å½•ï¼ˆæ”¯æŒæ‰‹æœºå·æˆæƒï¼‰
- âœ… ç”¨æˆ·èµ„æ–™ç®¡ç†ï¼ˆæŠ€èƒ½æ ‡ç­¾ã€å…´è¶£æ ‡ç­¾ã€ä¸ªäººç®€ä»‹ï¼‰
- âœ… ç§¯åˆ†ç­‰çº§ç³»ç»Ÿï¼ˆå‘å¸–+10ã€è¯„è®º+5ã€ç­¾åˆ°+2ï¼‰
- âœ… ç¤¾äº¤å…³ç³»ï¼ˆå…³æ³¨ã€ç²‰ä¸ã€ç§ä¿¡ï¼‰
- âœ… ä¸ªäººä¸»é¡µå±•ç¤ºï¼ˆå‘å¸ƒçš„è¯é¢˜ã€æ”¶è—ã€äº’åŠ¨è®°å½•ï¼‰

### è¯é¢˜å¹¿åœº
- âœ… **å¤šç±»å‹è¯é¢˜**ï¼šè®¨è®ºã€éœ€æ±‚ã€ä¾›ç»™ã€é—®ç­”ã€æ´»åŠ¨ã€åˆä½œ
- âœ… **å¯Œåª’ä½“å†…å®¹**ï¼š
  - ğŸ“· å›¾ç‰‡ä¸Šä¼ ï¼ˆæœ€å¤š9å¼ ï¼Œæ”¯æŒå‹ç¼©ï¼‰
  - ğŸ“„ æ–‡æ¡£ä¸Šä¼ ï¼ˆPDFã€Wordã€PPTï¼Œæœ€å¤§20MBï¼‰
  - ğŸ“¹ è§†é¢‘é“¾æ¥ï¼ˆBç«™ã€ä¼˜é…·ç­‰ï¼‰
  - ğŸ”— å…¬ä¼—å·é“¾æ¥é¢„è§ˆ
- âœ… **Markdown æ¸²æŸ“æ”¯æŒ**
- âœ… **ä¾›éœ€æ™ºèƒ½åŒ¹é…**ï¼š
  - éœ€æ±‚ç±»å‹ï¼šäººå‘˜ã€æŠ€æœ¯ã€èµ„é‡‘ã€åœºåœ°ã€è®¾å¤‡ã€åˆä½œ
  - æŠ€èƒ½æ ‡ç­¾åŒ¹é…
  - åœ°ç‚¹èŒƒå›´ç­›é€‰
- âœ… **çƒ­åº¦è¯„åˆ†ä¸è¶‹åŠ¿æ£€æµ‹**
- âœ… **å¿«é€Ÿæ“ä½œæŒ‰é’®**ï¼š
  - ğŸ’¡ æ„Ÿå…´è¶£
  - ğŸ¤ å¯ä»¥å¸®åŠ©
  - ğŸ¯ æƒ³åˆä½œ

### è¯„è®ºç³»ç»Ÿ
- âœ… æ— é™å±‚çº§åµŒå¥—å›å¤
- âœ… è¯„è®ºæ’åºï¼ˆæœ€çƒ­ã€æœ€æ–°ï¼‰
- âœ… å›¾ç‰‡è¯„è®ºæ”¯æŒ
- âœ… @æåŠåŠŸèƒ½
- âœ… æ¥¼å±‚æ˜¾ç¤ºï¼ˆ#1ã€#2...ï¼‰

### å†…å®¹å®‰å…¨
- âœ… å¾®ä¿¡å®˜æ–¹å†…å®¹å®‰å…¨æ£€æµ‹ API
- âœ… æœ¬åœ°æ•æ„Ÿè¯è¿‡æ»¤ï¼ˆDFAç®—æ³•ï¼‰
- âœ… å›¾ç‰‡é‰´é»„ï¼ˆåŸºäºå¾®ä¿¡ APIï¼‰
- âœ… ç”¨æˆ·ä¸¾æŠ¥æœºåˆ¶
- âœ… ç®¡ç†å‘˜å®¡æ ¸åå°

### é€šçŸ¥ç³»ç»Ÿ
- âœ… ç³»ç»Ÿé€šçŸ¥ï¼ˆå…¬å‘Šã€æ´»åŠ¨æ¨é€ï¼‰
- âœ… äº’åŠ¨é€šçŸ¥ï¼ˆç‚¹èµã€è¯„è®ºã€@æåŠï¼‰
- âœ… ç§ä¿¡é€šçŸ¥
- âœ… å¾®ä¿¡å°ç¨‹åºè®¢é˜…æ¶ˆæ¯
- âœ… æ¶ˆæ¯èšåˆï¼ˆä»Šæ—¥æœ‰10äººç‚¹èµäº†ä½ ï¼‰

### æœç´¢ä¸æ¨è
- âœ… è¯é¢˜å…¨æ–‡æœç´¢ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€æ ‡ç­¾ï¼‰
- âœ… ç”¨æˆ·æœç´¢ï¼ˆæ˜µç§°ã€æŠ€èƒ½ï¼‰
- âœ… æœç´¢å†å²è®°å½•
- âœ… çƒ­é—¨æœç´¢è¯
- âœ… ä¸ªæ€§åŒ–æ¨èï¼ˆåŸºäºååŒè¿‡æ»¤ï¼‰
- âœ… ç›¸ä¼¼è¯é¢˜æ¨è

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆï¼ˆTaro å¤šç«¯æ¡†æ¶ï¼‰

```
æ¡†æ¶ï¼šTaro 4.x + React 18
çŠ¶æ€ç®¡ç†ï¼šZustandï¼ˆè½»é‡çº§ã€æ”¯æŒå¤šç«¯ï¼‰
UIç»„ä»¶ï¼šTaro UI + è‡ªå®šä¹‰ç»„ä»¶
æ ·å¼æ–¹æ¡ˆï¼šTailwind CSSï¼ˆåŸå­åŒ–CSSï¼‰
HTTPå®¢æˆ·ç«¯ï¼šTaro.requestï¼ˆåŸç”ŸAPIï¼‰
æ„å»ºå·¥å…·ï¼šWebpack 5
æ”¯æŒå¹³å°ï¼šå¾®ä¿¡å°ç¨‹åºã€H5ã€æ”¯ä»˜å®å°ç¨‹åºã€å­—èŠ‚è·³åŠ¨å°ç¨‹åºã€React Nativeï¼ˆAppï¼‰
```

**ä¸ºä»€ä¹ˆé€‰æ‹© Taroï¼Ÿ**
- âœ… ä¸€å¥—ä»£ç ï¼Œå¤šç«¯è¿è¡Œï¼ˆèŠ‚çœ80%å¼€å‘æˆæœ¬ï¼‰
- âœ… React å¼€å‘ä½“éªŒï¼Œé™ä½å­¦ä¹ æ›²çº¿
- âœ… å®Œå–„çš„ç»„ä»¶åº“å’Œç”Ÿæ€
- âœ… æ”¯æŒåŸç”ŸAPIè°ƒç”¨

### åç«¯æŠ€æœ¯æ ˆ

```
è¿è¡Œç¯å¢ƒï¼šNode.js 18+
Webæ¡†æ¶ï¼šExpress.js 4.x
æ•°æ®åº“ï¼šMySQL 8.0ï¼ˆç¨³å®šã€é«˜æ€§èƒ½ï¼‰
ORMï¼šPrismaï¼ˆç±»å‹å®‰å…¨ã€ç°ä»£åŒ–ï¼‰
ç¼“å­˜ï¼šRedis 7+ï¼ˆä¼šè¯ã€é˜Ÿåˆ—ã€ç¼“å­˜ï¼‰
æ–‡ä»¶å­˜å‚¨ï¼šé˜¿é‡Œäº‘ OSS / è…¾è®¯äº‘ COS
å®æ—¶é€šä¿¡ï¼šSocket.IOï¼ˆå¯é€‰ï¼‰
å®šæ—¶ä»»åŠ¡ï¼šnode-cron
æ—¥å¿—ç³»ç»Ÿï¼šWinston
ç›‘æ§å‘Šè­¦ï¼šSentry
```

**ä¸ºä»€ä¹ˆé€‰æ‹© MySQL + Prismaï¼Ÿ**
- âœ… MySQL åœ¨å°ç¨‹åºåœºæ™¯æ›´æˆç†Ÿã€äº‘æœåŠ¡æ”¯æŒå¥½
- âœ… Prisma è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¼€å‘æ•ˆç‡é«˜
- âœ… è¿ç§»ç®¡ç†ç®€å•ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£

### æ ¸å¿ƒç®—æ³•

#### 1. çƒ­åº¦è¯„åˆ†ç®—æ³•
```javascript
çƒ­åº¦åˆ†æ•° = åŸºç¡€åˆ† Ã— æ—¶é—´è¡°å‡å› å­ Ã— äº’åŠ¨æƒé‡

åŸºç¡€åˆ† = æµè§ˆé‡ Ã— 1 + ç‚¹èµæ•° Ã— 5 + è¯„è®ºæ•° Ã— 10 + æ”¶è—æ•° Ã— 8
æ—¶é—´è¡°å‡ = e^(-è¡°å‡ç‡ Ã— å‘å¸ƒæ—¶é•¿)
äº’åŠ¨æƒé‡ = 1 + (è¿‘æœŸäº’åŠ¨ / æ€»äº’åŠ¨) Ã— 0.5
```

#### 2. æ™ºèƒ½åŒ¹é…ç®—æ³•
```javascript
åŒ¹é…åº¦ = æŠ€èƒ½åŒ¹é…åº¦ Ã— 0.4 + å…´è¶£åŒ¹é…åº¦ Ã— 0.3 + 
         åœ°ç‚¹åŒ¹é…åº¦ Ã— 0.2 + æ´»è·ƒåº¦ Ã— 0.1

æŠ€èƒ½åŒ¹é…åº¦ = äº¤é›†æŠ€èƒ½æ•° / éœ€æ±‚æŠ€èƒ½æ•°
å…´è¶£åŒ¹é…åº¦ = å…±åŒå…´è¶£æ•° / æ€»å…´è¶£æ•°
åœ°ç‚¹åŒ¹é…åº¦ = æ˜¯å¦åœ¨åŒä¸€åŸå¸‚ï¼ˆ1æˆ–0ï¼‰
æ´»è·ƒåº¦ = è¿‘7å¤©å‘å¸–æ•° + è¯„è®ºæ•°
```

#### 3. ä¸ªæ€§åŒ–æ¨èç®—æ³•
```
ååŒè¿‡æ»¤ + å†…å®¹æ¨èæ··åˆæ¨¡å‹

ç”¨æˆ·è¡Œä¸ºçŸ©é˜µ â†’ ItemCFç®—æ³• â†’ ç›¸ä¼¼è¯é¢˜æ¨è
è¯é¢˜æ ‡ç­¾å‘é‡ â†’ ä½™å¼¦ç›¸ä¼¼åº¦ â†’ å…´è¶£æ¨è
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
ieclub/
â”œâ”€â”€ ieclub-taro/                    # å‰ç«¯ Taro é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.config.ts       # Taro åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ app.tsx             # åº”ç”¨å…¥å£ï¼ˆå«é”™è¯¯è¾¹ç•Œï¼‰
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ index/          # è¯é¢˜å¹¿åœºï¼ˆé¦–é¡µï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.scss
â”‚   â”‚   â”‚   â”œâ”€â”€ topic-detail/   # è¯é¢˜è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ create-topic/   # å‘å¸ƒè¯é¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ login/          # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/        # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ notifications/  # é€šçŸ¥åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ search/         # æœç´¢é¡µ
â”‚   â”‚   â”œâ”€â”€ components/         # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ TopicCard/      # è¯é¢˜å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentItem/    # è¯„è®ºé¡¹
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentInput/   # è¯„è®ºè¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentList/    # è¯„è®ºåˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ EmptyState/     # ç©ºçŠ¶æ€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ EnhancedTopicCard/ # å¢å¼ºè¯é¢˜å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ FloatingActionButton/ # æ‚¬æµ®æ“ä½œæŒ‰é’®
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner/ # åŠ è½½åŠ¨ç”»
â”‚   â”‚   â”‚   â”œâ”€â”€ MatchingCard/   # åŒ¹é…å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressiveImage/ # æ¸è¿›å¼å›¾ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ SmartQuickActions/ # æ™ºèƒ½å¿«æ·æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ TopicFilters/   # è¯é¢˜ç­›é€‰å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ TrendingBar/    # è¶‹åŠ¿æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ VirtualTopicList/ # è™šæ‹Ÿè¯é¢˜åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary/  # é”™è¯¯è¾¹ç•Œç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageUploader/  # å›¾ç‰‡ä¸Šä¼ 
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentUploader/ # æ–‡æ¡£ä¸Šä¼ 
â”‚   â”‚   â”‚   â”œâ”€â”€ MarkdownViewer/ # Markdownæ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ LinkPreview/    # é“¾æ¥é¢„è§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ QuickActionBtn/ # å¿«é€Ÿæ“ä½œæŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ services/           # APIæœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ request.ts      # HTTPå°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ enhanced-request.ts # å¢å¼ºè¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ request-cache.ts # è¯·æ±‚ç¼“å­˜
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.ts       # åŠ è½½ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ offline-manager.ts # ç¦»çº¿ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ push.ts          # æ¨é€æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ smart-push.ts    # æ™ºèƒ½æ¨é€
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics.ts     # åˆ†ææœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ topic.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ comment.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ upload.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ matching.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ trending.ts
â”‚   â”‚   â”œâ”€â”€ store/              # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ userStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ topicStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ commentStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ notificationStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enhanced-topicStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ optimistic-updateStore.ts
â”‚   â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”‚   â””â”€â”€ useAnalytics.ts
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ time.ts         # æ—¶é—´æ ¼å¼åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ validator.ts    # è¡¨å•éªŒè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts      # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts    # å¸¸é‡é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts       # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.ts       # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ sanitize.ts     # æ¸…ç†å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ validation.ts   # éªŒè¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ topic.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ comment.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ variables.scss
â”‚   â”‚       â””â”€â”€ mixins.scss
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.ts            # ç¼–è¯‘é…ç½®
â”‚   â”‚   â”œâ”€â”€ dev.ts              # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”‚   â””â”€â”€ prod.ts             # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ .eslintrc.js            # ESLinté…ç½®
â”‚   â”œâ”€â”€ .prettierrc             # Prettieré…ç½®
â”‚   â”œâ”€â”€ project.config.json     # å¾®ä¿¡å°ç¨‹åºé…ç½®
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ ieclub-backend/                     # åç«¯ Node.js é¡¹ç›®
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma       # æ•°æ®åº“æ¨¡å‹å®šä¹‰ï¼ˆ10ä¸ªè¡¨ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ index.js        # é…ç½®ä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js         # JWTè®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.js # å…¨å±€é”™è¯¯å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.js       # æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ validation.js   # å‚æ•°éªŒè¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ wechatService.js    # å¾®ä¿¡å°ç¨‹åºæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ossService.js       # é˜¿é‡Œäº‘OSSæœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ algorithmService.js # æ ¸å¿ƒç®—æ³•æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js        # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ topicController.js       # è¯é¢˜æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ commentController.js     # è¯„è®ºæ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ uploadController.js      # ä¸Šä¼ æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ notificationController.js # é€šçŸ¥æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ userController.js        # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ index.js        # ä¸»è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.js       # Winstonæ—¥å¿—
â”‚   â”‚   â”‚   â”œâ”€â”€ redis.js        # Rediså®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ response.js     # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚   â”œâ”€â”€ app.js              # Expressåº”ç”¨ï¼ˆå«Swaggerï¼‰
â”‚   â”‚   â””â”€â”€ server.js           # æœåŠ¡å™¨å¯åŠ¨
â”‚   â”œâ”€â”€ mysql/
â”‚   â”‚   â””â”€â”€ init.sql           # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ nginx.conf              # Nginxé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ieclub.conf             # Nginxç«™ç‚¹é…ç½®
â”‚   â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹ï¼ˆå¢å¼ºç‰ˆï¼‰
â”‚   â”œâ”€â”€ .eslintrc.js            # ESLinté…ç½®
â”‚   â”œâ”€â”€ .prettierrc             # Prettieré…ç½®
â”‚   â”œâ”€â”€ jest.config.js          # Jestæµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ logrotate.conf          # æ—¥å¿—è½®è½¬é…ç½®
â”‚   â”œâ”€â”€ healthcheck.js          # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ Dockerfile              # Dockeræ„å»º
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tests/                  # æµ‹è¯•ç›®å½•
â”‚   â”‚   â”œâ”€â”€ unit/               # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ integration/        # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ setup.js            # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ .github/                    # CI/CDå·¥ä½œæµ
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml              # æŒç»­é›†æˆ
â”‚       â””â”€â”€ deploy.yml           # è‡ªåŠ¨éƒ¨ç½²
â”‚
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                  # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ DATABASE.md             # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ ALGORITHM.md            # ç®—æ³•è¯´æ˜æ–‡æ¡£
â”‚   â””â”€â”€ DEPLOYMENT.md           # éƒ¨ç½²æŒ‡å—
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .dockerignore
â”œâ”€â”€ LICENSE
â””â”€â”€ README.md                   # é¡¹ç›®æ ¹ç›®å½•è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **MySQL**: >= 8.0
- **Redis**: >= 7.0
- **å¾®ä¿¡å¼€å‘è€…å·¥å…·**: æœ€æ–°ç¨³å®šç‰ˆ
- **pnpm**: >= 8.0ï¼ˆæ¨èï¼‰æˆ– npm

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-org/ieclub.git
cd ieclub
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

#### å®‰è£…ä¾èµ–

```bash
cd backend
npm install
# æˆ–ä½¿ç”¨ pnpm
pnpm install
```

#### é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å†™å¿…è¦é…ç½®ï¼š

```env
# æœåŠ¡å™¨é…ç½®
NODE_ENV=development
PORT=3000

# æ•°æ®åº“é…ç½®
DATABASE_URL="mysql://root:password@localhost:3306/ieclub"

# JWT é…ç½®
JWT_SECRET="your-secret-key-change-this-in-production"
JWT_EXPIRES_IN="7d"

# å¾®ä¿¡å°ç¨‹åºé…ç½®
WECHAT_APPID="your-wechat-appid"
WECHAT_SECRET="your-wechat-secret"

# Redis é…ç½®
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""

# OSS é…ç½®ï¼ˆå¯é€‰ï¼Œä¸é…ç½®åˆ™ä½¿ç”¨æœ¬åœ°å­˜å‚¨ï¼‰
OSS_ACCESS_KEY_ID="your-aliyun-access-key-id"
OSS_ACCESS_KEY_SECRET="your-aliyun-access-key-secret"
OSS_BUCKET="ieclub-files"
OSS_REGION="oss-cn-hangzhou"
OSS_DOMAIN="https://cdn.ieclub.online"

# Sentry é…ç½®ï¼ˆå¯é€‰ï¼‰
SENTRY_DSN=""
```

#### åˆå§‹åŒ–æ•°æ®åº“

```bash
# ç”Ÿæˆ Prisma Client
npm run prisma:generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npm run prisma:migrate

# å¡«å……åˆå§‹æ•°æ®ï¼ˆå¯é€‰ï¼‰
npm run prisma:seed
```

#### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm run build
npm start
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨ï¼

#### æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3000/api/v1/health

# è¿”å›ç¤ºä¾‹ï¼š
# {
#   "success": true,
#   "message": "IEclub API is running",
#   "version": "2.0.0",
#   "timestamp": "2025-10-16T12:00:00.000Z"
# }
```

### 3. å¯åŠ¨å‰ç«¯é¡¹ç›®

#### å®‰è£…ä¾èµ–

```bash
cd frontend
npm install
# æˆ–ä½¿ç”¨ pnpm
pnpm install
```

#### é…ç½® API åœ°å€

ç¼–è¾‘ `src/utils/constants.ts`ï¼š

```typescript
export const API_BASE_URL = process.env.NODE_ENV === 'production'
  ? 'https://api.ieclub.online'  // ç”Ÿäº§ç¯å¢ƒ
  : 'http://localhost:3000'       // å¼€å‘ç¯å¢ƒ
```

#### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¾®ä¿¡å°ç¨‹åº
npm run dev:weapp

# H5
npm run dev:h5

# æ”¯ä»˜å®å°ç¨‹åº
npm run dev:alipay
```

#### åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›®ï¼šé€‰æ‹© `frontend/dist` ç›®å½•
3. å¡«å†™ AppIDï¼ˆæµ‹è¯•å·æˆ–æ­£å¼å·ï¼‰
4. ç‚¹å‡»ç¼–è¯‘ï¼Œå³å¯é¢„è§ˆ

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„ï¼ˆ10ä¸ªè¡¨ï¼‰

```
1. usersï¼ˆç”¨æˆ·è¡¨ï¼‰
   - åŸºæœ¬ä¿¡æ¯ã€æŠ€èƒ½æ ‡ç­¾ã€å…´è¶£æ ‡ç­¾ã€ç§¯åˆ†ç­‰çº§

2. topicsï¼ˆè¯é¢˜è¡¨ï¼‰â­æ ¸å¿ƒè¡¨
   - æ ‡é¢˜ã€å†…å®¹ã€ç±»å‹ã€éœ€æ±‚ç±»å‹ã€å¤šåª’ä½“ã€çƒ­åº¦åˆ†æ•°

3. commentsï¼ˆè¯„è®ºè¡¨ï¼‰
   - æ”¯æŒæ— é™å±‚çº§åµŒå¥—ã€ç‚¹èµæ•°

4. likesï¼ˆç‚¹èµè¡¨ï¼‰
   - ç”¨æˆ·IDã€ç›®æ ‡ç±»å‹ï¼ˆè¯é¢˜/è¯„è®ºï¼‰ã€ç›®æ ‡ID

5. bookmarksï¼ˆæ”¶è—è¡¨ï¼‰
   - ç”¨æˆ·IDã€è¯é¢˜IDã€æ”¶è—æ—¶é—´

6. followsï¼ˆå…³æ³¨è¡¨ï¼‰
   - å…³æ³¨è€…IDã€è¢«å…³æ³¨è€…ID

7. notificationsï¼ˆé€šçŸ¥è¡¨ï¼‰
   - ç±»å‹ã€å‘é€è€…ã€æ¥æ”¶è€…ã€å†…å®¹ã€æ˜¯å¦å·²è¯»

8. topic_viewsï¼ˆæµè§ˆè®°å½•è¡¨ï¼‰
   - ç”¨æˆ·IDã€è¯é¢˜IDã€æµè§ˆæ—¶é—´ã€åœç•™æ—¶é•¿

9. matchesï¼ˆåŒ¹é…è®°å½•è¡¨ï¼‰
   - éœ€æ±‚è¯é¢˜IDã€ä¾›ç»™è¯é¢˜IDã€åŒ¹é…åº¦ã€çŠ¶æ€

10. admin_logsï¼ˆç®¡ç†æ—¥å¿—è¡¨ï¼‰
    - ç®¡ç†å‘˜æ“ä½œè®°å½•ã€å®¡æ ¸è®°å½•
```

è¯¦ç»†çš„æ•°æ®åº“è®¾è®¡è¯·æŸ¥çœ‹ [DATABASE.md](docs/DATABASE.md)

---

## ğŸ”Œ æ ¸å¿ƒ API æ¥å£

### è®¤è¯ç›¸å…³

```
POST   /api/v1/auth/login              # å¾®ä¿¡ç™»å½•
POST   /api/v1/auth/register           # å®Œå–„ç”¨æˆ·ä¿¡æ¯
POST   /api/v1/auth/refresh            # åˆ·æ–° Token
GET    /api/v1/auth/profile            # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
PUT    /api/v1/auth/profile            # æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```

### è¯é¢˜ç›¸å…³

```
GET    /api/v1/topics                  # è·å–è¯é¢˜åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ã€æ’åºã€åˆ†é¡µï¼‰
GET    /api/v1/topics/:id              # è·å–è¯é¢˜è¯¦æƒ…
POST   /api/v1/topics                  # åˆ›å»ºè¯é¢˜
PUT    /api/v1/topics/:id              # æ›´æ–°è¯é¢˜
DELETE /api/v1/topics/:id              # åˆ é™¤è¯é¢˜
POST   /api/v1/topics/:id/like         # ç‚¹èµ/å–æ¶ˆç‚¹èµ
POST   /api/v1/topics/:id/bookmark     # æ”¶è—/å–æ¶ˆæ”¶è—
POST   /api/v1/topics/:id/quick-action # å¿«é€Ÿæ“ä½œï¼ˆæ„Ÿå…´è¶£ã€å¯ä»¥å¸®åŠ©ã€æƒ³åˆä½œï¼‰
GET    /api/v1/topics/:id/matches      # è·å–åŒ¹é…çš„ä¾›éœ€è¯é¢˜
```

### è¯„è®ºç›¸å…³

```
GET    /api/v1/topics/:topicId/comments     # è·å–è¯„è®ºåˆ—è¡¨
POST   /api/v1/topics/:topicId/comments     # å‘è¡¨è¯„è®º
PUT    /api/v1/comments/:id                 # æ›´æ–°è¯„è®º
DELETE /api/v1/comments/:id                 # åˆ é™¤è¯„è®º
POST   /api/v1/comments/:id/like            # ç‚¹èµè¯„è®º
```

### æ–‡ä»¶ä¸Šä¼ 

```
POST   /api/v1/upload/images            # ä¸Šä¼ å›¾ç‰‡ï¼ˆæœ€å¤š9å¼ ï¼‰
POST   /api/v1/upload/documents         # ä¸Šä¼ æ–‡æ¡£ï¼ˆPDF/Word/PPTï¼‰
POST   /api/v1/upload/avatar            # ä¸Šä¼ å¤´åƒ
DELETE /api/v1/upload/:fileId           # åˆ é™¤æ–‡ä»¶
```

### æœç´¢ä¸æ¨è

```
GET    /api/v1/search/topics            # æœç´¢è¯é¢˜
GET    /api/v1/search/users             # æœç´¢ç”¨æˆ·
GET    /api/v1/recommend/topics         # ä¸ªæ€§åŒ–æ¨èè¯é¢˜
GET    /api/v1/recommend/users          # æ¨èå…³æ³¨ç”¨æˆ·
```

### é€šçŸ¥ç›¸å…³

```
GET    /api/v1/notifications            # è·å–é€šçŸ¥åˆ—è¡¨
PUT    /api/v1/notifications/:id/read   # æ ‡è®°ä¸ºå·²è¯»
PUT    /api/v1/notifications/read-all   # å…¨éƒ¨æ ‡è®°ä¸ºå·²è¯»
DELETE /api/v1/notifications/:id        # åˆ é™¤é€šçŸ¥
```

å®Œæ•´çš„ API æ–‡æ¡£è¯·æŸ¥çœ‹ [API.md](docs/API.md)

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å®ç°ç»†èŠ‚

### 1. çƒ­åº¦æ’åºç®—æ³•å®ç°

```javascript
// backend/src/services/algorithmService.js

calculateHotScore(topic) {
  // åŸºç¡€åˆ† = æµè§ˆ Ã— 1 + ç‚¹èµ Ã— 5 + è¯„è®º Ã— 10 + æ”¶è— Ã— 8
  const baseScore = 
    topic.viewsCount * 1 +
    topic.likesCount * 5 +
    topic.commentsCount * 10 +
    topic.bookmarksCount * 8;
  
  // æ—¶é—´è¡°å‡ï¼ˆå‘å¸ƒåæ¯å°æ—¶è¡°å‡ï¼‰
  const hoursSinceCreated = 
    (Date.now() - topic.createdAt) / (1000 * 60 * 60);
  const timeDecay = Math.exp(-0.05 * hoursSinceCreated);
  
  // äº’åŠ¨æƒé‡ï¼ˆè¿‘24å°æ—¶äº’åŠ¨æ¯”ä¾‹ï¼‰
  const recentInteractions = 
    topic.recentLikes + topic.recentComments;
  const totalInteractions = 
    topic.likesCount + topic.commentsCount;
  const interactionWeight = 
    1 + (recentInteractions / Math.max(totalInteractions, 1)) * 0.5;
  
  // æœ€ç»ˆçƒ­åº¦åˆ†æ•°
  return baseScore * timeDecay * interactionWeight;
}
```

### 2. æ™ºèƒ½åŒ¹é…ç®—æ³•å®ç°

```javascript
// backend/src/services/algorithmService.js

async findMatches(demandTopicId) {
  const demandTopic = await prisma.topic.findUnique({
    where: { id: demandTopicId },
    include: { author: true }
  });
  
  // æŸ¥æ‰¾æ‰€æœ‰ä¾›ç»™ç±»å‹çš„è¯é¢˜
  const supplyTopics = await prisma.topic.findMany({
    where: {
      topicType: 'supply',
      demandType: demandTopic.demandType // ç›¸åŒéœ€æ±‚ç±»å‹
    },
    include: { author: true }
  });
  
  // è®¡ç®—æ¯ä¸ªä¾›ç»™è¯é¢˜çš„åŒ¹é…åº¦
  const matches = supplyTopics.map(supply => {
    // 1. æŠ€èƒ½åŒ¹é…åº¦
    const demandSkills = new Set(demandTopic.skillsNeeded || []);
    const supplySkills = new Set(supply.skillsProvided || []);
    const matchedSkills = [...demandSkills].filter(s => supplySkills.has(s));
    const skillMatch = matchedSkills.length / demandSkills.size;
    
    // 2. å…´è¶£åŒ¹é…åº¦
    const demandTags = new Set(demandTopic.tags || []);
    const supplyTags = new Set(supply.tags || []);
    const matchedTags = [...demandTags].filter(t => supplyTags.has(t));
    const tagMatch = matchedTags.length / Math.max(demandTags.size, 1);
    
    // 3. åœ°ç‚¹åŒ¹é…åº¦
    const locationMatch = 
      demandTopic.author.city === supply.author.city ? 1 : 0;
    
    // 4. æ´»è·ƒåº¦
    const activityScore = 
      (supply.author.topicsCount + supply.author.commentsCount) / 100;
    
    // ç»¼åˆåŒ¹é…åº¦
    const totalScore = 
      skillMatch * 0.4 +
      tagMatch * 0.3 +
      locationMatch * 0.2 +
      Math.min(activityScore, 1) * 0.1;
    
    return {
      supplyTopicId: supply.id,
      matchScore: totalScore,
      matchedSkills,
      matchedTags
    };
  });
  
  // æŒ‰åŒ¹é…åº¦æ’åºï¼Œè¿”å›å‰10ä¸ª
  return matches
    .sort((a, b) => b.matchScore - a.matchScore)
    .slice(0, 10);
}
```

### 3. ä¸ªæ€§åŒ–æ¨èç®—æ³•å®ç°

```javascript
// backend/src/services/algorithmService.js

async getRecommendations(userId, limit = 20) {
  // 1. è·å–ç”¨æˆ·çš„å†å²è¡Œä¸º
  const userBehaviors = await prisma.topicView.findMany({
    where: { userId },
    include: { topic: true },
    orderBy: { createdAt: 'desc' },
    take: 50
  });
  
  // 2. æå–ç”¨æˆ·æ„Ÿå…´è¶£çš„æ ‡ç­¾
  const userTags = new Map();
  userBehaviors.forEach(view => {
    (view.topic.tags || []).forEach(tag => {
      userTags.set(tag, (userTags.get(tag) || 0) + 1);
    });
  });
  
  // 3. åŸºäºååŒè¿‡æ»¤æ‰¾ç›¸ä¼¼ç”¨æˆ·
  const similarUsers = await this.findSimilarUsers(userId, userTags);
  
  // 4. è·å–ç›¸ä¼¼ç”¨æˆ·å–œæ¬¢çš„è¯é¢˜
  const candidateTopics = await prisma.topic.findMany({
    where: {
      authorId: { in: similarUsers.map(u => u.id) },
      id: { notIn: userBehaviors.map(v => v.topicId) } // æ’é™¤å·²æµè§ˆ
    },
    include: { author: true },
    orderBy: { hotScore: 'desc' },
    take: limit * 2
  });
  
  // 5. åŸºäºå†…å®¹ç›¸ä¼¼åº¦æ’åº
  const scoredTopics = candidateTopics.map(topic => {
    // æ ‡ç­¾åŒ¹é…åº¦
    const topicTags = new Set(topic.tags || []);
    let tagScore = 0;
    topicTags.forEach(tag => {
      tagScore += userTags.get(tag) || 0;
    });
    
    // çƒ­åº¦åˆ†æ•°
    const hotScore = topic.hotScore || 0;
    
    // æ—¶æ•ˆæ€§åˆ†æ•°
    const daysSinceCreated = 
      (Date.now() - topic.createdAt) / (1000 * 60 * 60 * 24);
    const freshnessScore = Math.max(0, 7 - daysSinceCreated);
    
    // ç»¼åˆå¾—åˆ†
    return {
      ...topic,
      recommendScore: tagScore * 0.5 + hotScore * 0.3 + freshnessScore * 0.2
    };
  });
  
  // 6. è¿”å›å¾—åˆ†æœ€é«˜çš„è¯é¢˜
  return scoredTopics
    .sort((a, b) => b.recommendScore - a.recommendScore)
    .slice(0, limit);
}
```

### 4. å†…å®¹å®‰å…¨æ£€æµ‹å®ç°

```javascript
// backend/src/services/wechatService.js

async checkContent(content, openid) {
  try {
    // è·å–å¾®ä¿¡ Access Token
    const accessToken = await this.getAccessToken();
    
    // è°ƒç”¨å¾®ä¿¡å†…å®¹å®‰å…¨æ£€æµ‹ API
    const response = await axios.post(
      `https://api.weixin.qq.com/wxa/msg_sec_check?access_token=${accessToken}`,
      {
        version: 2,
        openid,
        scene: 2, // 2-èµ„æ–™ï¼Œ3-è¯„è®ºï¼Œ4-è®ºå›
        content
      }
    );
    
    // æ£€æµ‹ç»“æœ
    if (response.data.errcode === 0) {
      const result = response.data.result;
      
      // å»ºè®®ï¼špass-é€šè¿‡ï¼Œreview-éœ€äººå·¥å®¡æ ¸ï¼Œrisky-è¿è§„
      if (result.suggest === 'risky') {
        return {
          safe: false,
          reason: result.label // 100-æ­£å¸¸ï¼Œ10001-å¹¿å‘Šï¼Œ20001-æ—¶æ”¿ï¼Œ20002-è‰²æƒ…ç­‰
        };
      }
      
      if (result.suggest === 'review') {
        return {
          safe: true,
          needReview: true,
          reason: result.label
        };
      }
      
      return { safe: true };
    }
    
    throw new Error('Content check failed');
  } catch (error) {
    logger.error('WeChat content check error:', error);
    // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨æœ¬åœ°æ•æ„Ÿè¯è¿‡æ»¤
    return this.localSensitiveWordCheck(content);
  }
}

// æœ¬åœ°æ•æ„Ÿè¯è¿‡æ»¤ï¼ˆDFAç®—æ³•ï¼‰
localSensitiveWordCheck(content) {
  const sensitiveWords = this.loadSensitiveWords(); // ä»æ–‡ä»¶æˆ–æ•°æ®åº“åŠ è½½
  
  // DFAå­—å…¸æ ‘
  const trie = this.buildTrie(sensitiveWords);
  
  // æ£€æµ‹æ˜¯å¦åŒ…å«æ•æ„Ÿè¯
  for (let i = 0; i < content.length; i++) {
    let node = trie;
    let j = i;
    let matchedWord = '';
    
    while (j < content.length && node[content[j]]) {
      matchedWord += content[j];
      node = node[content[j]];
      j++;
      
      if (node.isEnd) {
        return {
          safe: false,
          reason: 'local_sensitive_word',
          word: matchedWord
        };
      }
    }
  }
  
  return { safe: true };
}
```

---

## ğŸ“± å°ç¨‹åºé…ç½®

### 1. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®

#### æœåŠ¡å™¨åŸŸåé…ç½®
```
requeståˆæ³•åŸŸåï¼š
  https://api.ieclub.online

uploadFileåˆæ³•åŸŸåï¼š
  https://api.ieclub.online

downloadFileåˆæ³•åŸŸåï¼š
  https://cdn.ieclub.online

socketåˆæ³•åŸŸåï¼šï¼ˆå¯é€‰ï¼Œç”¨äºå®æ—¶é€šä¿¡ï¼‰
  wss://ws.ieclub.online
```

#### ä¸šåŠ¡åŸŸåé…ç½®ï¼ˆH5è·³è½¬ï¼‰
```
https://ieclub.online
```

### 2. å°ç¨‹åºæƒé™é…ç½®

åœ¨ `project.config.json` ä¸­é…ç½®ï¼š

```json
{
  "permission": {
    "scope.userLocation": {
      "desc": "ä½ çš„ä½ç½®ä¿¡æ¯å°†ç”¨äºåŒ¹é…é™„è¿‘çš„äººå’Œæ´»åŠ¨"
    },
    "scope.userInfo": {
      "desc": "éœ€è¦è·å–ä½ çš„æ˜µç§°å’Œå¤´åƒ"
    },
    "scope.writePhotosAlbum": {
      "desc": "éœ€è¦ä¿å­˜å›¾ç‰‡åˆ°ç›¸å†Œ"
    }
  }
}
```

### 3. è®¢é˜…æ¶ˆæ¯é…ç½®

éœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ç”³è¯·ä»¥ä¸‹è®¢é˜…æ¶ˆæ¯æ¨¡æ¿ï¼š

```
1. è¯„è®ºé€šçŸ¥
   - åœºæ™¯ï¼šæœ‰äººè¯„è®ºäº†ä½ çš„è¯é¢˜
   - å†…å®¹ï¼š{{thing1.DATA}} è¯„è®ºäº†ä½ ï¼š{{thing2.DATA}}

2. ç‚¹èµé€šçŸ¥
   - åœºæ™¯ï¼šæœ‰äººç‚¹èµäº†ä½ çš„è¯é¢˜/è¯„è®º
   - å†…å®¹ï¼š{{thing1.DATA}} è§‰å¾—å¾ˆèµ

3. ç³»ç»Ÿé€šçŸ¥
   - åœºæ™¯ï¼šå®˜æ–¹å…¬å‘Šã€æ´»åŠ¨é€šçŸ¥
   - å†…å®¹ï¼š{{thing1.DATA}}

4. åŒ¹é…é€šçŸ¥
   - åœºæ™¯ï¼šæ‰¾åˆ°äº†åŒ¹é…çš„ä¾›éœ€è¯é¢˜
   - å†…å®¹ï¼šæ‰¾åˆ°äº† {{number1.DATA}} ä¸ªåŒ¹é…çš„è¯é¢˜
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. æ„å»ºé•œåƒ

```bash
# æ„å»ºåç«¯é•œåƒ
cd backend
docker build -t ieclub-backend:latest .

# æ„å»ºå‰ç«¯é•œåƒï¼ˆå¯é€‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Nginx æ‰˜ç®¡ï¼‰
cd frontend
npm run build:h5
```

#### 2. å¯åŠ¨æœåŠ¡

```bash
cd backend
docker-compose up -d
```

`docker-compose.yml` ç¤ºä¾‹ï¼š

```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: your_password
      MYSQL_DATABASE: ieclub
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"

  backend:
    image: ieclub-backend:latest
    depends_on:
      - mysql
      - redis
    environment:
      - NODE_ENV=production
      - DATABASE_URL=mysql://root:your_password@mysql:3306/ieclub
      - REDIS_HOST=redis
    ports:
      - "3000:3000"
    restart: always

volumes:
  mysql_data:
  redis_data:
```

#### 3. é…ç½® Nginx åå‘ä»£ç†

```nginx
# /etc/nginx/sites-available/ieclub

# API æœåŠ¡
server {
    listen 80;
    server_name api.ieclub.online;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

# H5 å‰ç«¯
server {
    listen 80;
    server_name ieclub.online;
    root /var/www/ieclub/frontend/dist;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### 4. é…ç½® HTTPSï¼ˆä½¿ç”¨ Let's Encryptï¼‰

```bash
# å®‰è£… certbot
sudo apt install certbot python3-certbot-nginx

# è‡ªåŠ¨é…ç½® SSL
sudo certbot --nginx -d api.ieclub.online -d ieclub.online

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

### æ–¹å¼äºŒï¼šä¼ ç»Ÿéƒ¨ç½²

#### 1. å®‰è£…ä¾èµ–ç¯å¢ƒ

```bash
# å®‰è£… Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# å®‰è£… MySQL
sudo apt install mysql-server

# å®‰è£… Redis
sudo apt install redis-server

# å®‰è£… PM2ï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰
sudo npm install -g pm2
```

#### 2. éƒ¨ç½²åç«¯

```bash
# å…‹éš†ä»£ç 
git clone https://github.com/your-org/ieclub.git
cd ieclub/backend

# å®‰è£…ä¾èµ–
npm install --production

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env

# åˆå§‹åŒ–æ•°æ®åº“
npm run prisma:migrate

# ä½¿ç”¨ PM2 å¯åŠ¨
pm2 start src/server.js --name ieclub-backend

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

#### 3. éƒ¨ç½²å‰ç«¯ï¼ˆH5ï¼‰

```bash
cd ../frontend

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:h5

# éƒ¨ç½²åˆ° Nginx
sudo cp -r dist/* /var/www/ieclub/
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

```sql
-- ä¸ºé«˜é¢‘æŸ¥è¯¢æ·»åŠ ç´¢å¼•
CREATE INDEX idx_topics_hot_score ON topics(hot_score DESC, created_at DESC);
CREATE INDEX idx_topics_category ON topics(category, topic_type);
CREATE INDEX idx_topics_author ON topics(author_id, created_at DESC);
CREATE INDEX idx_comments_topic ON comments(topic_id, created_at DESC);
CREATE INDEX idx_likes_target ON likes(target_type, target_id, user_id);

-- ä¸ºæ ‡ç­¾å­—æ®µæ·»åŠ å…¨æ–‡ç´¢å¼•ï¼ˆMySQL 8.0+ï¼‰
ALTER TABLE topics ADD FULLTEXT INDEX ft_tags(tags);
```

### 2. Redis ç¼“å­˜ç­–ç•¥

```javascript
// çƒ­é—¨è¯é¢˜åˆ—è¡¨ç¼“å­˜ï¼ˆ5åˆ†é’Ÿï¼‰
const cacheKey = `topics:hot:page:${page}`;
await redis.setex(cacheKey, 300, JSON.stringify(topics));

// è¯é¢˜è¯¦æƒ…ç¼“å­˜ï¼ˆ30åˆ†é’Ÿï¼‰
const detailKey = `topic:${topicId}`;
await redis.setex(detailKey, 1800, JSON.stringify(topic));

// ç”¨æˆ·ä¿¡æ¯ç¼“å­˜ï¼ˆ1å°æ—¶ï¼‰
const userKey = `user:${userId}`;
await redis.setex(userKey, 3600, JSON.stringify(user));

// çƒ­åº¦åˆ†æ•°ç¼“å­˜ï¼ˆä½¿ç”¨ Redis Sorted Setï¼‰
await redis.zadd('topics:hot', hotScore, topicId);
```

### 3. CDN åŠ é€Ÿ

#### é˜¿é‡Œäº‘ OSS + CDN é…ç½®

```javascript
// backend/src/services/ossService.js

async uploadFile(file, folder = 'images') {
  const fileName = `${folder}/${Date.now()}-${file.originalname}`;
  
  await this.ossClient.put(fileName, file.buffer, {
    headers: {
      'Cache-Control': 'max-age=31536000', // 1å¹´ç¼“å­˜
      'Content-Type': file.mimetype
    }
  });
  
  // è¿”å› CDN åŠ é€ŸåŸŸå
  return `https://cdn.ieclub.online/${fileName}`;
}
```

### 4. å‰ç«¯æ€§èƒ½ä¼˜åŒ–

```javascript
// å›¾ç‰‡æ‡’åŠ è½½
import { Image } from '@tarojs/components';

<Image 
  src={imageUrl} 
  mode="aspectFill"
  lazyLoad  // å¼€å¯æ‡’åŠ è½½
/>

// é•¿åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
import { VirtualList } from '@tarojs/components';

<VirtualList
  height={500}
  itemData={topics}
  itemCount={topics.length}
  itemSize={120}
>
  {Topic => <TopicCard topic={Topic} />}
</VirtualList>

// é˜²æŠ–ä¼˜åŒ–æœç´¢
const debouncedSearch = useMemo(
  () => debounce((keyword) => {
    searchTopics(keyword);
  }, 500),
  []
);
```

---

## ğŸ” å®‰å…¨ç­–ç•¥

### 1. ç”¨æˆ·è®¤è¯æµç¨‹

```
1. ç”¨æˆ·åœ¨å°ç¨‹åºç‚¹å‡»ç™»å½•
   â†“
2. è°ƒç”¨ wx.login() è·å–ä¸´æ—¶ code
   â†“
3. å‘é€ code åˆ°åç«¯ POST /api/v1/auth/login
   â†“
4. åç«¯ç”¨ code æ¢å– openidï¼ˆè°ƒç”¨å¾®ä¿¡ APIï¼‰
   â†“
5. ç”Ÿæˆ JWT Token è¿”å›å‰ç«¯
   â†“
6. å‰ç«¯å­˜å‚¨ Tokenï¼Œåç»­è¯·æ±‚å¸¦ä¸Š Authorization: Bearer {token}
```

### 2. API å®‰å…¨é˜²æŠ¤

```javascript
// è¯·æ±‚é¢‘ç‡é™åˆ¶
const rateLimit = require('express-rate-limit');

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
  max: 100, // æœ€å¤š100ä¸ªè¯·æ±‚
  message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
});

app.use('/api/', limiter);

// SQL æ³¨å…¥é˜²æŠ¤ï¼ˆPrisma è‡ªåŠ¨é˜²æŠ¤ï¼‰
// XSS é˜²æŠ¤
const xss = require('xss');
const sanitizedContent = xss(content);

// CSRF é˜²æŠ¤
const csrf = require('csurf');
app.use(csrf({ cookie: true }));
```

### 3. æ•°æ®åŠ å¯†

```javascript
// å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
const bcrypt = require('bcrypt');
const hashedPassword = await bcrypt.hash(password, 10);

// æ•æ„Ÿæ•°æ®åŠ å¯†ï¼ˆAES-256-GCMï¼‰
const crypto = require('crypto');

function encrypt(text) {
  const iv = crypto.randomBytes(16);
  const cipher = crypto.createCipheriv('aes-256-gcm', Buffer.from(KEY), iv);
  let encrypted = cipher.update(text, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  const authTag = cipher.getAuthTag().toString('hex');
  return `${iv.toString('hex')}:${authTag}:${encrypted}`;
}
```

---

## ğŸ“ˆ ç›‘æ§ä¸æ—¥å¿—

### 1. Sentry é”™è¯¯è¿½è¸ª

```javascript
// backend/src/app.js
const Sentry = require('@sentry/node');

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 1.0
});

// æ•è·æ‰€æœ‰æœªå¤„ç†çš„é”™è¯¯
app.use(Sentry.Handlers.errorHandler());
```

### 2. Winston æ—¥å¿—ç³»ç»Ÿ

```javascript
// backend/src/utils/logger.js
const winston = require('winston');

const logger = winston.createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    // é”™è¯¯æ—¥å¿—
    new winston.transports.File({ 
      filename: 'logs/error.log', 
      level: 'error' 
    }),
    // æ‰€æœ‰æ—¥å¿—
    new winston.transports.File({ 
      filename: 'logs/combined.log' 
    })
  ]
});

// å¼€å‘ç¯å¢ƒè¾“å‡ºåˆ°æ§åˆ¶å°
if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.simple()
  }));
}
```

### 3. æ€§èƒ½ç›‘æ§

```javascript
// backend/src/middleware/performance.js

app.use((req, res, next) => {
  const startTime = Date.now();
  
  res.on('finish', () => {
    const duration = Date.now() - startTime;
    
    // è®°å½•æ…¢æŸ¥è¯¢ï¼ˆè¶…è¿‡1ç§’ï¼‰
    if (duration > 1000) {
      logger.warn('Slow request', {
        method: req.method,
        url: req.url,
        duration,
        userId: req.user?.id
      });
    }
    
    // ä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿ
    metrics.timing('http.request.duration', duration, {
      method: req.method,
      path: req.route?.path,
      status: res.statusCode
    });
  });
  
  next();
});
```

---

## ğŸ§ª æµ‹è¯•

### 1. å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- topicController.test.js

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

### 2. API æµ‹è¯•ï¼ˆä½¿ç”¨ Postmanï¼‰

å¯¼å…¥ Postman Collectionï¼š

```bash
docs/IEclub_API.postman_collection.json
```

### 3. æ€§èƒ½æµ‹è¯•ï¼ˆä½¿ç”¨ Apache Benchï¼‰

```bash
# æµ‹è¯•è¯é¢˜åˆ—è¡¨æ¥å£
ab -n 1000 -c 100 https://api.ieclub.online/api/v1/topics

# æµ‹è¯•ç™»å½•æ¥å£
ab -n 500 -c 50 -p login.json -T application/json \
   https://api.ieclub.online/api/v1/auth/login
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**: `git checkout -b feature/AmazingFeature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add some AmazingFeature'`
4. **æ¨é€åˆ°åˆ†æ”¯**: `git push origin feature/AmazingFeature`
5. **æäº¤ Pull Request**

### ä»£ç è§„èŒƒ

- **ESLint**: éµå¾ª Airbnb JavaScript Style Guide
- **Prettier**: ç»Ÿä¸€ä»£ç æ ¼å¼åŒ–
- **Commit Message**: éµå¾ª Conventional Commits è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·å˜åŠ¨
perf: æ€§èƒ½ä¼˜åŒ–
```

### Pull Request æ£€æŸ¥æ¸…å•

- [ ] ä»£ç é€šè¿‡ ESLint æ£€æŸ¥
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] éµå¾ªé¡¹ç›®çš„ä»£ç é£æ ¼

---

## ğŸ“ å¼€å‘è·¯çº¿å›¾

### v2.0ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰âœ…
- [x] Taro å¤šç«¯æ¡†æ¶é‡æ„
- [x] æ™ºèƒ½ä¾›éœ€åŒ¹é…ç³»ç»Ÿ
- [x] çƒ­åº¦æ’åºç®—æ³•
- [x] ä¸ªæ€§åŒ–æ¨è
- [x] å†…å®¹å®‰å…¨æ£€æµ‹
- [x] Markdown æ”¯æŒ
- [x] æ–‡æ¡£ä¸Šä¼ åŠŸèƒ½

### v2.1ï¼ˆè®¡åˆ’ä¸­ï¼‰ğŸš§
- [ ] å®æ—¶èŠå¤©åŠŸèƒ½ï¼ˆSocket.IOï¼‰
- [ ] è¯­éŸ³/è§†é¢‘é€šè¯
- [ ] è¯é¢˜åœˆå­åŠŸèƒ½
- [ ] ç§¯åˆ†å•†åŸ
- [ ] æ´»åŠ¨æŠ¥åç³»ç»Ÿ
- [ ] æ•°æ®åˆ†æåå°

### v3.0ï¼ˆæœªæ¥è§„åˆ’ï¼‰ğŸ”®
- [ ] AI æ™ºèƒ½åŠ©æ‰‹
- [ ] åŒºå—é“¾ç§¯åˆ†ç³»ç»Ÿ
- [ ] Web3 ç¤¾åŒºæ²»ç†
- [ ] NFT å¾½ç« ç³»ç»Ÿ
- [ ] è·¨å¹³å°æ¡Œé¢åº”ç”¨
- [ ] å›½é™…åŒ–å¤šè¯­è¨€æ”¯æŒ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## ğŸ‘¥ å›¢é˜Ÿ

- **é¡¹ç›®è´Ÿè´£äºº**: [@your-name](https://github.com/your-name)
- **åç«¯å¼€å‘**: [@backend-dev](https://github.com/backend-dev)
- **å‰ç«¯å¼€å‘**: [@frontend-dev](https://github.com/frontend-dev)
- **UI/UX è®¾è®¡**: [@designer](https://github.com/designer)

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **å®˜æ–¹ç½‘ç«™**: https://ieclub.online
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/your-org/ieclub/issues)
- **é‚®ç®±**: contact@ieclub.online
- **å¾®ä¿¡å…¬ä¼—å·**: IEclubå®˜æ–¹
- **QQäº¤æµç¾¤**: 123456789

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [Taro](https://taro.js.org/) - å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶
- [Prisma](https://www.prisma.io/) - ä¸‹ä¸€ä»£ ORM
- [Express.js](https://expressjs.com/) - Web æ¡†æ¶
- [Redis](https://redis.io/) - é«˜æ€§èƒ½ç¼“å­˜
- [å¾®ä¿¡å¼€æ”¾å¹³å°](https://open.weixin.qq.com/) - å°ç¨‹åºå¼€å‘æ”¯æŒ
- [é˜¿é‡Œäº‘](https://www.aliyun.com/) - äº‘æœåŠ¡æä¾›å•†

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼â­**

Made with â¤ï¸ by IEclub Team

[â¬† å›åˆ°é¡¶éƒ¨](#-ieclub---è·¨å­¦ç§‘æ™ºèƒ½äº¤æµå¹³å°)

</div>