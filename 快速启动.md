# IEClub 快速启动指南

**3 分钟启动完整项目！**

---

## 🎯 项目说明

IEClub 包含三个部分，可以同时运行：

1. **后端服务** (ieclub-backend) - 必需
2. **网页版** (ieclub-web) - 可选
3. **小程序** (ieclub-taro) - 可选

---

## 📋 准备工作

### 1. 检查环境

```bash
# Node.js >= 18.0.0
node --version

# MySQL >= 8.0
mysql --version

# Redis >= 7.0
redis-server --version
```

### 2. 克隆项目

```bash
git clone <repository-url>
cd IEclub_dev
```

---

## 🚀 启动步骤

### 第一步：启动后端 ⚙️

```bash
# 进入后端目录
cd ieclub-backend

# 安装依赖（首次运行）
npm install

# 配置环境变量
cp .env.example .env
# 编辑 .env 文件，配置数据库等信息

# 初始化数据库（首次运行）
npm run db:migrate
npm run db:seed

# 启动开发服务器
npm run dev

# ✅ 看到 "Server running on port 3000" 即成功
```

**后端地址**: http://localhost:3000

---

### 第二步：启动网页版 🌐

**新开一个终端窗口**：

```bash
# 进入网页版目录
cd ieclub-web

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev

# ✅ 看到 "Local: http://localhost:5173" 即成功
```

**网页版地址**: http://localhost:5173

**在浏览器中访问**，即可看到网页版界面！

---

### 第三步：启动小程序 📱

1. **打开微信开发者工具**
   - 如果没有，先[下载安装](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

2. **导入项目**
   - 点击 "+" 或 "导入项目"
   - 项目目录：选择 `ieclub-taro` 文件夹
   - AppID：选择 "测试号"（第一次使用）
   - 点击 "导入"

3. **编译运行**
   - 点击工具栏的 "编译" 按钮
   - ✅ 在模拟器中看到界面即成功

---

## 🎉 全部启动成功！

现在你应该有：

```
✅ 后端服务运行在 http://localhost:3000
✅ 网页版运行在 http://localhost:5173
✅ 小程序在微信开发者工具中运行
```

---

## 🧪 快速测试

### 测试网页版

1. 打开浏览器访问 http://localhost:5173
2. 点击顶部导航切换页面
3. 查看话题广场、社区、活动等页面

### 测试小程序

1. 在微信开发者工具中
2. 点击底部 TabBar 切换页面
3. 查看各个页面是否正常显示

### 测试后端

```bash
# 测试后端健康检查
curl http://localhost:3000/api/health

# 应该返回:
# {"status":"ok"}
```

---

## 🐛 常见问题

### 1. 后端启动失败

**问题**: 数据库连接失败

**解决**:
```bash
# 检查 MySQL 是否运行
# Windows
net start MySQL80

# macOS/Linux
sudo systemctl start mysql

# 检查 .env 配置是否正确
cat .env
```

### 2. 网页版启动失败

**问题**: 端口被占用

**解决**:
```bash
# 修改端口
# 编辑 ieclub-web/vite.config.js
# 将 port: 5173 改为其他端口
```

### 3. 小程序编译失败

**问题**: 找不到 app.json

**解决**:
- 确保导入的是 `ieclub-taro` 目录
- 不是项目根目录

---

## 📝 开发提示

### 修改代码后

- **网页版**: 自动热更新，无需刷新
- **小程序**: 点击 "编译" 按钮
- **后端**: nodemon 自动重启

### 查看日志

```bash
# 后端日志
cd ieclub-backend
tail -f logs/combined.log

# 网页版日志
# 在浏览器开发者工具的 Console 中查看

# 小程序日志
# 在微信开发者工具的 Console 中查看
```

### 清理缓存

```bash
# 网页版
rm -rf ieclub-web/node_modules
rm -rf ieclub-web/dist
cd ieclub-web && npm install

# 小程序
# 在微信开发者工具中点击 "清缓存" → "清除全部缓存"

# 后端
rm -rf ieclub-backend/node_modules
cd ieclub-backend && npm install
```

---

## 🔄 同时运行多个服务

推荐使用多个终端窗口：

```
Terminal 1: cd ieclub-backend && npm run dev
Terminal 2: cd ieclub-web && npm run dev
Terminal 3: 微信开发者工具
```

或者使用 **tmux** (Linux/macOS) 或 **Windows Terminal** 的多窗格功能。

---

## 📚 下一步

1. **阅读文档**
   - `README.md` - 项目总览
   - `双端开发指南.md` - 双端架构说明
   - `ieclub-web/README.md` - 网页版文档
   - `ieclub-taro/README.md` - 小程序文档

2. **查看代码**
   - 网页版页面: `ieclub-web/src/pages/`
   - 小程序页面: `ieclub-taro/pages/`
   - 后端接口: `ieclub-backend/src/routes/`

3. **开始开发**
   - 参考 `双端开发指南.md` 了解如何开发新功能
   - 两端共用一套后端 API
   - 保持设计风格统一

---

## 🎯 开发建议

### 新增功能流程

1. **先开发后端接口**
   ```bash
   cd ieclub-backend
   # 添加路由、控制器、服务
   ```

2. **再开发网页版**
   ```bash
   cd ieclub-web
   # 创建页面/组件
   # 对接 API
   ```

3. **最后开发小程序**
   ```bash
   cd ieclub-taro
   # 创建页面
   # 对接 API
   ```

### 测试流程

1. 后端 API 测试（Postman/Thunder Client）
2. 网页版功能测试（浏览器）
3. 小程序功能测试（微信开发者工具）

---

## 📞 获取帮助

- **GitHub Issues**: 提交问题和建议
- **项目文档**: 查看各 .md 文件
- **团队沟通**: 联系项目维护者

---

**祝你开发愉快！** 🎉

如有问题，欢迎随时反馈！

