[33mcommit ac720b6dd339f0d320e21137ca6f88d0e6affbb6[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m)[m
Author: xingduoweiyun <12310203@mail.sustech.edu.cn>
Date:   Sun Oct 26 14:08:52 2025 +0800

    fix infinite refresh bug

[1mdiff --git a/ieclub-taro/src/app.tsx b/ieclub-taro/src/app.tsx[m
[1mindex 43268ce8..1204bb37 100644[m
[1m--- a/ieclub-taro/src/app.tsx[m
[1m+++ b/ieclub-taro/src/app.tsx[m
[36m@@ -69,14 +69,23 @@[m [mclass App extends Component<PropsWithChildren> {[m
   forceRenderPage() {[m
     console.log('ğŸ”§ å¼ºåˆ¶æ¸²æŸ“é¡µé¢å†…å®¹...')[m
     [m
[32m+[m[32m    // å¼ºåˆ¶é‡æ–°æ¸²æŸ“Reactç»„ä»¶[m
[32m+[m[32m    this.forceUpdate()[m
[32m+[m[41m    [m
     // å°è¯•é‡æ–°è§¦å‘Taroè·¯ç”±[m
[31m-    if (window.Taro && window.Taro.getCurrentInstance) {[m
[32m+[m[32m    if (window.Taro) {[m
       try {[m
[31m-        const instance = window.Taro.getCurrentInstance()[m
[31m-        console.log('ğŸ”„ è·å–Taroå®ä¾‹:', instance)[m
[32m+[m[32m        // è·å–å½“å‰è·¯ç”±[m
[32m+[m[32m        const routes = Taro.getCurrentPages()[m
[32m+[m[32m        console.log('ğŸ”„ å½“å‰è·¯ç”±æ ˆ:', routes.length)[m
         [m
[31m-        // å¼ºåˆ¶é‡æ–°æ¸²æŸ“[m
[31m-        this.forceUpdate()[m
[32m+[m[32m        if (routes.length === 0) {[m
[32m+[m[32m          // å¦‚æœæ²¡æœ‰è·¯ç”±ï¼Œå¯¼èˆªåˆ°é¦–é¡µ[m
[32m+[m[32m          console.log('ğŸ”„ è·¯ç”±æ ˆä¸ºç©ºï¼Œé‡å®šå‘åˆ°é¦–é¡µ')[m
[32m+[m[32m          Taro.redirectTo({ url: '/pages/square/index' }).catch(err => {[m
[32m+[m[32m            console.error('âŒ é‡å®šå‘å¤±è´¥:', err)[m
[32m+[m[32m          })[m
[32m+[m[32m        }[m
       } catch (error) {[m
         console.error('âŒ å¼ºåˆ¶æ¸²æŸ“å¤±è´¥:', error)[m
       }[m
