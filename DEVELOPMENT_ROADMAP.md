# 🗺️ IEClub 开发路线图

**更新时间**: 2025-11-27 23:10  
**当前版本**: v1.7  
**当前阶段**: 前后端数据兼容性修复完成，准备进入 V2.0 功能开发

---

## 📊 当前状态总结

### ✅ V1.7 前后端数据兼容性修复（2025-11-27 夜间）

#### 已完成工作
- ✅ **话题发布修复** - 修复 `CacheManager is not defined` 错误
- ✅ **评论系统修复** - 修复数据库字段名 `user` → `author`
- ✅ **话题详情页优化** - 头像正确显示、时间格式化、字段兼容
- ✅ **广场页修复** - 支持 `topicType`/`type` 双字段名兼容
- ✅ **搜索页修复** - 类型配置添加默认值
- ✅ **Nginx 缓存优化** - 禁用 HTML 缓存，确保更新即时生效

#### 修复的关键问题
| 问题 | 原因 | 修复方案 |
|------|------|----------|
| 发布失败 500 | CacheManager 未导入 | 添加正确的导入和实例使用 |
| 评论加载超时 | asyncHandler 双重调用 | 移除冗余包装 |
| 评论查询失败 | Prisma 字段名错误 | `user` → `author` |
| 头像显示路径 | 直接输出文本 | 改用 `<img>` 标签 |
| 时间格式 | ISO 原始格式 | `toLocaleString` 格式化 |

---

### ✅ V1.6 小程序功能对齐（2025-11-27）

#### 已完成工作
- ✅ **request调用格式修复** - 修复20+处错误的API调用格式
- ✅ **用户头像显示修复** - 所有页面支持真实头像图片
- ✅ **个人主页入口** - 添加"个人主页"菜单，可查看自己的公开主页
- ✅ **菜单结构对齐** - 小程序菜单与网页版完全一致
- ✅ **图片URL处理** - 统一添加域名前缀处理
- ✅ **关注/粉丝列表** - 菜单入口+数量徽章显示

#### 修复的页面
| 页面 | 修复内容 |
|------|----------|
| `profile` | 个人主页入口、菜单重组、头像显示 |
| `edit-profile` | request格式、图片上传同步 |
| `user-profile` | 头像/封面URL、统计字段名 |
| `plaza` | 作者头像显示 |
| `community` | 用户头像显示 |
| `followers/following` | 用户头像、占位符样式 |
| `activity-detail` | 组织者头像 |
| `settings/feedback/my-*` | request格式修复 |

---

### ✅ V1.0 已完成（2025-11-21）

#### 核心功能（100%）
- ✅ **认证系统** - 邮箱注册/登录、密码管理、微信/手机绑定
- ✅ **话题广场** - 我来讲/想听/项目/分享四大板块
- ✅ **社区功能** - 用户列表、主页、排行榜、关注系统
- ✅ **发布系统** - 富文本编辑、图片/文档上传、草稿箱
- ✅ **活动管理** - 发布/报名/签到/统计全流程
- ✅ **搜索推荐** - 全局搜索、智能建议、标签系统
- ✅ **消息系统** - 系统通知、互动消息、活动提醒
- ✅ **个人中心** - 数据看板、等级积分、成就徽章

#### 管理员系统（100%）
- ✅ **用户管理** - 查看/禁用/删除用户
- ✅ **内容审核** - 帖子/评论审核管理
- ✅ **活动管理** - 活动审核与数据统计
- ✅ **公告管理** - 系统公告发布
- ✅ **数据统计** - 可视化图表与数据分析
- ✅ **RBAC权限** - 基于角色的访问控制
- ✅ **系统监控** - 性能监控、错误追踪

#### 技术优化（100%）
- ✅ **安全防护** - API速率限制、CSRF保护
- ✅ **性能优化** - Redis缓存、请求日志
- ✅ **部署自动化** - 一键部署脚本

### ✅ V1.5 已完成（2025-11-23）

#### 个人中心核心功能
- ✅ **我的话题** - 三端完整实现（后端+小程序+网页）
  - 下拉刷新 + 上拉加载更多
  - 实时统计数据（话题数、点赞、评论）
  - 骨架屏加载优化
  - 渐变色现代化UI设计
  
- ✅ **我的收藏** - 三端完整实现（后端+小程序+网页）
  - 收藏列表展示（含收藏时间）
  - 一键取消收藏（二次确认）
  - 空状态友好提示
  - 橙红色主题设计

- ✅ **账号与安全** - 三端完整实现
  - 手机号绑定/解绑
  - 微信绑定/解绑
  - 密码管理入口
  - 安全检查机制

#### 后端API补充
- ✅ 添加路由 `GET /users/:id/topics`
- ✅ 添加路由 `GET /users/:id/comments`
- ✅ 添加路由 `GET /me/bookmarks`
- ✅ 完善数据关联查询和分页

#### 代码质量提升
- ✅ 统一组件化设计模式
- ✅ 完善错误处理和用户提示
- ✅ 性能优化（分页、骨架屏、懒加载）
- ✅ 前后端功能完全对齐

---

### 🔧 最近修复（2025-11-22）

#### 安全修复
- ✅ 修复前端日志泄露密码问题
- ✅ 添加敏感数据过滤函数
- ✅ 优化401错误处理逻辑

#### 部署优化
- ✅ 关闭测试环境节省资源（2GB服务器限制）
- ✅ 优化生产环境部署流程
- ✅ 创建完整部署文档
- ✅ 简化REMIND.md为快速参考

#### 文档整理
- ✅ 创建docs/DEPLOYMENT_GUIDE.md统一部署指南
- ✅ 更新REMIND.md为日常操作流程
- ✅ 删除冗余临时文档

---

## 🎯 V2.0 开发规划

### 阶段1：核心功能增强（优先级：高）

#### 1.1 私信聊天系统 ✅ 已完成
**状态**: 网页端 + 小程序 双端已实现

**已完成功能**:
- ✅ 一对一私信
- ✅ 消息已读/未读状态
- ✅ 会话列表
- ✅ WebSocket 实时推送

---

#### 1.2 发布功能完善 ✅ 已完成
**状态**: 四大类型表单已实现

**已完成功能**:
- ✅ **我来讲** - 讲座主题、时间安排、目标人群、成团人数
- ✅ **我想听** - 需求描述、期望时长、紧急程度（4级）
- ✅ **项目** - 项目阶段、招募角色、技能要求、联系方式
- ✅ **分享** - 资源类型（6种）、下载链接、提取码

**技术实现**:
- 前端：Publish.jsx（动态表单，类型切换）
- 后端：topicController.js（字段解析和存储）
- 数据库：Topic表新增urgency、resourceType、downloadLink、extractCode字段

---

#### 1.3 活动管理完善 ✅ 已完成
**状态**: 核心功能已实现

**已完成功能**:
- ✅ 签到二维码生成（qrcode库，24小时有效）
- ✅ 活动提醒推送（node-cron定时任务，30分钟前提醒）
- ✅ 活动数据统计（总报名、已签到、未签到、签到率）
- ✅ 参与者列表管理
- ✅ 组织者专属操作面板

**技术实现**:
- 后端：activityService.js（签到验证、二维码生成）
- 定时任务：activityReminderJob.js（每分钟检查）
- 前端：ActivityDetail.jsx（二维码弹窗、统计面板）
- 路由：activities.js（完整的签到API）

---

#### 1.4 小组/圈子功能 ✅ 已完成
**状态**: 网页端 + 小程序 双端已实现

**已完成功能**:
- ✅ 创建/加入小组（公开/私密、审批制）
- ✅ 小组话题发布
- ✅ 小组成员管理（owner/admin/member三级）
- ✅ 8大分类：学习、技术、职业、兴趣、生活、运动、游戏、综合
- ✅ 热门小组推荐

**技术实现**:
- 数据库：8张新表（Group、GroupMember、GroupTopic等）
- API：13个端点（CRUD、成员管理、话题发布）
- 前端：网页Groups.jsx + 小程序pages/groups

---

#### 1.3 PWA支持
**目标**: 网页版支持离线访问和桌面安装

**功能需求**:
- [ ] Service Worker
- [ ] 离线缓存策略
- [ ] 桌面图标
- [ ] 推送通知
- [ ] 更新提示

**技术方案**:
- Workbox配置
- 缓存策略：网络优先 + 缓存降级
- Manifest.json配置

**预估工期**: 1周

---

### 阶段2：智能推荐系统（优先级：中）

#### 2.1 内容推荐算法
**目标**: 个性化内容推荐

**功能需求**:
- [ ] 基于用户兴趣推荐
- [ ] 协同过滤算法
- [ ] 热度排序优化
- [ ] 新用户冷启动

**技术方案**:
- 用户画像：标签权重
- 内容特征：TF-IDF
- 推荐算法：协同过滤 + 内容推荐
- 实时更新：Redis缓存

**预估工期**: 3周

---

#### 2.2 智能匹配
**目标**: 精准匹配学习伙伴/项目成员

**功能需求**:
- [ ] 技能匹配
- [ ] 时间匹配
- [ ] 兴趣匹配
- [ ] 匹配度打分

**技术方案**:
- 特征向量：技能+兴趣+时间
- 相似度计算：余弦相似度
- 推荐排序：综合打分

**预估工期**: 2周

---

### 阶段3：数据分析与可视化（优先级：中）

#### 3.1 用户行为分析
**目标**: 深入了解用户行为模式

**功能需求**:
- [ ] 用户活跃度分析
- [ ] 内容偏好分析
- [ ] 转化漏斗分析
- [ ] 留存率分析

**技术方案**:
- 埋点系统：关键行为追踪
- 数据存储：MongoDB/ClickHouse
- 可视化：ECharts

**预估工期**: 2周

---

#### 3.2 内容热度预测
**目标**: 预测话题/活动的热度走势

**功能需求**:
- [ ] 实时热度计算
- [ ] 热度趋势预测
- [ ] 爆款内容识别
- [ ] 热点话题挖掘

**技术方案**:
- 热度公式：浏览+点赞+评论+时间衰减
- 机器学习：简单线性回归
- 实时计算：Redis + 定时任务

**预估工期**: 2周

---

### 阶段4：移动端优化（优先级：低）

#### 4.1 网页移动端优化
**目标**: 提升移动端用户体验

**功能需求**:
- [ ] 响应式布局优化
- [ ] 触摸手势支持
- [ ] 性能优化（懒加载）
- [ ] 移动端适配完善

**预估工期**: 1周

---

#### 4.2 小程序功能同步
**目标**: 保持小程序与Web端功能一致

**功能需求**:
- [ ] 私信聊天
- [ ] 小组功能
- [ ] 推送通知
- [ ] 性能优化

**预估工期**: 根据Web端进度同步

---

## 📅 开发时间表

### Q1 2026 (1-3月)
- **私信聊天系统** (2周)
- **小组/圈子功能** (2周)
- **PWA支持** (1周)
- **内容推荐算法** (3周)
- 总计：8周

### Q2 2026 (4-6月)
- **智能匹配** (2周)
- **用户行为分析** (2周)
- **内容热度预测** (2周)
- **移动端优化** (1周)
- **小程序功能同步** (按需)
- 总计：7周 + 小程序同步

---

## 🚀 开发原则

### 1. 小步快跑
- 每个功能拆分为小迭代
- 快速上线，快速验证
- 根据反馈调整方向

### 2. 用户优先
- 功能必须解决实际问题
- 优先开发用户呼声高的功能
- 持续收集用户反馈

### 3. 技术稳定
- 优先使用成熟技术
- 避免过度设计
- 保证系统稳定性

### 4. 本地测试优先
- **重要**: 由于服务器资源限制（2GB），测试环境已关闭
- 所有功能必须在本地充分测试
- 小改动、快部署、降风险
- 关键功能建议灰度发布

---

## 🔧 技术债务

### 当前技术债
- [ ] 数据库查询优化（N+1问题）
- [ ] Redis缓存策略完善
- [ ] 图片压缩与CDN
- [ ] API文档完善
- [ ] 单元测试覆盖率提升

### 基础设施
- [ ] 服务器升级（2GB → 4GB）或独立测试服务器
- [ ] CI/CD流程优化
- [ ] 监控告警系统
- [ ] 日志分析系统

---

## 📊 成功指标

### V2.0 目标（6个月内）

**用户增长**:
- 注册用户：1000+
- 日活用户：200+
- 用户留存（7天）：>40%

**内容活跃**:
- 日均发帖：50+
- 日均评论：200+
- 活动发布：月均20+

**用户满意度**:
- 功能满意度：>4.0/5.0
- 推荐精准度：>70%
- Bug反馈解决率：>90%

---

## 💡 创新想法池

以下是收集到的创新想法，待评估可行性：

### 短期可考虑
- [ ] **学习计划追踪** - 帮助用户制定和追踪学习目标
- [ ] **技能认证系统** - 用户互相认证技能水平
- [ ] **悬赏问答** - 积分悬赏专业问题解答
- [ ] **资源交易** - 二手书籍、课程资料交换

### 中长期探索
- [ ] **AI学习助手** - 基于GPT的智能问答
- [ ] **虚拟学习小组** - 在线协作学习空间
- [ ] **职业发展规划** - AI辅助职业规划建议
- [ ] **校企合作** - 企业项目与学生对接

---

## 🎯 下一步行动

### 立即可开始（推荐优先级）

#### 1. 话题详情页完善 ⭐⭐⭐ (工期: 3天)
- **目标**: 小程序话题详情页功能与网页版对齐
- **功能需求**:
  - [ ] 话题内容完整展示
  - [ ] 评论列表显示（分页加载）
  - [ ] 发表评论功能
  - [ ] 点赞/收藏功能
  - [ ] 作者信息展示
  - [ ] 相关话题推荐

#### 2. 评论功能完善 ⭐⭐⭐ (工期: 2天)
- **目标**: 完善评论相关交互
- **功能需求**:
  - [ ] 评论回复功能
  - [ ] 评论点赞
  - [ ] 评论删除（仅本人）
  - [ ] @提及用户
  - [ ] 评论分页加载

#### 3. 消息通知优化 ⭐⭐ (工期: 2天)
- **目标**: 完善消息通知系统
- **功能需求**:
  - [ ] 消息列表展示
  - [ ] 未读消息标记
  - [ ] 消息分类（系统/互动/活动）
  - [ ] 消息详情跳转

#### 4. 搜索功能完善 ⭐ (工期: 2天)
- **目标**: 完善搜索体验
- **功能需求**:
  - [ ] 搜索历史记录
  - [ ] 热门搜索推荐
  - [ ] 搜索结果分类（话题/用户/活动）
  - [ ] 搜索结果高亮

### 中期规划（本月）
1. ✅ ~~完成个人中心所有功能~~ 已完成
2. 优化话题详情页评论功能
3. 完善搜索和推荐功能
4. 用户测试与体验优化
5. 发布流程优化

### 长期规划（参考V2.0）
1. 📋 评估私信聊天系统技术方案
2. 📋 设计Message数据表结构
3. 📋 调研Socket.io最佳实践
4. 📋 小组/圈子功能设计

---

**文档维护**: 此文档每完成一个重要功能后更新一次。

**最后更新**: 2025-11-27 19:20
