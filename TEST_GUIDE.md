# IEClub 产品测试指南

> **版本**: V4.3  
> **更新日期**: 2025-11-29  
> **测试范围**: 网页端 + 微信小程序 + 后端API

---

## 目录

1. [测试环境](#测试环境)
2. [网页端测试](#网页端测试)
3. [小程序端测试](#小程序端测试)
4. [后端API测试](#后端api测试)
5. [自动化测试](#自动化测试)
6. [性能测试](#性能测试)
7. [测试检查清单](#测试检查清单)

---

## 测试环境

### 环境地址

| 环境 | 网页端 | API | 说明 |
|------|--------|-----|------|
| 生产环境 | https://ieclub.online | https://ieclub.online/api | 正式用户使用 |
| 本地开发 | http://localhost:5173 | http://localhost:3000/api | 开发调试 |

### 测试账号

```
普通用户测试账号：
- 手机号：使用真实手机号注册测试
- 邮箱：使用真实邮箱注册测试

管理员账号：
- 登录地址：https://ieclub.online/admin
- 账号：联系管理员获取
```

### 测试工具

| 工具 | 用途 |
|------|------|
| Chrome DevTools | 网页调试、网络请求分析 |
| Postman/Insomnia | API接口测试 |
| 微信开发者工具 | 小程序调试 |
| Lighthouse | PWA/性能测试 |

---

## 网页端测试

### 1. 认证模块

#### 1.1 注册功能
```
测试步骤：
1. 访问 https://ieclub.online/register
2. 输入手机号/邮箱
3. 设置密码（需满足强度要求）
4. 点击注册

验证点：
✅ 表单验证正确（手机号格式、密码强度）
✅ 重复注册提示已存在
✅ 注册成功跳转到广场页
✅ 自动登录状态保持
```

#### 1.2 登录功能
```
测试步骤：
1. 访问 https://ieclub.online/login
2. 输入账号密码
3. 点击登录

验证点：
✅ 账号密码错误提示
✅ 登录成功跳转
✅ Token正确存储
✅ 登录状态保持（刷新页面）
```

#### 1.3 退出登录
```
测试步骤：
1. 点击头像 → 设置
2. 点击退出登录

验证点：
✅ Token清除
✅ 跳转到登录页
✅ 需登录页面拦截正确
```

### 2. 广场模块

#### 2.1 话题列表
```
测试步骤：
1. 访问 https://ieclub.online/plaza
2. 滚动加载更多
3. 切换筛选条件

验证点：
✅ 首页加载正常
✅ 下拉刷新工作
✅ 无限滚动加载
✅ 类型筛选正确
✅ 搜索功能正常
```

#### 2.2 话题详情
```
测试步骤：
1. 点击任意话题卡片
2. 查看详情内容
3. 进行互动操作

验证点：
✅ 详情页加载完整
✅ 图片正常显示
✅ 头像正确渲染（非路径文本）
✅ 点赞/取消点赞
✅ 收藏/取消收藏
✅ 评论发布和显示
✅ 评论头像正确显示
✅ 分享功能
✅ 作者可见删除按钮
✅ 删除功能（确认弹窗）
```

### 3. 发布模块

#### 3.1 我想听发布
```
测试步骤：
1. 点击发布按钮
2. 选择「我想听」
3. 填写表单
4. 发布

验证点：
✅ 类型切换正确
✅ 必填项验证
✅ 紧急程度选择
✅ 标签添加/删除
✅ 图片上传（最多9张）
✅ 发布成功跳转
```

#### 3.2 我来讲发布
```
验证点：
✅ 目标听众输入
✅ 期望时长选择
✅ 成团人数设置（5-100）
```

#### 3.3 项目发布
```
验证点：
✅ 项目阶段选择
✅ 团队规模输入
✅ 招募角色添加/删除
✅ 技能要求添加/删除
✅ 网站/GitHub链接
✅ 联系方式
```

#### 3.4 分享发布
```
验证点：
✅ 资源类型选择（6种）
✅ 下载链接输入
✅ 提取码输入
```

### 4. 活动模块

#### 4.1 活动列表
```
测试步骤：
1. 访问 https://ieclub.online/activities
2. 浏览活动列表

验证点：
✅ 活动卡片显示正确
✅ 时间显示正确
✅ 分类筛选
✅ 加载更多
```

#### 4.2 活动详情与报名
```
测试步骤：
1. 点击活动进入详情
2. 点击报名

验证点：
✅ 活动信息完整
✅ 报名成功提示
✅ 报名状态显示
✅ 取消报名功能
```

#### 4.3 活动签到（组织者）
```
测试步骤：
1. 以组织者身份进入自己创建的活动
2. 点击「生成签到二维码」
3. 查看签到统计

验证点：
✅ 二维码正确生成
✅ 二维码24小时有效
✅ 签到统计准确
✅ 参与者列表显示
```

### 5. 小组模块

#### 5.1 小组列表
```
测试步骤：
1. 访问 https://ieclub.online/groups
2. 切换「发现」/「我的」Tab
3. 按分类筛选

验证点：
✅ 热门小组显示
✅ 分类筛选正确
✅ 搜索功能
✅ 我的小组列表
```

#### 5.2 小组详情
```
验证点：
✅ 小组信息显示
✅ 加入/退出功能
✅ 话题列表
✅ 成员列表
✅ 发布话题
```

#### 5.3 创建小组
```
验证点：
✅ 表单验证
✅ 分类选择
✅ 公开/私密设置
✅ 创建成功
```

### 6. 私信模块

#### 6.1 发送私信
```
测试步骤：
1. 进入他人个人主页
2. 点击私信按钮
3. 发送消息

验证点：
✅ 消息发送成功
✅ 实时显示
✅ 消息状态更新
```

#### 6.2 会话列表
```
验证点：
✅ 会话列表显示
✅ 未读消息提示
✅ 最后消息预览
✅ 会话排序（最新在前）
```

### 7. PWA功能

#### 7.1 安装测试
```
测试步骤：
1. 使用Chrome访问网站
2. 等待安装提示出现
3. 点击安装

验证点：
✅ 安装提示显示
✅ 安装成功
✅ 桌面图标正确
✅ 独立窗口打开
```

#### 7.2 离线测试
```
测试步骤：
1. 正常访问网站，浏览一些页面
2. 打开DevTools → Network → Offline
3. 刷新页面

验证点：
✅ 已缓存页面可访问
✅ 离线提示正确
```

#### 7.3 更新测试
```
验证点：
✅ 有新版本时弹出更新提示
✅ 点击更新后刷新生效
```

---

## 小程序端测试

### 测试前准备

1. 下载微信开发者工具
2. 导入项目：`ieclub-frontend` 目录
3. 配置 AppID（联系管理员获取）

### 1. 登录模块

#### 1.1 微信登录
```
测试步骤：
1. 打开小程序
2. 点击「微信一键登录」
3. 授权用户信息

验证点：
✅ 获取微信用户信息
✅ 登录成功跳转
✅ 用户信息正确存储
```

### 2. 首页模块

#### 2.1 轮播图
```
验证点：
✅ 轮播图加载
✅ 自动轮播
✅ 手动滑动
✅ 点击跳转
```

#### 2.2 话题瀑布流
```
验证点：
✅ 话题卡片显示
✅ 图片正确加载
✅ 下拉刷新
✅ 上拉加载更多
```

### 3. 发布模块

```
测试步骤：
1. 点击底部Tab「发布」
2. 选择发布类型
3. 填写内容
4. 发布

验证点：
✅ 各类型表单正确
✅ 图片上传（微信相册/拍照）
✅ 内容安全检测
✅ 发布成功提示
```

### 4. 活动模块

#### 4.1 活动列表
```
验证点：
✅ 活动卡片显示
✅ 分类筛选
✅ 日期显示正确
```

#### 4.2 活动报名
```
验证点：
✅ 报名流程
✅ 报名状态
✅ 取消报名
```

#### 4.3 活动签到
```
验证点：
✅ 扫码签到
✅ 手动签到（活动进行中）
✅ 签到成功提示
```

### 5. 小组模块

```
验证点：
✅ 小组列表加载
✅ 分类筛选
✅ 加入/退出小组
✅ 小组详情页
✅ 话题发布
```

### 6. 消息模块

```
验证点：
✅ 会话列表
✅ 未读消息数
✅ 消息发送/接收
✅ 消息实时推送
```

### 7. 我的模块

```
验证点：
✅ 个人信息显示
✅ 头像/昵称修改
✅ 我的话题
✅ 我的收藏
✅ 我的活动
✅ 设置页面
```

### 8. 签到模块

```
测试步骤：
1. 进入「我的」→「签到」
2. 点击签到按钮

验证点：
✅ 签到成功积分增加
✅ 连续签到天数
✅ 签到日历显示
✅ 防止重复签到
```

---

## 后端API测试

### 测试工具配置

```
Base URL: https://ieclub.online/api/v1
Headers:
  Content-Type: application/json
  Authorization: Bearer <token>
```

### 1. 认证接口

```http
# 登录
POST /auth/login
{
  "phone": "13800138000",
  "password": "password123"
}

# 注册
POST /auth/register
{
  "phone": "13800138000",
  "password": "password123",
  "nickname": "测试用户"
}

# 获取当前用户
GET /auth/me
```

### 2. 话题接口

```http
# 获取话题列表
GET /topics?page=1&limit=20&topicType=offer

# 获取话题详情
GET /topics/:id

# 创建话题
POST /topics
{
  "title": "测试话题",
  "content": "测试内容",
  "category": "技术",
  "topicType": "offer",
  "tags": ["Python", "机器学习"]
}

# 点赞话题
POST /topics/:id/like

# 收藏话题
POST /topics/:id/bookmark
```

### 3. 活动接口

```http
# 获取活动列表
GET /activities?page=1&limit=20

# 获取活动详情
GET /activities/:id

# 创建活动
POST /activities
{
  "title": "测试活动",
  "description": "活动描述",
  "location": "图书馆",
  "startTime": "2025-12-01T14:00:00Z",
  "endTime": "2025-12-01T16:00:00Z",
  "maxParticipants": 50,
  "category": "讲座"
}

# 报名活动
POST /activities/:id/join

# 签到
POST /activities/:id/checkin
{
  "token": "签到令牌"
}

# 生成签到二维码
GET /activities/:id/qrcode

# 获取签到统计
GET /activities/:id/checkin-stats
```

### 4. 小组接口

```http
# 获取小组列表
GET /groups?page=1&limit=20&category=tech

# 获取热门小组
GET /groups/hot

# 创建小组
POST /groups
{
  "name": "测试小组",
  "description": "小组描述",
  "category": "tech",
  "isPublic": true
}

# 加入小组
POST /groups/:id/join

# 退出小组
POST /groups/:id/leave

# 获取小组话题
GET /groups/:id/topics

# 发布小组话题
POST /groups/:id/topics
{
  "title": "话题标题",
  "content": "话题内容"
}
```

### 5. 私信接口

```http
# 获取会话列表
GET /messages/conversations

# 获取聊天记录
GET /messages/conversations/:conversationId

# 发送私信
POST /messages
{
  "receiverId": "用户ID",
  "content": "消息内容"
}
```

---

## 自动化测试

### 单元测试

```bash
# 后端单元测试
cd ieclub-backend
npm test

# 前端单元测试
cd ieclub-web
npm test
```

### E2E测试（推荐）

```bash
# 安装Playwright
npm install -D @playwright/test

# 运行测试
npx playwright test
```

### 测试脚本示例

```javascript
// tests/login.spec.js
import { test, expect } from '@playwright/test';

test('用户登录流程', async ({ page }) => {
  await page.goto('https://ieclub.online/login');
  
  await page.fill('input[name="phone"]', '13800138000');
  await page.fill('input[name="password"]', 'password123');
  await page.click('button[type="submit"]');
  
  await expect(page).toHaveURL(/.*plaza/);
});
```

---

## 性能测试

### Lighthouse 测试

```bash
# 安装
npm install -g lighthouse

# 运行测试
lighthouse https://ieclub.online --view
```

### 性能指标目标

| 指标 | 目标值 | 说明 |
|------|--------|------|
| FCP | < 2s | 首次内容绘制 |
| LCP | < 2.5s | 最大内容绘制 |
| TTI | < 3s | 可交互时间 |
| CLS | < 0.1 | 累积布局偏移 |

### 压力测试

```bash
# 使用 autocannon
npx autocannon -c 100 -d 30 https://ieclub.online/api/v1/topics
```

---

## 测试检查清单

### 发布前必测项目

#### 核心功能
- [ ] 用户注册/登录
- [ ] 话题发布（4种类型）
- [ ] 话题浏览/搜索
- [ ] 点赞/收藏/评论
- [ ] 话题删除（作者删除自己的话题）
- [ ] 活动报名/签到
- [ ] 小组加入/话题发布
- [ ] 私信发送/接收

#### 兼容性
- [ ] Chrome 最新版
- [ ] Safari 最新版
- [ ] Firefox 最新版
- [ ] iOS Safari
- [ ] Android Chrome
- [ ] 微信内置浏览器

#### 响应式
- [ ] 桌面端（1920px）
- [ ] 平板端（768px）
- [ ] 手机端（375px）

#### PWA
- [ ] 安装提示
- [ ] 离线访问
- [ ] 更新提示

#### 安全
- [ ] XSS 防护
- [ ] CSRF 防护
- [ ] 敏感信息加密
- [ ] API 权限验证

---

## 问题反馈

发现Bug请记录：
1. 复现步骤
2. 期望结果
3. 实际结果
4. 截图/录屏
5. 设备/浏览器信息

提交到项目Issue或联系开发团队。

---

*测试是质量的保障，每次发布前请完成检查清单！* ✅
