# 🏗️ IEClub 社群管理系统 - 完整项目结构

## 📦 项目总览

```
ieclub_dev/
├── ieclub-backend/          # 后端服务 (Node.js + Prisma + MySQL)
├── ieclub-taro/             # 前端应用 (Taro + React)
└── docs/                    # 文档目录
```

---

## 🔧 后端结构 (ieclub-backend/)

```
ieclub-backend/
├── prisma/
│   ├── schema.prisma        # 数据库模型定义 ⭐
│   └── migrations/          # 数据库迁移记录
│
├── src/
│   ├── server.js            # 服务器入口 ⭐
│   ├── app.js               # Express 应用配置 ⭐
│   │
│   ├── config/              # 配置文件
│   │   ├── database.js      # 数据库配置
│   │   ├── wechat.js        # 微信配置
│   │   └── constants.js     # 常量定义
│   │
│   ├── routes/              # 路由定义 ⭐
│   │   ├── index.js         # 路由聚合
│   │   ├── auth.js          # 认证路由
│   │   ├── users.js         # 用户路由
│   │   ├── topics.js        # 话题路由 ⭐
│   │   ├── comments.js      # 评论路由
│   │   ├── projects.js      # 项目路由
│   │   └── upload.js        # 文件上传路由
│   │
│   ├── controllers/         # 控制器 ⭐
│   │   ├── authController.js
│   │   ├── userController.js
│   │   ├── topicController.js    # 话题控制器 ⭐
│   │   ├── commentController.js
│   │   ├── projectController.js
│   │   └── uploadController.js
│   │
│   ├── services/            # 业务逻辑层
│   │   ├── wechatService.js      # 微信服务
│   │   ├── recommendService.js   # 推荐算法 ⭐
│   │   ├── notificationService.js
│   │   └── uploadService.js
│   │
│   ├── middleware/          # 中间件
│   │   ├── auth.js          # JWT 认证
│   │   ├── errorHandler.js  # 错误处理
│   │   ├── validator.js     # 请求验证
│   │   └── rateLimiter.js   # 频率限制
│   │
│   └── utils/               # 工具函数
│       ├── logger.js        # 日志工具
│       ├── response.js      # 响应格式化
│       └── helpers.js       # 辅助函数
│
├── scripts/                 # 脚本工具
│   ├── seed.js              # 数据填充脚本 ⭐
│   └── testData.js          # 测试数据生成
│
├── tests/                   # 测试文件
│   ├── unit/
│   └── integration/
│
├── .env                     # 环境变量 (不提交)
├── .env.example             # 环境变量模板
├── package.json             # 依赖管理
├── ecosystem.config.js      # PM2 配置
└── README.md
```

---

## 🎨 前端结构 (ieclub-taro/)

```
ieclub-taro/
├── src/
│   ├── app.config.ts        # 应用配置 ⭐
│   ├── app.tsx              # 应用入口
│   ├── app.scss             # 全局样式
│   │
│   ├── pages/               # 页面组件 ⭐
│   │   ├── index/           # 首页(广场) ⭐
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   │
│   │   ├── topics/          # 话题页面 ⭐⭐⭐
│   │   │   ├── index/           # 话题列表
│   │   │   │   ├── index.tsx
│   │   │   │   ├── index.config.ts
│   │   │   │   └── index.scss
│   │   │   ├── create/          # 创建话题
│   │   │   │   ├── index.tsx
│   │   │   │   └── index.scss
│   │   │   └── detail/          # 话题详情
│   │   │       ├── index.tsx
│   │   │       └── index.scss
│   │   │
│   │   ├── projects/        # 项目页面
│   │   │   ├── index/
│   │   │   └── detail/
│   │   │
│   │   ├── profile/         # 个人中心
│   │   │   ├── index/
│   │   │   └── edit/
│   │   │
│   │   └── auth/            # 认证页面
│   │       └── login/
│   │
│   ├── components/          # 公共组件 ⭐
│   │   ├── TabBar/          # 底部导航 ⭐
│   │   │   ├── index.tsx
│   │   │   └── index.scss
│   │   │
│   │   ├── TopicCard/       # 话题卡片 ⭐
│   │   │   ├── index.tsx
│   │   │   └── index.scss
│   │   │
│   │   ├── FloatButton/     # 悬浮按钮(加号) ⭐
│   │   │   ├── index.tsx
│   │   │   └── index.scss
│   │   │
│   │   ├── ImageUploader/   # 图片上传
│   │   ├── CommentList/     # 评论列表
│   │   └── UserAvatar/      # 用户头像
│   │
│   ├── services/            # API 服务 ⭐
│   │   ├── request.ts       # 请求封装
│   │   ├── auth.ts          # 认证 API
│   │   ├── topic.ts         # 话题 API ⭐
│   │   ├── project.ts       # 项目 API
│   │   └── user.ts          # 用户 API
│   │
│   ├── store/               # 状态管理 (Zustand/Redux)
│   │   ├── user.ts          # 用户状态
│   │   ├── topic.ts         # 话题状态
│   │   └── app.ts           # 应用状态
│   │
│   ├── utils/               # 工具函数
│   │   ├── formatTime.ts    # 时间格式化
│   │   ├── storage.ts       # 本地存储
│   │   └── validator.ts     # 验证工具
│   │
│   ├── styles/              # 样式文件
│   │   ├── variables.scss   # SCSS 变量
│   │   ├── mixins.scss      # SCSS 混入
│   │   └── common.scss      # 公共样式
│   │
│   └── types/               # TypeScript 类型定义
│       ├── topic.ts         # 话题类型
│       ├── user.ts          # 用户类型
│       └── common.ts        # 公共类型
│
├── config/                  # 构建配置
│   ├── index.js             # 主配置
│   ├── dev.js               # 开发环境
│   └── prod.js              # 生产环境
│
├── dist/                    # 构建输出 (不提交)
├── package.json
├── tsconfig.json            # TypeScript 配置
└── project.config.json      # 小程序配置
```

---

## 🗂️ 数据库表结构

### 核心表

1. **User** - 用户表
2. **Topic** - 话题表 ⭐⭐⭐
3. **Comment** - 评论表
4. **Like** - 点赞表
5. **Project** - 项目表
6. **Notification** - 通知表
7. **TopicQuickAction** - 话题快速操作记录
8. **UserAction** - 用户行为记录(用于推荐)

---

## 🔑 关键功能模块

### 1. 话题系统 (Topics) ⭐⭐⭐
- 话题列表(筛选、排序、分页)
- 创建话题(多媒体、标签、快速操作)
- 话题详情(评论、点赞、分享)
- 智能推荐

### 2. 项目系统 (Projects)
- 项目发布
- 项目匹配

### 3. 用户系统 (Users)
- 微信登录
- 个人资料
- 积分系统

### 4. 互动系统
- 评论(支持多层嵌套)
- 点赞
- 收藏
- 通知

---

## 📝 需要编写的核心文件 (按优先级)

### 🔥 P0 - 立即需要
1. `ieclub-backend/prisma/schema.prisma` - 数据库模型
2. `ieclub-backend/src/controllers/topicController.js` - 话题控制器
3. `ieclub-backend/src/routes/topics.js` - 话题路由
4. `ieclub-backend/scripts/seed.js` - 数据填充脚本
5. `ieclub-taro/src/pages/topics/index/index.tsx` - 话题列表页
6. `ieclub-taro/src/components/FloatButton/index.tsx` - 悬浮加号按钮
7. `ieclub-taro/src/components/TopicCard/index.tsx` - 话题卡片组件

### ⚡ P1 - 优先级高
8. `ieclub-backend/src/services/recommendService.js` - 推荐算法
9. `ieclub-taro/src/pages/topics/create/index.tsx` - 创建话题页
10. `ieclub-taro/src/pages/topics/detail/index.tsx` - 话题详情页
11. `ieclub-taro/src/components/TabBar/index.tsx` - 底部导航
12. `ieclub-taro/src/services/topic.ts` - 话题 API

### 📦 P2 - 后续完善
13. 评论系统
14. 通知系统
15. 搜索功能
16. 个人中心

---

## 🚀 部署流程

1. **开发环境**
   ```bash
   # 后端
   cd ieclub-backend
   npm install
   npx prisma migrate dev
   npm run dev
   
   # 前端
   cd ieclub-taro
   npm install
   npm run dev:h5
   ```

2. **生产部署**
   ```bash
   # 后端
   pm2 start ecosystem.config.js
   
   # 前端
   npm run build:h5
   scp dist.zip root@server:/var/www/
   ```
