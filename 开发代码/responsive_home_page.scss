// ieclub-taro/src/pages/index/index.responsive.scss
// 首页响应式样式 - 小红书风格

@import '../../styles/responsive.scss';

// ==================== 网页端布局容器 ====================
.index-page {
  min-height: 100vh;
  background: #f7f8fa;

  // 网页端：使用容器限制宽度
  @include respond-above('desktop') {
    @include container(1440px);
    padding-top: 24px;
  }
}

// ==================== 顶部搜索栏 ====================
.index-page__header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: #ffffff;
  padding: 12px 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);

  @include respond-above('desktop') {
    border-radius: 16px;
    margin-bottom: 24px;
    padding: 16px 24px;
  }
}

.search-bar {
  display: flex;
  align-items: center;
  background: #f5f5f5;
  border-radius: 24px;
  padding: 10px 16px;
  transition: all 0.3s $ease-smooth;

  &:focus-within {
    background: #ffffff;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
  }

  @include respond-above('desktop') {
    max-width: 600px;
    margin: 0 auto;
    padding: 12px 20px;
  }
}

// ==================== 筛选标签栏 ====================
.index-page__filters {
  padding: 12px 16px;
  background: #ffffff;
  margin-bottom: 16px;
  overflow-x: auto;
  white-space: nowrap;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
  }

  @include respond-above('desktop') {
    display: flex;
    justify-content: center;
    gap: 16px;
    padding: 16px 24px;
    border-radius: 16px;
    overflow: visible;
    white-space: normal;
  }
}

.filter-chip {
  display: inline-block;
  padding: 8px 20px;
  margin-right: 12px;
  border-radius: 20px;
  background: #f5f5f5;
  font-size: 14px;
  color: #666666;
  transition: all 0.3s $ease-smooth;
  cursor: pointer;

  &:hover {
    background: #e8e8e8;
    transform: translateY(-2px);
  }

  &--active {
    @include ieclub-gradient;
    color: #ffffff;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
  }

  @include respond-above('desktop') {
    margin-right: 0;
    padding: 10px 24px;
    font-size: 15px;
  }
}

// ==================== 话题列表 - 瀑布流布局 ====================
.index-page__content {
  padding: 0 16px 80px;

  // 移动端：2列瀑布流
  @include waterfall(2, 12px);

  // 平板：3列
  @include respond-above('tablet') {
    @include waterfall(3, 16px);
  }

  // 桌面端：4列
  @include respond-above('desktop') {
    @include waterfall(4, 20px);
    padding: 0 24px 80px;
  }

  // 大屏：5列
  @include respond-above('desktop-l') {
    @include waterfall(5, 24px);
  }
}

// ==================== 小红书风格话题卡片 ====================
.topic-card-xiaohongshu {
  @include xiaohongshu-card;
  cursor: pointer;
  margin-bottom: 12px;

  @include respond-above('desktop') {
    margin-bottom: 16px;
  }

  // 图片容器
  &__image-wrapper {
    position: relative;
    width: 100%;
    padding-top: 133%; // 3:4 比例（小红书风格）
    overflow: hidden;
    background: #f0f0f0;
  }

  &__image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s $ease-out-expo;
  }

  &:hover &__image {
    transform: scale(1.1);
  }

  // 类型标签
  &__type-badge {
    position: absolute;
    top: 12px;
    left: 12px;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    color: #ffffff;
    @include glassmorphism(20px, 0.3);

    &--demand {
      background: rgba(255, 107, 107, 0.9);
    }

    &--supply {
      background: rgba(82, 196, 26, 0.9);
    }
  }

  // 内容区域
  &__content {
    padding: 12px;

    @include respond-above('desktop') {
      padding: 16px;
    }
  }

  &__title {
    font-size: 14px;
    font-weight: 600;
    color: #1a1a1a;
    line-height: 1.4;
    margin-bottom: 8px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;

    @include respond-above('desktop') {
      font-size: 15px;
    }
  }

  &__description {
    font-size: 13px;
    color: #666666;
    line-height: 1.5;
    margin-bottom: 12px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;

    @include respond-above('desktop') {
      font-size: 14px;
    }
  }

  // 用户信息条
  &__author {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-top: 8px;
    border-top: 1px solid #f0f0f0;
  }

  &__avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    object-fit: cover;

    @include respond-above('desktop') {
      width: 28px;
      height: 28px;
    }
  }

  &__nickname {
    flex: 1;
    font-size: 12px;
    color: #999999;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    @include respond-above('desktop') {
      font-size: 13px;
    }
  }

  // 互动数据
  &__stats {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 8px;
  }

  &__stat-item {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: #999999;

    &-icon {
      font-size: 14px;
    }
  }
}

// ==================== 悬浮发布按钮 ====================
.floating-action-button {
  position: fixed;
  right: 20px;
  bottom: 80px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  @include ieclub-gradient;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
  cursor: pointer;
  transition: all 0.3s $ease-out-back;
  z-index: 999;

  &:hover {
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 12px 32px rgba(102, 126, 234, 0.5);
  }

  &:active {
    transform: scale(0.95) rotate(90deg);
  }

  &__icon {
    font-size: 28px;
    color: #ffffff;
    font-weight: 300;
  }

  @include respond-above('desktop') {
    right: 40px;
    bottom: 40px;
    width: 64px;
    height: 64px;

    &__icon {
      font-size: 32px;
    }
  }
}

// ==================== 加载更多 ====================
.index-page__loading {
  text-align: center;
  padding: 32px 0;
  font-size: 14px;
  color: #999999;
}

// ==================== 空状态 ====================
.empty-state {
  text-align: center;
  padding: 80px 20px;

  &__icon {
    font-size: 64px;
    margin-bottom: 16px;
    opacity: 0.5;
  }

  &__message {
    font-size: 16px;
    color: #999999;
    margin-bottom: 8px;
  }

  &__description {
    font-size: 14px;
    color: #cccccc;
  }

  @include respond-above('desktop') {
    padding: 120px 20px;

    &__icon {
      font-size: 80px;
    }
  }
}
