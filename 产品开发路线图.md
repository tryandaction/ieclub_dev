# IEClub 产品开发路线图

**版本**: v2.0 双端统一架构  
**制定时间**: 2025-10-29  
**制定人**: 产品团队 + 技术团队

---

## 🎯 产品愿景

**打造国内领先的学术创业社区平台，连接每一个有想法、有能力、有需求的人。**

### 核心价值主张

1. **知识变现** - 让知识分享者获得认可与回报
2. **需求对接** - 让学习需求快速找到合适的讲师
3. **创业孵化** - 让优秀项目获得曝光与支持
4. **社区连接** - 让志同道合的人相互发现

---

## 📊 MVP 功能定义（最小可行产品）

### 🎯 Phase 1: 核心闭环（2周）

**目标**: 实现完整的话题发布-浏览-互动闭环

#### 1.1 用户系统 👤
- [ ] **用户注册登录**
  - 网页版：手机号 + 验证码登录
  - 小程序：微信授权登录
  - 后端：JWT Token 统一认证
  - 优先级：🔴 P0（必须）
  - 工时：3天
  
- [ ] **用户基础信息**
  - 姓名、头像、专业、年级
  - 等级和积分系统
  - 个人简介
  - 优先级：🔴 P0
  - 工时：2天

#### 1.2 话题系统 📝
- [ ] **话题发布**
  - 三种类型：我来讲、想听、项目
  - 标题、描述、标签
  - 图片上传（可选）
  - 优先级：🔴 P0
  - 工时：3天

- [ ] **话题浏览**
  - 列表展示（瀑布流）
  - Tab 筛选（推荐/我来讲/想听/项目）
  - 下拉刷新、上拉加载
  - 优先级：🔴 P0
  - 工时：2天

- [ ] **话题详情**
  - 完整内容展示
  - 作者信息
  - 统计数据
  - 优先级：🔴 P0
  - 工时：2天

#### 1.3 基础互动 💬
- [ ] **点赞功能**
  - 点赞/取消点赞
  - 点赞数统计
  - 优先级：🟡 P1（重要）
  - 工时：1天

- [ ] **评论功能**
  - 发表评论
  - 评论列表
  - 优先级：🟡 P1
  - 工时：2天

**Phase 1 总工时**: 15天（约3周，考虑联调测试）

---

## 📋 详细开发计划

### Week 1: 基础设施搭建

#### Day 1-2: API 统一封装 🔧

**负责人**: 技术负责人  
**交付物**: 
- `ieclub-web/src/utils/request.js` - 网页版请求封装
- `ieclub-taro/utils/request.js` - 小程序请求封装
- 统一的错误处理
- Token 自动注入
- Loading 状态管理

**验收标准**:
```javascript
// 使用示例
import { request } from '@/utils/request'

// GET 请求
const topics = await request.get('/topics')

// POST 请求
const result = await request.post('/topics', data)

// 自动处理：
// ✅ Token 注入
// ✅ 错误提示
// ✅ Loading 状态
```

#### Day 3-4: 用户认证系统 👤

**功能点**:
1. **登录页面**
   - 网页版：手机号 + 验证码
   - 小程序：微信授权按钮
   
2. **Token 管理**
   - 登录成功存储 Token
   - 请求自动携带
   - Token 过期处理
   
3. **登录状态判断**
   - 路由守卫（网页版）
   - 页面进入判断（小程序）
   - 未登录跳转登录页

**验收标准**:
- ✅ 用户可以成功登录
- ✅ Token 正确存储和使用
- ✅ 登录状态持久化
- ✅ 两端体验一致

#### Day 5: 用户信息展示

**功能点**:
1. **获取当前用户信息**
2. **个人中心页展示**
   - 头像、姓名、专业
   - 等级、积分
   - 统计数据
3. **编辑资料页**（简化版）

---

### Week 2: 核心功能开发

#### Day 6-7: 话题发布功能 ✍️

**产品需求**:

**页面结构**:
```
发布页面
├── 类型选择器（必选）
│   ├── 🎤 我来讲 - 蓝色渐变
│   ├── 👂 想听 - 粉色渐变
│   └── 🚀 项目 - 橙色渐变
├── 标题输入（必填，50字内）
├── 详细描述（必填，500字内）
├── 标签选择（选填，最多3个）
├── 图片上传（选填，最多3张）
└── 发布按钮
```

**表单验证**:
- 标题不能为空
- 描述不能为空
- 标题长度限制
- 图片大小限制（2MB）

**交互流程**:
1. 用户选择类型 → 样式切换
2. 填写表单 → 实时验证
3. 点击发布 → Loading → 成功提示 → 跳转到详情页

**验收标准**:
- ✅ 表单验证完整
- ✅ 图片上传正常
- ✅ 发布成功后可在列表看到
- ✅ 两端体验一致

#### Day 8-9: 话题列表与筛选 📱

**产品需求**:

**页面结构**:
```
话题广场
├── Tab 切换栏
│   ├── ✨ 推荐（默认）
│   ├── 🎤 我来讲
│   ├── 👂 想听
│   └── 🚀 项目
├── 话题列表（瀑布流）
│   └── 话题卡片
│       ├── 封面区（渐变背景 + Emoji）
│       ├── 标题（最多2行）
│       ├── 作者信息（头像 + 姓名 + 等级）
│       ├── 标签（最多3个）
│       └── 统计（点赞 + 评论 + 浏览）
└── 刷新/加载更多
```

**数据加载策略**:
- 首次加载：20条数据
- 下拉刷新：清空 + 重新加载
- 上拉加载：追加20条
- 切换 Tab：重新加载

**性能优化**:
- 图片懒加载
- 虚拟列表（数据量大时）
- 缓存策略（5分钟内使用缓存）

**验收标准**:
- ✅ 列表正常展示
- ✅ Tab 切换流畅
- ✅ 刷新/加载更多正常
- ✅ 性能流畅（60fps）

#### Day 10-11: 话题详情页 📄

**产品需求**:

**页面结构**:
```
话题详情
├── 返回按钮
├── 话题头部
│   ├── 类型标识
│   ├── 标题（大号字体）
│   ├── 作者卡片
│   │   ├── 头像
│   │   ├── 姓名 + 等级
│   │   ├── 专业 + 年级
│   │   └── 关注按钮
│   └── 发布时间
├── 话题内容
│   ├── 详细描述
│   ├── 图片（如有）
│   └── 标签
├── 统计数据
│   ├── 👀 浏览数
│   ├── ❤️ 点赞数
│   └── 💬 评论数
├── 互动按钮栏
│   ├── 点赞按钮
│   ├── 评论按钮
│   └── 分享按钮
└── 评论区（Phase 2）
```

**交互设计**:
- 点击作者卡片 → 进入作者主页
- 点击点赞 → 红心动画 + 数量+1
- 点击评论 → 滚动到评论区
- 点击分享 → 分享弹窗

**验收标准**:
- ✅ 内容完整展示
- ✅ 作者信息正确
- ✅ 点赞功能正常
- ✅ 动画效果流畅

---

### Week 3: 完善与测试

#### Day 12-13: 社区功能 👥

**功能点**:
1. **用户列表展示**
2. **关注/取消关注**
3. **用户详情页**（简化版）

**优先级**: 🟡 P1

#### Day 14: 集成测试 🧪

**测试内容**:
1. **功能测试**
   - 所有核心功能走一遍
   - 边界条件测试
   - 异常流程测试

2. **兼容性测试**
   - 不同浏览器（Chrome, Safari, Edge）
   - 不同手机（iOS, Android 微信）
   - 不同屏幕尺寸

3. **性能测试**
   - 首屏加载时间 < 2s
   - 列表滚动流畅度
   - 内存占用合理

4. **双端一致性测试**
   - 功能一致
   - 数据同步
   - 体验一致

#### Day 15: Bug 修复与优化

**重点**:
- 修复测试发现的问题
- 优化用户体验细节
- 完善错误提示
- 添加加载动画

---

## 🎨 设计规范细化

### 色彩系统

```css
/* 品牌色 */
--primary: #8b5cf6;           /* 主色调 - 紫色 */
--primary-light: #a78bfa;     /* 浅紫 */
--primary-dark: #7c3aed;      /* 深紫 */

/* 功能色 */
--success: #10b981;           /* 成功 - 绿色 */
--warning: #f59e0b;           /* 警告 - 橙色 */
--error: #ef4444;             /* 错误 - 红色 */
--info: #3b82f6;              /* 信息 - 蓝色 */

/* 类型色（话题类型） */
--offer: linear-gradient(135deg, #60a5fa 0%, #2563eb 100%);   /* 我来讲 */
--demand: linear-gradient(135deg, #f472b6 0%, #ec4899 100%);  /* 想听 */
--project: linear-gradient(135deg, #fb923c 0%, #f97316 100%); /* 项目 */

/* 文字色 */
--text-primary: #1f2937;      /* 主文字 */
--text-secondary: #6b7280;    /* 次要文字 */
--text-tertiary: #9ca3af;     /* 辅助文字 */
--text-disabled: #d1d5db;     /* 禁用文字 */

/* 背景色 */
--bg-page: #f9fafb;           /* 页面背景 */
--bg-card: #ffffff;           /* 卡片背景 */
--bg-hover: #f3f4f6;          /* 悬停背景 */
--bg-active: #e5e7eb;         /* 激活背景 */

/* 边框色 */
--border-light: #f3f4f6;      /* 浅边框 */
--border-normal: #e5e7eb;     /* 常规边框 */
--border-dark: #d1d5db;       /* 深边框 */
```

### 字体系统

```css
/* 字号（网页版 px / 小程序 rpx） */
--text-xs: 12px / 24rpx;      /* 极小 */
--text-sm: 14px / 28rpx;      /* 小号 */
--text-base: 16px / 32rpx;    /* 正文 */
--text-lg: 18px / 36rpx;      /* 大号 */
--text-xl: 20px / 40rpx;      /* 特大 */
--text-2xl: 24px / 48rpx;     /* 标题 */
--text-3xl: 30px / 60rpx;     /* 大标题 */

/* 字重 */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;

/* 行高 */
--leading-tight: 1.25;
--leading-normal: 1.5;
--leading-loose: 1.75;
```

### 间距系统

```css
/* 统一间距（网页版 px / 小程序 rpx） */
--space-1: 4px / 8rpx;
--space-2: 8px / 16rpx;
--space-3: 12px / 24rpx;
--space-4: 16px / 32rpx;
--space-5: 20px / 40rpx;
--space-6: 24px / 48rpx;
--space-8: 32px / 64rpx;
--space-10: 40px / 80rpx;
--space-12: 48px / 96rpx;
--space-16: 64px / 128rpx;
```

### 圆角系统

```css
--radius-sm: 8px / 16rpx;     /* 小圆角 */
--radius-md: 12px / 24rpx;    /* 中圆角 */
--radius-lg: 16px / 32rpx;    /* 大圆角 */
--radius-xl: 20px / 40rpx;    /* 特大圆角 */
--radius-full: 9999px;        /* 完全圆形 */
```

### 阴影系统

```css
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
--shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
```

---

## 🔧 技术实施细节

### API 接口规范

#### 统一响应格式

```typescript
// 成功响应
{
  "code": 200,
  "message": "success",
  "data": {
    // 实际数据
  }
}

// 失败响应
{
  "code": 400,
  "message": "错误信息",
  "error": "详细错误"
}

// 列表响应
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [...],
    "total": 100,
    "page": 1,
    "pageSize": 20
  }
}
```

#### 核心接口设计

**1. 用户认证**

```javascript
// 1.1 发送验证码
POST /api/auth/send-code
Body: { phone: "13800138000" }
Response: { code: 200, message: "验证码已发送" }

// 1.2 手机号登录（网页版）
POST /api/auth/login
Body: { phone: "13800138000", code: "123456" }
Response: { 
  code: 200, 
  data: { 
    token: "jwt_token",
    user: { id, name, avatar, ... }
  }
}

// 1.3 微信登录（小程序）
POST /api/auth/wechat-login
Body: { code: "wx_code" }
Response: { 
  code: 200, 
  data: { 
    token: "jwt_token",
    user: { id, name, avatar, ... }
  }
}

// 1.4 获取当前用户信息
GET /api/auth/me
Headers: { Authorization: "Bearer <token>" }
Response: { code: 200, data: { id, name, avatar, ... } }
```

**2. 话题管理**

```javascript
// 2.1 获取话题列表
GET /api/topics?type=all&page=1&limit=20
Response: {
  code: 200,
  data: {
    list: [
      {
        id: 1,
        type: "offer",
        title: "标题",
        content: "内容",
        cover: "封面图URL",
        author: { id, name, avatar, level },
        tags: ["标签1", "标签2"],
        stats: { views: 100, likes: 20, comments: 5 },
        createdAt: "2025-10-29T10:00:00Z"
      }
    ],
    total: 100,
    page: 1,
    pageSize: 20
  }
}

// 2.2 获取话题详情
GET /api/topics/:id
Response: {
  code: 200,
  data: {
    id: 1,
    type: "offer",
    title: "标题",
    content: "完整内容",
    images: ["图片1", "图片2"],
    author: { 
      id, name, avatar, level, major, grade,
      isFollowing: false 
    },
    tags: ["标签1", "标签2"],
    stats: { views: 100, likes: 20, comments: 5 },
    isLiked: false,  // 当前用户是否点赞
    createdAt: "2025-10-29T10:00:00Z"
  }
}

// 2.3 创建话题
POST /api/topics
Headers: { Authorization: "Bearer <token>" }
Body: {
  type: "offer",
  title: "标题",
  content: "内容",
  tags: ["标签1", "标签2"],
  images: ["图片1", "图片2"]
}
Response: {
  code: 200,
  data: { id: 1, ... }
}

// 2.4 点赞话题
POST /api/topics/:id/like
Headers: { Authorization: "Bearer <token>" }
Response: { 
  code: 200, 
  data: { isLiked: true, likeCount: 21 }
}

// 2.5 取消点赞
DELETE /api/topics/:id/like
Headers: { Authorization: "Bearer <token>" }
Response: { 
  code: 200, 
  data: { isLiked: false, likeCount: 20 }
}
```

**3. 用户管理**

```javascript
// 3.1 获取用户列表
GET /api/users?page=1&limit=20
Response: {
  code: 200,
  data: {
    list: [
      {
        id: 1,
        name: "张三",
        avatar: "头像URL",
        major: "计算机科学",
        grade: "大三",
        level: 12,
        score: 1420,
        isFollowing: false
      }
    ],
    total: 50,
    page: 1,
    pageSize: 20
  }
}

// 3.2 获取用户详情
GET /api/users/:id
Response: {
  code: 200,
  data: {
    id: 1,
    name: "张三",
    avatar: "头像URL",
    major: "计算机科学",
    grade: "大三",
    level: 12,
    score: 1420,
    bio: "个人简介",
    stats: { 
      topics: 23, 
      followers: 890, 
      following: 145 
    },
    isFollowing: false
  }
}

// 3.3 关注用户
POST /api/users/:id/follow
Headers: { Authorization: "Bearer <token>" }
Response: { 
  code: 200, 
  data: { isFollowing: true }
}

// 3.4 取消关注
DELETE /api/users/:id/follow
Headers: { Authorization: "Bearer <token>" }
Response: { 
  code: 200, 
  data: { isFollowing: false }
}
```

---

## 📈 数据埋点方案

### 关键指标

**业务指标**:
- DAU（日活跃用户）
- 话题发布量
- 互动率（点赞率、评论率）
- 留存率（次日、7日、30日）

**技术指标**:
- 页面加载时间
- API 响应时间
- 错误率
- 崩溃率

### 埋点事件

```javascript
// 页面浏览
track('page_view', {
  page_name: 'plaza',
  page_title: '话题广场',
  platform: 'web' | 'miniprogram'
})

// 用户登录
track('user_login', {
  login_type: 'phone' | 'wechat',
  platform: 'web' | 'miniprogram'
})

// 话题发布
track('topic_publish', {
  topic_type: 'offer' | 'demand' | 'project',
  has_image: true | false,
  tag_count: 2
})

// 话题互动
track('topic_interaction', {
  action: 'like' | 'comment' | 'share',
  topic_id: 123,
  topic_type: 'offer'
})
```

---

## ✅ 验收标准

### Phase 1 完成标准

**功能完整性**:
- ✅ 用户可以注册登录
- ✅ 用户可以发布话题
- ✅ 用户可以浏览话题列表
- ✅ 用户可以查看话题详情
- ✅ 用户可以点赞话题
- ✅ 用户可以浏览和关注其他用户

**双端一致性**:
- ✅ 网页版和小程序功能一致
- ✅ 数据完全同步
- ✅ 设计风格统一

**性能指标**:
- ✅ 首屏加载 < 2s
- ✅ 页面切换 < 500ms
- ✅ API 响应 < 1s
- ✅ 无明显卡顿

**质量标准**:
- ✅ 无 P0/P1 级别 Bug
- ✅ 核心流程无阻塞
- ✅ 错误提示友好
- ✅ 边界情况处理完善

---

## 🚀 发布计划

### 内部测试版（Week 3）
- 团队内部使用
- 收集反馈
- 快速迭代

### 灰度测试版（Week 4）
- 小范围用户测试
- 监控数据指标
- 优化用户体验

### 正式发布（Week 5）
- 网页版上线
- 小程序提交审核
- 运营推广启动

---

## 💡 成功关键

1. **聚焦核心** - Phase 1 只做最核心的功能
2. **快速迭代** - 每周都有可演示的版本
3. **双端一致** - 确保用户体验统一
4. **质量优先** - 宁可少做也要做好
5. **用户导向** - 所有决策以用户体验为中心

---

**让我们开始吧！🚀**

下一步：立即开始 Week 1 Day 1-2 的 API 封装工作！

