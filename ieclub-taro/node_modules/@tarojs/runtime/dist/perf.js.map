{"version":3,"file":"perf.js","sources":["../../src/perf.ts"],"sourcesContent":["import { options } from './options'\nimport { debounce } from './utils'\n\nimport type { TFunc } from './interface'\n\nclass Performance {\n  private recorder = new Map<string, number>()\n\n  public start (id: string) {\n    if (!options.debug) {\n      return\n    }\n    this.recorder.set(id, Date.now())\n  }\n\n  public stop (id: string, now = Date.now()) {\n    if (!options.debug) {\n      return\n    }\n    const prev = this.recorder.get(id)!\n    if (!(prev >= 0)) return\n\n    this.recorder.delete(id)\n    const time = now - prev\n    // eslint-disable-next-line no-console\n    console.log(`${id} 时长： ${time}ms 开始时间：${this.#parseTime(prev)} 结束时间：${this.#parseTime(now)}`)\n  }\n\n  public delayStop (id: string, delay = 500) {\n    if (!options.debug) {\n      return\n    }\n\n    return debounce((now = Date.now(), cb?: TFunc) => {\n      this.stop(id, now)\n      cb?.()\n    }, delay)\n  }\n\n  #parseTime (time: number) {\n    const d = new Date(time)\n    return `${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}.${`${d.getMilliseconds()}`.padStart(3, '0')}`\n  }\n}\n\nexport const perf = new Performance()\n"],"names":[],"mappings":";;;;;;;;AAKA,MAAM,WAAW,CAAA;AAAjB,IAAA,WAAA,GAAA;;AACU,QAAA,IAAA,CAAA,QAAQ,GAAG,IAAI,GAAG,EAAkB;;AAErC,IAAA,KAAK,CAAE,EAAU,EAAA;AACtB,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YAClB;;AAEF,QAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;;IAG5B,IAAI,CAAE,EAAU,EAAE,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,EAAA;AACvC,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YAClB;;QAEF,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAE;AACnC,QAAA,IAAI,EAAE,IAAI,IAAI,CAAC,CAAC;YAAE;AAElB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;AACxB,QAAA,MAAM,IAAI,GAAG,GAAG,GAAG,IAAI;;QAEvB,OAAO,CAAC,GAAG,CAAC,CAAG,EAAA,EAAE,CAAQ,KAAA,EAAA,IAAI,CAAW,QAAA,EAAA,sBAAA,CAAA,IAAI,EAAA,sBAAA,EAAA,GAAA,EAAA,sBAAA,CAAW,CAAf,IAAA,CAAA,IAAI,EAAY,IAAI,CAAC,CAAA,MAAA,EAAS,sBAAA,CAAA,IAAI,EAAW,sBAAA,EAAA,GAAA,EAAA,sBAAA,CAAA,CAAA,IAAA,CAAf,IAAI,EAAY,GAAG,CAAC,CAAE,CAAA,CAAC;;AAGxF,IAAA,SAAS,CAAE,EAAU,EAAE,KAAK,GAAG,GAAG,EAAA;AACvC,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YAClB;;AAGF,QAAA,OAAO,QAAQ,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,EAAE,EAAU,KAAI;AAC/C,YAAA,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,CAAC;AAClB,YAAA,EAAE,KAAF,IAAA,IAAA,EAAE,KAAF,MAAA,GAAA,MAAA,GAAA,EAAE,EAAI;SACP,EAAE,KAAK,CAAC;;AAOZ;iGAJa,IAAY,EAAA;AACtB,IAAA,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC;AACxB,IAAA,OAAO,CAAG,EAAA,CAAC,CAAC,QAAQ,EAAE,CAAA,CAAA,EAAI,CAAC,CAAC,UAAU,EAAE,CAAI,CAAA,EAAA,CAAC,CAAC,UAAU,EAAE,CAAI,CAAA,EAAA,CAAA,EAAG,CAAC,CAAC,eAAe,EAAE,CAAE,CAAA,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;AAC3G,CAAC;AAGU,MAAA,IAAI,GAAG,IAAI,WAAW;;;;"}