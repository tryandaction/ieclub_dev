{"version":3,"file":"element.js","sources":["../../../src/dom-external/element.ts"],"sourcesContent":["import { DOCUMENT_FRAGMENT } from '../constants'\nimport { options } from '../options'\n\nimport type { TaroElement } from '../dom/element'\n\nexport function getBoundingClientRectImpl (this: TaroElement): Promise<null> {\n  if (!options.miniGlobal) return Promise.resolve(null)\n  return new Promise(resolve => {\n    const query = options.miniGlobal.createSelectorQuery()\n    // ref: https://opendocs.alipay.com/mini/api/na4yun\n    if (process.env.TARO_ENV === 'alipay') {\n      query.select(`#${this.uid}`).boundingClientRect().exec(res => {\n        resolve(res)\n      })\n      return\n    }\n\n    query.select(`#${this.uid}`).boundingClientRect(res => {\n      resolve(res)\n    }).exec()\n  })\n}\n\nexport function getTemplateContent (ctx: TaroElement): TaroElement | undefined {\n  if (ctx.nodeName === 'template') {\n    const document = ctx.ownerDocument\n    const content: TaroElement = document.createElement(DOCUMENT_FRAGMENT)\n    content.childNodes = ctx.childNodes\n    ctx.childNodes = [content]\n    content.parentNode = ctx\n    content.childNodes.forEach(nodes => {\n      nodes.parentNode = content\n    })\n    return content\n  }\n}\n"],"names":[],"mappings":";;;SAKgB,yBAAyB,GAAA;IACvC,IAAI,CAAC,OAAO,CAAC,UAAU;AAAE,QAAA,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;AACrD,IAAA,OAAO,IAAI,OAAO,CAAC,OAAO,IAAG;QAC3B,MAAM,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC,mBAAmB,EAAE;;QAEtD,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,QAAQ,EAAE;AACrC,YAAA,KAAK,CAAC,MAAM,CAAC,CAAI,CAAA,EAAA,IAAI,CAAC,GAAG,CAAA,CAAE,CAAC,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,GAAG,IAAG;gBAC3D,OAAO,CAAC,GAAG,CAAC;AACd,aAAC,CAAC;YACF;;AAGF,QAAA,KAAK,CAAC,MAAM,CAAC,CAAA,CAAA,EAAI,IAAI,CAAC,GAAG,CAAE,CAAA,CAAC,CAAC,kBAAkB,CAAC,GAAG,IAAG;YACpD,OAAO,CAAC,GAAG,CAAC;AACd,SAAC,CAAC,CAAC,IAAI,EAAE;AACX,KAAC,CAAC;AACJ;AAEM,SAAU,kBAAkB,CAAE,GAAgB,EAAA;AAClD,IAAA,IAAI,GAAG,CAAC,QAAQ,KAAK,UAAU,EAAE;AAC/B,QAAA,MAAM,QAAQ,GAAG,GAAG,CAAC,aAAa;QAClC,MAAM,OAAO,GAAgB,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC;AACtE,QAAA,OAAO,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU;AACnC,QAAA,GAAG,CAAC,UAAU,GAAG,CAAC,OAAO,CAAC;AAC1B,QAAA,OAAO,CAAC,UAAU,GAAG,GAAG;AACxB,QAAA,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,IAAG;AACjC,YAAA,KAAK,CAAC,UAAU,GAAG,OAAO;AAC5B,SAAC,CAAC;AACF,QAAA,OAAO,OAAO;;AAElB;;;;"}