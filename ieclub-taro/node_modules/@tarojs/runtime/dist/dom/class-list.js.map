{"version":3,"file":"class-list.js","sources":["../../../src/dom/class-list.ts"],"sourcesContent":["import type { TaroElement } from './element'\n\nexport class ClassList {\n  private el: TaroElement\n\n  private tokenList: string[] = []\n\n  constructor (className: string, el: TaroElement) {\n    this.el = el\n    className.trim().split(/\\s+/).forEach(token => this.tokenList.push(token))\n  }\n\n  public get value () {\n    return this.toString()\n  }\n\n  public get length () {\n    return this.tokenList.length\n  }\n\n  add () {\n    let index = 0\n    let updated = false\n\n    const tokens = arguments\n    const length = tokens.length\n    const tokenList = this.tokenList\n\n    do {\n      const token: string = tokens[index]\n\n      if (this.checkTokenIsValid(token) && !~tokenList.indexOf(token)) {\n        tokenList.push(token)\n\n        updated = true\n      }\n    } while (++index < length)\n\n    if (updated) {\n      this._update()\n    }\n  }\n\n  remove () {\n    let i = 0\n    let updated = false\n\n    const tokens = arguments\n    const length = tokens.length\n    const tokenList = this.tokenList\n\n    do {\n      const token = tokens[i] + ''\n\n      if (!this.checkTokenIsValid(token)) continue\n\n      const index = tokenList.indexOf(token)\n\n      if (~tokenList.indexOf(token)) {\n        tokenList.splice(index, 1)\n\n        updated = true\n      }\n    } while (++i < length)\n\n    if (updated) {\n      this._update()\n    }\n  }\n\n  contains (token: string) {\n    if (!this.checkTokenIsValid(token)) return false\n\n    return !!~this.tokenList.indexOf(token)\n  }\n\n  toggle (token: string, force: boolean) {\n    const result = this.contains(token)\n    const method = result ? force !== true && 'remove' : force !== false && 'add'\n\n    if (method) {\n      // @ts-ignore\n      this[method](token)\n    }\n\n    if (force === true || force === false) {\n      return force\n    } else {\n      return !result\n    }\n  }\n\n  replace (token: string, replacement_token: string) {\n    if (!this.checkTokenIsValid(token) || !this.checkTokenIsValid(replacement_token)) return\n\n    const index = this.tokenList.indexOf(token)\n\n    if (~index) {\n      this.tokenList.splice(index, 1, replacement_token)\n      this._update()\n    }\n  }\n\n  toString () {\n    return this.tokenList.filter(v => v !== '').join(' ')\n  }\n\n  private checkTokenIsValid (token: string) {\n    if (token === '' || /\\s/.test(token)) return false\n\n    return true\n  }\n\n  private _update () {\n    this.el.className = this.value\n  }\n}\n"],"names":[],"mappings":"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"}