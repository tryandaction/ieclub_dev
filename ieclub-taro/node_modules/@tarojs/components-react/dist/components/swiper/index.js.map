{"version":3,"file":"index.js","sources":["../../../src/components/swiper/index.tsx"],"sourcesContent":["import 'swiper/swiper-bundle.css'\nimport './style/index.scss'\n\nimport classNames from 'classnames'\nimport React from 'react'\nimport Swipers from 'swiper/bundle'\n\nimport { createForwardRefComponent, debounce } from '../../utils'\n\nimport type ISwiper from 'swiper'\n\nlet INSTANCE_ID = 0\nconst ONE_ADDITIONAL_SLIDES_THRESHOLD = 5\nconst TWO_ADDITIONAL_SLIDES_THRESHOLD = 7\n\ninterface SwiperItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  itemId: string\n  forwardedRef?: React.MutableRefObject<HTMLDivElement>\n}\n\ninterface SwiperProps extends React.HTMLAttributes<HTMLDivElement> {\n  autoplay?: boolean\n  interval?: number\n  duration?: number\n  current?: number\n  displayMultipleItems?: number\n  circular?: boolean\n  vertical?: boolean\n  spaceBetween?: any\n  previousMargin?: string\n  nextMargin?: string\n  indicatorColor?: string\n  indicatorActiveColor?: string\n  indicatorDots?: boolean\n  currentItemId?: string\n  forwardedRef?: React.MutableRefObject<HTMLDivElement>\n  full?: boolean\n  onAnimationFinish?: (e: TouchEvent) => void\n  effectsProps?: Record<string, any>\n}\n\nconst createEvent = (type: string) => {\n  let e\n  try {\n    e = new TouchEvent(type)\n  } catch (err) {\n    e = document.createEvent('Event')\n    e.initEvent(type, true, true)\n  }\n  return e\n}\n\nclass SwiperItemInner extends React.Component<SwiperItemProps, Record<string, unknown>> {\n  render () {\n    const { className, style, itemId, children, forwardedRef, ...restProps } = this.props\n    const cls = classNames('swiper-slide', className)\n    return (\n      <div\n        ref={(e) => {\n          if (e && forwardedRef) {\n            forwardedRef.current = e\n          }\n        }}\n        className={cls}\n        style={style}\n        item-id={itemId}\n        {...restProps}\n      >\n        {children}\n      </div>\n    )\n  }\n}\n\ninterface SwiperState {\n  swiperWrapper: HTMLElement | null\n}\n\nclass SwiperInner extends React.Component<SwiperProps, SwiperState> {\n  _id = 1 + INSTANCE_ID++\n  #source = 'autoplay'\n  #swiperResetting: boolean = false\n  #lastSwiperActiveIndex: number = 0\n  // dom 变化是否由外部引起，因为 swiper 的循环模式也会引起 dom 的变化。如果不是由外部引起的 dom 变化，就不需要重新初始化 swiper\n  #domChangeByOutSide: boolean = false\n  $el: HTMLDivElement | null\n  swiper: ISwiper| null\n  observer: MutationObserver\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      swiperWrapper: null\n    }\n  }\n\n  componentDidMount () {\n    this.handleInit()\n  }\n\n  hackSwiperWrapDomAction () {\n    if (!this.state.swiperWrapper || !this.swiper) return\n    const appendChild = this.state.swiperWrapper.appendChild.bind(this.state.swiperWrapper)\n    const removeChild = this.state.swiperWrapper.removeChild.bind(this.state.swiperWrapper)\n    const replaceChild = this.state.swiperWrapper.replaceChild.bind(this.state.swiperWrapper)\n    const insertBefore = this.state.swiperWrapper.insertBefore.bind(this.state.swiperWrapper)\n\n    const beforeAction = () => {\n      if (!this.state.swiperWrapper || !this.swiper) return\n      this.#swiperResetting = true\n      if (!this.#domChangeByOutSide && this.props.circular) {\n        // 如果是由于外部子节点的变化引起的 dom 变化，需要重新初始化 swiper。\n        // 在初dom操作之前，需要调用 loopDestroy，把子节点的顺序恢复\n        this.#domChangeByOutSide = true\n        this.swiper.loopDestroy()\n        this.swiper.params.loop = false\n      }\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.appendChild = (...args) => {\n      beforeAction()\n      return appendChild(...args)\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.removeChild = (...args) => {\n      beforeAction()\n      return removeChild(...args)\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.replaceChild = (...args) => {\n      beforeAction()\n      return replaceChild(...args)\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.insertBefore = (...args) => {\n      beforeAction()\n      return insertBefore(...args)\n    }\n  }\n\n  handleInit = (reset = false) => {\n    const {\n      autoplay = false,\n      circular = true,\n      current = 0,\n      displayMultipleItems = 1,\n      duration = 500,\n      interval = 5000,\n      currentItemId,\n      effectsProps = {},\n      vertical\n    } = this.props\n\n    let initialSlide = parseInt(String(current), 10)\n    if (reset) {\n      initialSlide = this.#lastSwiperActiveIndex\n    } else {\n      if (currentItemId) {\n        let itemIdIndex = 0\n        this.getSlidersList().forEach((swiperItem, index) => {\n          // @ts-ignore\n          if (swiperItem.itemId && swiperItem.itemId === currentItemId) {\n            itemIdIndex = index\n          }\n        })\n        initialSlide = itemIdIndex\n      }\n    }\n\n    const loopAdditionalSlides = this.getLoopAdditionalSlides()\n    const centeredSlides = displayMultipleItems === 1 && this.getNeedFixLoop()\n    const slidesPerView = displayMultipleItems\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this\n    const opt: Record<string, any> = {\n      // 指示器\n      pagination: { el: `.taro-swiper-${this._id} > .swiper-container > .swiper-pagination` },\n      direction: vertical ? 'vertical' : 'horizontal',\n      loop: circular,\n      slidesPerView: slidesPerView,\n      initialSlide,\n      speed: parseInt(String(duration), 10),\n      observer: true,\n      observeParents: true,\n      nested: true,\n      loopAdditionalSlides,\n      centeredSlides,\n      touchReleaseOnEdges: true,\n      threshold: 0,\n      ...effectsProps,\n      on: {\n        init (_swiper) {\n          that.getNeedFixLoop() && _swiper.loopFix()\n          that.props.autoplay && _swiper.autoplay.start()\n        },\n        transitionEnd (_swiper) {\n          if (that.#swiperResetting || that.#lastSwiperActiveIndex === _swiper.realIndex) return\n          that.#lastSwiperActiveIndex = _swiper.realIndex\n          that.getNeedFixLoop() && _swiper.loopFix()\n          that.props.autoplay && _swiper.autoplay.start()\n          const e = createEvent('touchend')\n          try {\n            const currentId = that.getCurrentId(_swiper)\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                source: that.#source,\n                current: this.realIndex,\n                currentId: currentId\n              }\n            })\n          } catch (err) {} // eslint-disable-line no-empty\n          that.handleOnAnimationFinish(e)\n          that.#source = 'autoplay'\n        },\n        touchMove () {\n          that.#source = 'touch'\n        },\n        touchEnd: (_swiper) => {\n          that.#source = 'touch'\n          that.props.autoplay && _swiper.autoplay.start()\n        },\n        touchStart: (_swiper) => {\n          that.#source = 'touch'\n          that.props.autoplay && _swiper.autoplay.pause()\n        },\n        slideChange (_swiper) {\n          if (that.#swiperResetting || that.#lastSwiperActiveIndex === _swiper.realIndex) return\n          const e = createEvent('touchend')\n          try {\n            const currentId = that.getCurrentId(_swiper)\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                current: this.realIndex,\n                source: that.#source,\n                currentId,\n              }\n            })\n          } catch (err) {} // eslint-disable-line no-empty\n          that.handleOnChange(e)\n        },\n        autoplay (_swiper) {\n          // Note: 修复 autoplay 时，切换到其他页面再切回来，autoplay 会停止的问题\n          _swiper.animating = false\n          that.#source = 'autoplay'\n        }\n      }\n    }\n\n    // 自动播放\n    if (autoplay) {\n      opt.autoplay = {\n        delay: parseInt(String(interval), 10),\n        disableOnInteraction: false\n      }\n    }\n\n    this.swiper = new Swipers(this.$el!, opt)\n\n    // Note: 这里是拦截了 swiper 的 minTranslate 和 maxTranslate 方法，手动修复了 loop 模式下的 margin 问题\n    // 因为这两个属性会影响滑动到哪个位置进行 fixloop\n    // 可参考源码：https://github.com/nolimits4web/swiper/blob/v11.1.0/src/core/events/onTouchMove.mjs\n    // https://github.com/nolimits4web/swiper/blob/v11.1.0/src/core/loop/loopFix.mjs\n    if (this.getNeedFixLoop()) {\n      // @ts-ignore\n      const minTranslate = this.swiper.minTranslate.bind(this.swiper)\n      // @ts-ignore\n      const maxTranslate = this.swiper.maxTranslate.bind(this.swiper)\n      if (centeredSlides && this.getSlidersList().length < 4) {\n        // @ts-ignore\n        this.swiper.minTranslate = () => minTranslate() + this.parseMargin()[1]\n        // @ts-ignore\n        this.swiper.maxTranslate = () => maxTranslate() - this.parseMargin()[0]\n      } else {\n        // @ts-ignore\n        this.swiper.minTranslate = () => minTranslate() - this.parseMargin()[0]\n        // @ts-ignore\n        this.swiper.maxTranslate = () => maxTranslate() + this.parseMargin()[1]\n      }\n    }\n\n    this.setState({\n      swiperWrapper: this.swiper.wrapperEl\n    })\n  }\n\n  componentDidUpdate (prevProps, pervState) {\n    if (!this.swiper || !this.state.swiperWrapper) return\n    if (pervState.swiperWrapper !== this.state.swiperWrapper && this.state.swiperWrapper) {\n      this.observer && this.observer.disconnect()\n      this.observer = new MutationObserver(this.handleSwiperSizeDebounce)\n      this.observer.observe(this.state.swiperWrapper as Node, {\n        childList: true\n      })\n      this.hackSwiperWrapDomAction()\n    }\n\n    if (prevProps.circular !== this.props.circular || prevProps.displayMultipleItems !== this.props.displayMultipleItems) {\n      this.reset()\n    }\n\n    if (prevProps.interval !== this.props.interval) {\n      if (typeof this.swiper.params.autoplay === 'object') {\n        this.swiper.params.autoplay.delay = this.props.interval\n      }\n    }\n\n    if (prevProps.duration !== this.props.duration) {\n      this.swiper.params.speed = this.props.duration\n    }\n\n    if (prevProps.current !== this.props.current && !this.props.currentItemId) {\n      const n = parseInt(String(this.props.current), 10)\n      if (isNaN(n) || n === this.swiper.realIndex) return\n      this.#source = ''\n      if (this.props.circular) {\n        this.swiper.slideToLoop(n) // 更新下标\n        this.props.autoplay && this.swiper.autoplay.pause()\n        // @ts-ignore\n        this.swiper.loopFix()\n        this.props.autoplay && this.swiper.autoplay.start()\n      } else {\n        this.swiper.slideTo(n) // 更新下标\n      }\n    }\n\n    if (prevProps.autoplay !== this.props.autoplay) {\n      const swiperAutoplay = this.swiper.autoplay\n      if (swiperAutoplay) {\n        if (swiperAutoplay.running === this.props.autoplay) return\n\n        if (this.props.autoplay) {\n          if (this.swiper.params && typeof this.swiper.params.autoplay === 'object') {\n            if (this.swiper.params.autoplay.disableOnInteraction === true) {\n              this.swiper.params.autoplay.disableOnInteraction = false\n            }\n            this.swiper.params.autoplay.delay = this.props.interval\n          }\n          swiperAutoplay.start()\n        } else {\n          swiperAutoplay.stop()\n        }\n      }\n    }\n\n    if (prevProps.currentItemId !== this.props.currentItemId) {\n      let itemIdIndex = 0\n      this.getSlidersList().forEach((swiperItem, index) => {\n        const itemId = swiperItem.getAttribute('item-id')\n        // @ts-ignore\n        if (itemId === this.props.currentItemId) {\n          if (this.props.circular) {\n            itemIdIndex = Number(swiperItem.getAttribute('data-swiper-slide-index'))\n          } else {\n            itemIdIndex = index\n          }\n        }\n      })\n      if (isNaN(itemIdIndex) || itemIdIndex === this.swiper.realIndex) return\n      this.#source = ''\n      if (this.props.circular) {\n        this.swiper.slideToLoop(itemIdIndex) // 更新下标\n        this.props.autoplay && this.swiper.autoplay.pause()\n        // @ts-ignore\n        this.swiper.loopFix()\n        this.props.autoplay && this.swiper.autoplay.start()\n      } else {\n        this.swiper.slideTo(itemIdIndex) // 更新下标\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    this.$el = null\n    this.swiper?.destroy?.()\n    this.observer?.disconnect?.()\n    this.setState({\n      swiperWrapper: null\n    })\n  }\n\n  handleOnChange (e: React.FormEvent<HTMLDivElement>) {\n    const func = this.props.onChange\n    typeof func === 'function' && func(e)\n  }\n\n  handleOnAnimationFinish (e: TouchEvent) {\n    const func = this.props.onAnimationFinish\n    typeof func === 'function' && func(e)\n  }\n\n  handleSwiperSizeDebounce = debounce(() => {\n    if (!this.swiper) return\n    if (this.props.circular) {\n      if (this.#domChangeByOutSide) {\n        this.reset()\n        this.#domChangeByOutSide = false\n      }\n    } else {\n      this.swiper.update()\n      this.#swiperResetting = false\n    }\n  }, 50)\n\n\n  reset = () => {\n    if (!this.swiper) return\n    this.#swiperResetting = true\n    this.#lastSwiperActiveIndex = this.swiper.realIndex\n    this.swiper.destroy()\n    this.handleInit(true)\n    this.#swiperResetting = false\n  }\n\n  // 以下为方法函数\n  getSlidersList = () => this.$el?.querySelectorAll?.('.swiper-slide') || []\n\n  // 获取是否需要手动修复 loop 的条件\n  getNeedFixLoop = () => {\n    const margins = this.parseMargin()\n    const hasMargin = margins.filter(Boolean).length > 0\n    return this.props.circular && hasMargin\n  }\n\n  // Note: loop 的时候添加 additionalSlides 可以避免循环的时候由于 loopFix 不及时，出现空白的问题。但是并不是 additionalSlides 越多越好，因为 additionalSlides 越多，如果 swiper-item 的数量不够，会导致出现 bug。\n  // 目前的策略是 swiper-item 的数量小于等于 5 时，不添加 additionalSlides，大于 5 小于等于 7 时，添加 1 个 additionalSlides，大于 7 时，添加 2 个 additionalSlides。\n  getLoopAdditionalSlides():number {\n    const slidersLength = (this.getSlidersList()).length\n    if (!this.$el || !this.getNeedFixLoop() || slidersLength < ONE_ADDITIONAL_SLIDES_THRESHOLD) return 0\n    if (slidersLength <= TWO_ADDITIONAL_SLIDES_THRESHOLD) return 1\n    return 2\n  }\n\n  parseMargin = () => {\n    const { previousMargin = '0px', nextMargin = '0px' } = this.props\n    const [, pM] = /^(\\d+)px/.exec(previousMargin) || []\n    const [, nN] = /^(\\d+)px/.exec(nextMargin as string) || []\n    return [parseInt(pM) || 0, parseInt(nN) || 0]\n  }\n\n  getCurrentId (swiper: ISwiper) {\n    const slides = swiper.slides\n    const activeIndex = swiper.activeIndex\n    const currentSlide = slides[activeIndex]\n    return currentSlide.getAttribute('item-id')\n  }\n\n  render () {\n    const {\n      className,\n      style,\n      vertical,\n      indicatorColor,\n      indicatorActiveColor,\n      forwardedRef\n    } = this.props\n    const defaultIndicatorColor = indicatorColor || 'rgba(0, 0, 0, .3)'\n    const defaultIndicatorActiveColor = indicatorActiveColor || '#000'\n    const [pM, nM] = this.parseMargin()\n    const cls = classNames(`taro-swiper-${this._id}`, className)\n    const sty = Object.assign({ overflow: 'hidden' }, style)\n    if (this.props.full) {\n      sty.height = '100%'\n    }\n    const swiperContainerStyleList:string [] = [\n      'overflow: visible;',\n      vertical ? `margin-top: ${pM}px; margin-bottom: ${nM}px;` : `margin-right: ${nM}px; margin-left: ${pM}px;`,\n      this.props.full ? 'height: 100%;' : ''\n    ]\n\n\n    const swiperPaginationStyleList:string [] = [\n      this.props.indicatorDots ? 'opacity: 1;' : 'display: none;',\n      'font-size: 0;'\n    ]\n    return (\n      <div className={`swiper-container-wrapper ${cls}`} style={sty} ref={(e) => {\n        if (forwardedRef && e) {\n          forwardedRef.current = e\n        }\n      }}>\n        <div className='swiper-container' style={{ overflow: 'visible' }} ref={(el) => { this.$el = el }}>\n          <div\n            dangerouslySetInnerHTML={{\n              __html: `<style type='text/css'>\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet { background: ${defaultIndicatorColor} }\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet-active { background: ${defaultIndicatorActiveColor} }\n              .taro-swiper-${this._id} > .swiper-container { ${swiperContainerStyleList.join('')} }\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination { ${swiperPaginationStyleList.join('')} }\n              </style>`\n            }}\n          />\n          <div className='swiper-wrapper' >{this.props.children}</div>\n          <div className='swiper-pagination' />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport const Swiper = createForwardRefComponent(SwiperInner)\nexport const SwiperItem = createForwardRefComponent(SwiperItemInner)\n"],"names":["INSTANCE_ID","ONE_ADDITIONAL_SLIDES_THRESHOLD","TWO_ADDITIONAL_SLIDES_THRESHOLD","createEvent","type","e","TouchEvent","err","document","initEvent","SwiperItemInner","React","Component","render","_a","props","className","style","itemId","children","forwardedRef","restProps","__rest","cls","classNames","_jsx","ref","current","SwiperInner","constructor","_this","this","_id","_SwiperInner_source","set","_SwiperInner_swiperResetting","_SwiperInner_lastSwiperActiveIndex","_SwiperInner_domChangeByOutSide","handleInit","reset","arguments","length","undefined","autoplay","circular","displayMultipleItems","duration","interval","currentItemId","effectsProps","vertical","initialSlide","parseInt","String","__classPrivateFieldGet","itemIdIndex","getSlidersList","forEach","swiperItem","index","loopAdditionalSlides","getLoopAdditionalSlides","centeredSlides","getNeedFixLoop","slidesPerView","that","opt","Object","assign","pagination","el","direction","loop","speed","observer","observeParents","nested","touchReleaseOnEdges","threshold","on","init","_swiper","loopFix","start","transitionEnd","realIndex","__classPrivateFieldSet","currentId","getCurrentId","defineProperty","enumerable","value","source","handleOnAnimationFinish","touchMove","touchEnd","touchStart","pause","slideChange","handleOnChange","animating","delay","disableOnInteraction","swiper","Swipers","$el","minTranslate","bind","maxTranslate","parseMargin","setState","swiperWrapper","wrapperEl","handleSwiperSizeDebounce","debounce","update","destroy","_b","querySelectorAll","margins","hasMargin","filter","Boolean","previousMargin","nextMargin","pM","exec","nN","state","componentDidMount","hackSwiperWrapDomAction","appendChild","removeChild","replaceChild","insertBefore","beforeAction","loopDestroy","params","componentDidUpdate","prevProps","pervState","disconnect","MutationObserver","observe","childList","n","isNaN","slideToLoop","slideTo","swiperAutoplay","running","stop","getAttribute","Number","componentWillUnmount","_d","_c","func","onChange","onAnimationFinish","slidersLength","slides","activeIndex","currentSlide","indicatorColor","indicatorActiveColor","defaultIndicatorColor","defaultIndicatorActiveColor","nM","sty","overflow","full","height","swiperContainerStyleList","swiperPaginationStyleList","indicatorDots","_jsxs","dangerouslySetInnerHTML","__html","join","Swiper","createForwardRefComponent","SwiperItem"],"mappings":"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"}