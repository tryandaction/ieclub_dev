"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[481],{2579:function(s,e,n){var a=n(7842),l=n(3949),c=n(6784),i=n(8140),r=n(118),o=n(8833),t=n(758),m=n.n(t),u=n(920),d=n(1439),h=n(5349);function x(){var s=(0,u.k)(),e=s.userInfo,n=s.isLogin,a=s.logout,t=(0,o.useState)({topicsCount:0,commentsCount:0,likesCount:0,followersCount:0,followingCount:0}),x=(0,i.A)(t,2),j=x[0],N=x[1],S=function(){var s=(0,c.A)((0,l.A)().m(function s(){var n,a;return(0,l.A)().w(function(s){while(1)switch(s.p=s.n){case 0:if(e){s.n=1;break}return s.a(2);case 1:return s.p=1,s.n=2,(0,d.hj)(e.id);case 2:n=s.v,N(n),s.n=4;break;case 3:s.p=3,a=s.v,console.error("\u52a0\u8f7d\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",a);case 4:return s.a(2)}},s,null,[[1,3]])}));return function(){return s.apply(this,arguments)}}();(0,o.useEffect)(function(){n&&e&&S()},[n,e,S]);var f=function(){m().showModal({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u9000\u51fa\u767b\u5f55\u5417\uff1f",success:function(s){s.confirm&&a()}})},b=function(){m().navigateTo({url:"/pages/login/index"})},p=function(){m().showToast({title:"\u529f\u80fd\u5f00\u53d1\u4e2d",icon:"none"})};return n&&e?(0,h.jsxs)(r.Ss,{className:"profile-page",children:[(0,h.jsxs)(r.Ss,{className:"user-card",children:[(0,h.jsx)(r.Ss,{className:"card-bg"}),(0,h.jsxs)(r.Ss,{className:"user-info",children:[(0,h.jsx)(r._V,{className:"avatar",src:e.avatar,mode:"aspectFill"}),(0,h.jsxs)(r.Ss,{className:"info",children:[(0,h.jsx)(r.EY,{className:"nickname",children:e.nickname}),(0,h.jsx)(r.EY,{className:"bio",children:e.bio||"\u8fd9\u4e2a\u4eba\u5f88\u61d2\uff0c\u4ec0\u4e48\u90fd\u6ca1\u5199~"})]}),(0,h.jsx)(r.Ss,{className:"edit-btn",onClick:p,children:"\u7f16\u8f91"})]}),(0,h.jsxs)(r.Ss,{className:"stats",children:[(0,h.jsxs)(r.Ss,{className:"stat-item",children:[(0,h.jsx)(r.EY,{className:"value",children:j.topicsCount}),(0,h.jsx)(r.EY,{className:"label",children:"\u8bdd\u9898"})]}),(0,h.jsxs)(r.Ss,{className:"stat-item",children:[(0,h.jsx)(r.EY,{className:"value",children:j.likesCount}),(0,h.jsx)(r.EY,{className:"label",children:"\u83b7\u8d5e"})]}),(0,h.jsxs)(r.Ss,{className:"stat-item",children:[(0,h.jsx)(r.EY,{className:"value",children:j.followersCount}),(0,h.jsx)(r.EY,{className:"label",children:"\u7c89\u4e1d"})]}),(0,h.jsxs)(r.Ss,{className:"stat-item",children:[(0,h.jsx)(r.EY,{className:"value",children:j.followingCount}),(0,h.jsx)(r.EY,{className:"label",children:"\u5173\u6ce8"})]})]})]}),(0,h.jsxs)(r.Ss,{className:"menu-section",children:[(0,h.jsxs)(r.Ss,{className:"menu-item",children:[(0,h.jsx)(r.Ss,{className:"menu-icon",children:"\ud83d\udcdd"}),(0,h.jsx)(r.EY,{className:"menu-label",children:"\u6211\u7684\u8bdd\u9898"}),(0,h.jsx)(r.Ss,{className:"menu-arrow",children:"\u203a"})]}),(0,h.jsxs)(r.Ss,{className:"menu-item",children:[(0,h.jsx)(r.Ss,{className:"menu-icon",children:"\u2764\ufe0f"}),(0,h.jsx)(r.EY,{className:"menu-label",children:"\u6211\u7684\u6536\u85cf"}),(0,h.jsx)(r.Ss,{className:"menu-arrow",children:"\u203a"})]}),(0,h.jsxs)(r.Ss,{className:"menu-item",children:[(0,h.jsx)(r.Ss,{className:"menu-icon",children:"\ud83d\udcac"}),(0,h.jsx)(r.EY,{className:"menu-label",children:"\u6211\u7684\u8bc4\u8bba"}),(0,h.jsx)(r.Ss,{className:"menu-arrow",children:"\u203a"})]})]}),(0,h.jsxs)(r.Ss,{className:"menu-section",children:[(0,h.jsxs)(r.Ss,{className:"menu-item",children:[(0,h.jsx)(r.Ss,{className:"menu-icon",children:"\u2699\ufe0f"}),(0,h.jsx)(r.EY,{className:"menu-label",children:"\u8bbe\u7f6e"}),(0,h.jsx)(r.Ss,{className:"menu-arrow",children:"\u203a"})]}),(0,h.jsxs)(r.Ss,{className:"menu-item",children:[(0,h.jsx)(r.Ss,{className:"menu-icon",children:"\u2753"}),(0,h.jsx)(r.EY,{className:"menu-label",children:"\u5e2e\u52a9\u4e0e\u53cd\u9988"}),(0,h.jsx)(r.Ss,{className:"menu-arrow",children:"\u203a"})]})]}),(0,h.jsx)(r.Ss,{className:"logout-section",children:(0,h.jsx)(r.$n,{className:"logout-btn",onClick:f,children:"\u9000\u51fa\u767b\u5f55"})})]}):(0,h.jsx)(r.Ss,{className:"profile-page",children:(0,h.jsxs)(r.Ss,{className:"not-login",children:[(0,h.jsx)(r.Ss,{className:"icon",children:"\ud83d\udc64"}),(0,h.jsx)(r.EY,{className:"text",children:"\u8bf7\u5148\u767b\u5f55"}),(0,h.jsx)(r.$n,{className:"login-btn",onClick:b,children:"\u7acb\u5373\u767b\u5f55"})]})})}var j={navigationBarTitleText:"\u6211\u7684",enablePullDownRefresh:!1};Page((0,a.createPageConfig)(x,"pages/profile/index",{root:{cn:[]}},j||{}))}},function(s){var e=function(e){return s(s.s=e)};s.O(0,[907,96,76],function(){return e(2579)});s.O()}]);