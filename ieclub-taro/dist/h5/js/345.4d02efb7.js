"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[345],{"4345":function(s,e,a){a.r(e),a.d(e,{"default":function(){return ProfilePage}});var l=a(1212),n=a(467),c=a(296),i=a(3707),r=a(6540),m=a(9958),o=a(3699),t=a(993),u=a(9800),d=a(4848);function ProfilePage(){var s=(0,t.k)(),e=s.userInfo,a=s.isLogin,h=s.logout,x=(0,r.useState)({"topicsCount":0,"commentsCount":0,"likesCount":0,"followersCount":0,"followingCount":0}),j=(0,c.A)(x,2),N=j[0],S=j[1],f=(0,r.useCallback)((0,n.A)((0,l.A)().m(function _callee(){var s,a;return(0,l.A)().w(function(l){for(;;)switch(l.p=l.n){case 0:if(e){l.n=1;break}return l.a(2);case 1:return l.p=1,l.n=2,(0,u.hj)(e.id);case 2:s=l.v,S(s),l.n=4;break;case 3:l.p=3,a=l.v,console.error("加载统计数据失败:",a);case 4:return l.a(2)}},_callee,null,[[1,3]])})),[e]);(0,r.useEffect)(function(){a&&e&&f()},[a,e,f]);return a&&e?(0,d.jsxs)(i.Ss,{"className":"profile-page","children":[(0,d.jsxs)(i.Ss,{"className":"user-card","children":[(0,d.jsx)(i.Ss,{"className":"card-bg"}),(0,d.jsxs)(i.Ss,{"className":"user-info","children":[(0,d.jsx)(i._V,{"className":"avatar","src":e.avatar,"mode":"aspectFill"}),(0,d.jsxs)(i.Ss,{"className":"info","children":[(0,d.jsx)(i.EY,{"className":"nickname","children":e.nickname}),(0,d.jsx)(i.EY,{"className":"bio","children":e.bio||"这个人很懒，什么都没写~"})]}),(0,d.jsx)(i.Ss,{"className":"edit-btn","onClick":function goToEdit(){(0,m.P0)({"title":"功能开发中","icon":"none"})},"children":"编辑"})]}),(0,d.jsxs)(i.Ss,{"className":"stats","children":[(0,d.jsxs)(i.Ss,{"className":"stat-item","children":[(0,d.jsx)(i.EY,{"className":"value","children":N.topicsCount}),(0,d.jsx)(i.EY,{"className":"label","children":"话题"})]}),(0,d.jsxs)(i.Ss,{"className":"stat-item","children":[(0,d.jsx)(i.EY,{"className":"value","children":N.likesCount}),(0,d.jsx)(i.EY,{"className":"label","children":"获赞"})]}),(0,d.jsxs)(i.Ss,{"className":"stat-item","children":[(0,d.jsx)(i.EY,{"className":"value","children":N.followersCount}),(0,d.jsx)(i.EY,{"className":"label","children":"粉丝"})]}),(0,d.jsxs)(i.Ss,{"className":"stat-item","children":[(0,d.jsx)(i.EY,{"className":"value","children":N.followingCount}),(0,d.jsx)(i.EY,{"className":"label","children":"关注"})]})]})]}),(0,d.jsxs)(i.Ss,{"className":"menu-section","children":[(0,d.jsxs)(i.Ss,{"className":"menu-item","children":[(0,d.jsx)(i.Ss,{"className":"menu-icon","children":"📝"}),(0,d.jsx)(i.EY,{"className":"menu-label","children":"我的话题"}),(0,d.jsx)(i.Ss,{"className":"menu-arrow","children":"›"})]}),(0,d.jsxs)(i.Ss,{"className":"menu-item","children":[(0,d.jsx)(i.Ss,{"className":"menu-icon","children":"❤️"}),(0,d.jsx)(i.EY,{"className":"menu-label","children":"我的收藏"}),(0,d.jsx)(i.Ss,{"className":"menu-arrow","children":"›"})]}),(0,d.jsxs)(i.Ss,{"className":"menu-item","children":[(0,d.jsx)(i.Ss,{"className":"menu-icon","children":"💬"}),(0,d.jsx)(i.EY,{"className":"menu-label","children":"我的评论"}),(0,d.jsx)(i.Ss,{"className":"menu-arrow","children":"›"})]})]}),(0,d.jsxs)(i.Ss,{"className":"menu-section","children":[(0,d.jsxs)(i.Ss,{"className":"menu-item","children":[(0,d.jsx)(i.Ss,{"className":"menu-icon","children":"⚙️"}),(0,d.jsx)(i.EY,{"className":"menu-label","children":"设置"}),(0,d.jsx)(i.Ss,{"className":"menu-arrow","children":"›"})]}),(0,d.jsxs)(i.Ss,{"className":"menu-item","children":[(0,d.jsx)(i.Ss,{"className":"menu-icon","children":"❓"}),(0,d.jsx)(i.EY,{"className":"menu-label","children":"帮助与反馈"}),(0,d.jsx)(i.Ss,{"className":"menu-arrow","children":"›"})]})]}),(0,d.jsx)(i.Ss,{"className":"logout-section","children":(0,d.jsx)(i.$n,{"className":"logout-btn","onClick":function handleLogout(){(0,m.to)({"title":"提示","content":"确定要退出登录吗？","success":function success(s){s.confirm&&h()}})},"children":"退出登录"})})]}):(0,d.jsx)(i.Ss,{"className":"profile-page","children":(0,d.jsxs)(i.Ss,{"className":"not-login","children":[(0,d.jsx)(i.Ss,{"className":"icon","children":"👤"}),(0,d.jsx)(i.EY,{"className":"text","children":"请先登录"}),(0,d.jsx)(i.$n,{"className":"login-btn","onClick":function goToLogin(){o.Ay.navigateTo({"url":"/pages/login/index"})},"children":"立即登录"})]})})}}}]);