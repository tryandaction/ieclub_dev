# IEClub 后端 - 测试环境配置
# 用于内部测试，不影响线上用户

# ============================================
# 环境配置
# ============================================
NODE_ENV=staging
PORT=3001

# ============================================
# 数据库配置（测试数据库）
# ============================================
DATABASE_URL="mysql://ieclub_user:your_password@localhost:3306/ieclub_staging"

# ============================================
# Redis 配置
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=1

# ============================================
# JWT 配置
# ============================================
JWT_SECRET=your_jwt_secret_key_staging
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_staging
JWT_REFRESH_EXPIRES_IN=30d

# ============================================
# 微信小程序配置
# ============================================
WECHAT_APPID=your_wechat_appid
WECHAT_SECRET=your_wechat_secret

# ============================================
# OSS 配置（可选）
# ============================================
OSS_REGION=oss-cn-hangzhou
OSS_ACCESS_KEY_ID=
OSS_ACCESS_KEY_SECRET=
OSS_BUCKET=
OSS_ENDPOINT=
OSS_CDN_DOMAIN=

# ============================================
# 邮件配置（测试环境 - 模拟发送）
# ============================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=test@ieclub.online
EMAIL_PASSWORD=test_password_staging
EMAIL_FROM=IEClub Staging <test@ieclub.online>
ALLOW_TEST_CODE=true

# ============================================
# CORS 配置（测试环境）
# ============================================
CORS_ORIGIN=http://localhost:5173,https://test.ieclub.online

# ============================================
# 限流配置
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# 文件上传限制
# ============================================
MAX_IMAGE_SIZE=5242880
MAX_DOCUMENT_SIZE=20971520
MAX_VIDEO_SIZE=104857600
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp
ALLOWED_DOCUMENT_TYPES=application/pdf,application/msword

# ============================================
# 日志配置
# ============================================
LOG_LEVEL=debug
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# ============================================
# Sentry 配置（可选）
# ============================================
SENTRY_DSN=

# ============================================
# 推送配置
# ============================================
PUSH_ENABLED=true
PUSH_BATCH_SIZE=100
PUSH_RETRY_TIMES=3

# ============================================
# 缓存配置
# ============================================
CACHE_TTL_SHORT=300
CACHE_TTL_MEDIUM=3600
CACHE_TTL_LONG=86400

# ============================================
# 业务配置
# ============================================
# 话题配置
TOPIC_TITLE_MIN_LENGTH=5
TOPIC_TITLE_MAX_LENGTH=100
TOPIC_CONTENT_MIN_LENGTH=10
TOPIC_CONTENT_MAX_LENGTH=10000
TOPIC_MAX_IMAGES=9
TOPIC_MAX_DOCUMENTS=3
TOPIC_MAX_TAGS=5

# 评论配置
COMMENT_MIN_LENGTH=1
COMMENT_MAX_LENGTH=1000
COMMENT_MAX_IMAGES=3

# 积分配置
CREDITS_TOPIC_CREATE=10
CREDITS_COMMENT_CREATE=2
CREDITS_LIKE_RECEIVED=1
CREDITS_DAILY_LOGIN=5

# 推荐配置
RECOMMEND_TOPICS_COUNT=20
RECOMMEND_REFRESH_INTERVAL=3600

# 热度算法配置
HOT_SCORE_GRAVITY=1.8
HOT_SCORE_VIEW_WEIGHT=1
HOT_SCORE_LIKE_WEIGHT=2
HOT_SCORE_COMMENT_WEIGHT=3
HOT_SCORE_BOOKMARK_WEIGHT=2

# 供需匹配配置
MATCH_SCORE_SKILLS_WEIGHT=0.5
MATCH_SCORE_INTERESTS_WEIGHT=0.3
MATCH_SCORE_LOCATION_WEIGHT=0.2
MATCH_MIN_SCORE=0.6

